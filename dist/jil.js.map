{"version":3,"sources":["webpack://jil/webpack/universalModuleDefinition","webpack://jil/webpack/bootstrap","webpack://jil/./node_modules/fatina/build/fatina.min.js","webpack://jil/./node_modules/maquette/dist/maquette.umd.js","webpack://jil/./node_modules/process/browser.js","webpack://jil/./node_modules/setimmediate/setImmediate.js","webpack://jil/./node_modules/timers-browserify/main.js","webpack://jil/./node_modules/ts-events/dist/lib/EventQueue.js","webpack://jil/./node_modules/ts-events/dist/lib/any-event.js","webpack://jil/./node_modules/ts-events/dist/lib/async-event.js","webpack://jil/./node_modules/ts-events/dist/lib/base-event.js","webpack://jil/./node_modules/ts-events/dist/lib/index.js","webpack://jil/./node_modules/ts-events/dist/lib/objects.js","webpack://jil/./node_modules/ts-events/dist/lib/queued-event.js","webpack://jil/./node_modules/ts-events/dist/lib/sync-event.js","webpack://jil/./node_modules/typescript-mix/dist/index.js","webpack://jil/(webpack)/buildin/global.js","webpack://jil/./src/library/behaviours/animation/transformTween.ts","webpack://jil/./src/library/behaviours/core/factory.ts","webpack://jil/./src/library/behaviours/core/node.ts","webpack://jil/./src/library/behaviours/core/transform.ts","webpack://jil/./src/library/behaviours/index.ts","webpack://jil/./src/library/behaviours/interaction/clickable.ts","webpack://jil/./src/library/components/container/canvas.ts","webpack://jil/./src/library/components/container/layer.ts","webpack://jil/./src/library/components/container/panel.ts","webpack://jil/./src/library/components/container/scene.ts","webpack://jil/./src/library/components/element/button.ts","webpack://jil/./src/library/components/element/image.ts","webpack://jil/./src/library/components/element/text.ts","webpack://jil/./src/library/components/index.ts","webpack://jil/./src/library/config.ts","webpack://jil/./src/library/helpers/helpers.ts","webpack://jil/./src/library/helpers/index.ts","webpack://jil/./src/library/helpers/vector2.ts","webpack://jil/./src/library/index.ts","webpack://jil/./src/library/sceneManager.ts","webpack://jil/./src/library/transitions/sceneTransition.ts"],"names":[],"mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,mBAAmB;AACnB,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,cAAc;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gBAAgB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA,0GAA0G;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,2BAA2B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,2BAA2B;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,wCAAwC,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gBAAgB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,kBAAkB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,uBAAuB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE,+DAA+D,2BAA2B;AAC1F;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,cAAc,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA,wCAAwC,kBAAkB,EAAE;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,8BAA8B;AAC1E;AACA;AACA,4CAA4C,mCAAmC;AAC/E;AACA;AACA;AACA;AACA,2FAA2F,+BAA+B,EAAE;AAC5H,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,6BAA6B;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,mBAAmB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA,2BAA2B,wBAAwB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,+BAA+B,4BAA4B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,cAAc;AAChC,YAAY,iEAAiE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,uBAAuB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,qBAAqB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kDAAkD,cAAc;;AAEhE,CAAC;;;;;;;;;;;;ACt2BD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,sBAAsB,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;;ACzLD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,mBAAO,CAAC,iEAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9DA;AACA;AACa;AACb,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,qEAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,2CAA2C,+lQ;;;;;;;;;;;;AClH3C;AACA;AACa;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D,gBAAgB,mBAAO,CAAC,+DAAW;AACnC,mBAAmB,mBAAO,CAAC,qEAAc;AACzC,oBAAoB,mBAAO,CAAC,uEAAe;AAC3C,qBAAqB,mBAAO,CAAC,yEAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA,CAAC,0DAA0D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gBAAgB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gBAAgB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gBAAgB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yBAAyB;AAChD;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,2CAA2C,22yB;;;;;;;;;;;;ACtS3C;AACA;AACa;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,qEAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sBAAsB;AACzD;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,cAAc;AACd;AACA;AACA,+BAA+B,wBAAwB;AACvD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,2CAA2C,+1Y;;;;;;;;;;;;;AChL3C;AACA;AACa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,uBAAuB,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,2CAA2C,uxd;;;;;;;;;;;;AClJ3C;AACA;AACa;AACb;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D,SAAS,mBAAO,CAAC,qEAAc;AAC/B,SAAS,mBAAO,CAAC,qEAAc;AAC/B,SAAS,mBAAO,CAAC,yEAAgB;AACjC,SAAS,mBAAO,CAAC,uEAAe;AAChC,SAAS,mBAAO,CAAC,mEAAa;AAC9B,mBAAmB,mBAAO,CAAC,qEAAc;AACzC,mBAAmB,mBAAO,CAAC,qEAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gBAAgB;AAC/C;AACA;AACA;AACA,2CAA2C,mmF;;;;;;;;;;;;AC3C3C;AACA;AACa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,cAAc;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,+rK;;;;;;;;;;;;AClE3C;AACA;AACa;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,qEAAc;AACzC,mBAAmB,mBAAO,CAAC,qEAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sBAAsB;AACzD;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,cAAc;AACd;AACA;AACA,+BAA+B,wBAAwB;AACvD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,2CAA2C,+7S;;;;;;;;;;;;ACjI3C;AACA;AACa;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D,mBAAmB,mBAAO,CAAC,qEAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,2CAA2C,2gL;;;;;;;;;;;;ACpG9B;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA,uCAAuC,sBAAsB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iC;;;;;;;;;;;ACj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","file":"jil.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"jil\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jil\"] = factory();\n\telse\n\t\troot[\"jil\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/library/index.ts\");\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"Fatina\",[],e):\"object\"==typeof exports?exports.Fatina=e():t.Fatina=e()}(\"undefined\"!=typeof self?self:this,function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,\"a\",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p=\"\",s(s.s=3)}([function(t,e,s){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.BaseTween=class{constructor(){this.events={},this.elapsed=0,this.duration=0,this.timescale=1,this.state=0,this.first=!0}get isIdle(){return 0===this.state}get isRunning(){return 1===this.state}get isFinished(){return this.state>=3}get isPaused(){return 2===this.state}start(){return 0!==this.state?this:(this.first?this.validate():this.check(),this.state=1,this.parent.addTick(this.tickCb),this.first&&(this.emitEvent(this.events.start),this.first=!1),this)}recycle(){this.reset(!0),this.first=!0}reset(t){this.state=0,t||this.removeParent(),this.loop&&(this.loop.value=this.loop.original),this.loopInit(),this.emitEvent(this.events.restart)}resetAndStart(t){this.loopInit(),this.emitEvent(this.events.restart),this.state=1,t>0&&this.tickCb(t)}setParent(t){return this.removeParent(),this.parent=t,this}setTimescale(t){return this.timescale=t,this}pause(){1===this.state?(this.state=2,this.removeParent()):this.info(1,\"Cannot pause this tween \",this.state)}resume(){2===this.state?(this.state=1,this.parent.addTick(this.tickCb)):this.info(1,\"Cannot resume this tween \",this.state)}skip(t){if(this.state>=3)this.info(1,\"Cannot skip this tween \",this.state);else if(0===this.state&&this.emitEvent(this.events.start),t){const t=this.yo?this.yo.value*this.duration:0;this.tickCb(this.duration-this.elapsed+t)}else this.elapsed=this.duration,this.complete()}kill(){4!==this.state?(this.state=4,this.removeParent(),this.emitEvent(this.events.kill)):this.info(1,\"Cannot kill this tween \",this.state)}setLoop(t){return this.loop||(this.loop={original:1,value:1}),this.loop.original=Math.round(t),this.loop.value=this.loop.original,this}setSettings(t){return this.settings?Object.assign(this.settings,t):this.settings=t,this}complete(){this.state>=3?this.info(1,\"Cannot complete this tween \",this.state):(this.state=3,this.removeParent(),this.emitEvent(this.events.complete))}removeParent(){this.parent&&this.parent.removeTick(this.tickCb)}check(){}validate(){}loopInit(){this.elapsed=0}info(t,e,s){!this.settings||t>this.settings.logLevel||console.log(e,s)}emit(t,e){if(this.settings&&!this.settings.safe)return t.apply(this,e);try{t.apply(this,e)}catch(t){console.warn(t)}}emitEvent(t,e){if(t)if(t instanceof Array)for(const s of t)this.emit(s,e);else this.emit(t,e)}onStart(t){return this.onEvent(\"start\",t)}onRestart(t){return this.onEvent(\"restart\",t)}onUpdate(t){return this.onEvent(\"update\",t)}onKilled(t){return this.onEvent(\"kill\",t)}onComplete(t){return this.onEvent(\"complete\",t)}onEvent(t,e){return this.events[t]?this.events[t]instanceof Array?this.events[t].push(e):this.events[t]=[this.events[t],e]:this.events[t]=e,this}}},function(t,e,s){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const i=s(0);e.Delay=class extends i.BaseTween{constructor(t){super(),this.remains=0,this.duration=t,this.tickCb=this.tick.bind(this)}tick(t){for(this.remains=t*this.timescale;this.remains>0;){this.elapsed+=this.remains;const t=Math.max(Math.min(this.elapsed/this.duration,1),0);if(this.events.update&&this.emitEvent(this.events.update,[this.remains,t]),this.elapsed<this.duration)return;if(this.remains=this.elapsed-this.duration,!this.loop||(this.loop.value--,0===this.loop.value))return void this.complete();this.resetAndStart(0)}}}},function(t,e,s){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const i=s(0),n=s(6),h=s(1);e.Sequence=class extends i.BaseTween{constructor(t){if(super(),this.evtTick=new Set,this.tweens=[],this.index=0,this.remains=0,this.tickCb=this.tick.bind(this),t){this.tweens=new Array(t.length);for(let e=0;e<t.length;e++)t[e].setParent(this),this.tweens[e]=[t[e]]}}get count(){return this.tweens.length}loopInit(){this.index=0;for(const t of this.tweens)for(const e of t)e.reset()}addTick(t){this.evtTick.add(t)}removeTick(t){this.evtTick.delete(t)}tick(t){this.state>=3||(this.remains=t*this.timescale,this.elapsed+=this.remains,this.localTick(this.remains))}localTick(t,e){if(this.cur||this.nextTween(),this.cur&&(this.evtTick.forEach(function(e){e(t)}),!0!==e&&this.events.update&&this.emitEvent(this.events.update,[t,0])),this.remains=t,this.cur){for(const t of this.cur)if(3!==t.state)return;if(this.remains=this.cur[0].elapsed-this.cur[0].duration,this.events.stepEnd&&this.emitEvent(this.events.stepEnd,this.cur[0]),this.cur=void 0,this.index++,this.remains>.01)return void this.localTick(this.remains,!0)}if(!this.cur&&this.tweens.length===this.index){if(this.loop&&(this.loop.value--,0!==this.loop.value))return void this.resetAndStart(this.remains);this.complete()}}nextTween(){if(this.cur=this.tweens[this.index],this.cur){for(const t of this.cur)t.start();this.events.stepStart&&this.emitEvent(this.events.stepStart,this.cur[0])}}append(t){return t.setParent(this),this.tweens[this.tweens.length]=[t],this}appendCallback(t){const e=new n.Callback(t);return e.setParent(this),this.tweens[this.tweens.length]=[e],this}appendInterval(t){const e=new h.Delay(t);return e.setParent(this),this.tweens[this.tweens.length]=[e],this}prepend(t){return t.setParent(this),this.tweens.unshift([t]),this}prependCallback(t){const e=new n.Callback(t);return e.setParent(this),this.tweens.unshift([e]),this}prependInterval(t){const e=new h.Delay(t);return e.setParent(this),this.tweens.unshift([e]),this}skip(t){if(this.state>=3)this.info(1,\"Cannot skip this tween \",this.state);else{for(const e of this.tweens)for(const s of e)0===s.elapsed&&this.emitEvent(this.events.stepStart,s),s.skip(t),this.emitEvent(this.events.stepEnd,s);super.skip()}}kill(){if(4!==this.state){for(const t of this.tweens)for(const e of t)e.kill();super.kill()}else this.info(1,\"Cannot kill this tween \",this.state)}join(t){return 0===this.tweens.length?this.append(t):(t.setParent(this),this.tweens[this.tweens.length-1].push(t),this)}onStepStart(t){return this.onEvent(\"stepStart\",t)}onStepEnd(t){return this.onEvent(\"stepEnd\",t)}}},function(t,e,s){\"use strict\";const i=s(4);t.exports=new i.Fatina},function(t,e,s){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const i=s(5),n=s(1),h=s(2),a=s(7);let r,o,u;\"undefined\"!=typeof window&&(o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,u=window.cancelAnimationFrame||window.mozCancelAnimationFrame);e.Fatina=class{constructor(){this.plugin={},this.loadedPlugins=[],this.eventCreated=[],this.settings={logLevel:0,safe:!0,smooth:!0,maxFrameDt:50,maxFrameNumber:40,maxDt:15e3},this.time=0,this.dt=0,this.lastTime=0,this.initialized=!1}get elapsed(){return this.manager.elapsed}get mainTicker(){return this.initialized||this.init(),this.manager}init(t){return!this.initialized&&(this.manager||(this.manager=new i.Ticker,this.manager.start()),\"undefined\"==typeof window||t||(r=o(this.updateLoop.bind(this))),this.initialized=!0,!0)}setTimescale(t){this.init(),this.manager.setTimescale(t)}pause(){this.init(),this.manager.pause()}resume(){this.init(),this.manager.resume()}destroy(){this.manager&&this.manager.kill(),r&&u(r),this.initialized=!1}update(t){this.initialized&&this.manager&&(this.manager.tick(t),this.time+=t)}tween(t){const e=new a.Tween(t);return this.addContext(e),e}sequence(t){const e=new h.Sequence(t);return this.addContext(e),e}delay(t){const e=new n.Delay(t);return this.addContext(e),e}setTimeout(t,e){const s=new n.Delay(e).onComplete(t);return this.addContext(s),s.start()}setInterval(t,e){const s=new n.Delay(e).onRestart(t).setLoop(-1);return this.addContext(s),s.start()}addContext(t){this.initialized||this.init(),t.setParent(this.manager),0===this.settings.logLevel&&this.settings.safe||t.setSettings(this.settings),this.emitCreated(t)}ticker(){this.initialized||this.init();const t=new i.Ticker,e=t.tick.bind(t);return t.setParent(this.manager,e),this.manager.addTick(e),t.start(),this.emitCreated(t),t}updateLoop(t){if(this.dt+=t-this.lastTime,this.dt>this.settings.maxDt&&(console.warn(`dt too high ${Math.round(this.dt)}ms. , Capped to ${this.settings.maxDt}ms.`),this.dt=this.settings.maxDt),this.settings.smooth){let t=0;for(;this.dt>0&&t<this.settings.maxFrameNumber;){const e=Math.min(this.dt,this.settings.maxFrameDt);this.update(e),this.dt-=e,t++}}else this.update(this.dt),this.dt=0;this.lastTime=t,r=o(this.updateLoop.bind(this))}loadPlugin(t){t.init(this),this.loadedPlugins.push(t),this.info(2,\"Plugin Loaded\",t.name)}info(t,e,s){t>this.settings.logLevel||(s?console.log(e,s):console.log(e))}emit(t,e){if(!this.settings.safe)return t(e);try{t(e)}catch(t){console.warn(t)}}emitCreated(t){for(const e of this.eventCreated)this.emit(e,t)}addListenerCreated(t){this.eventCreated.push(t)}removeListenerCreated(t){const e=this.eventCreated.indexOf(t);-1!==e&&this.eventCreated.splice(e,1)}setLog(t){this.settings.logLevel=t}setSafe(t){this.settings.safe=t}}},function(t,e,s){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.Ticker=class{constructor(){this.state=0,this.timescale=1,this.elapsed=0,this.duration=0,this.ticks=new Set,this.newTicks=new Set,this.dt=0}setParent(t,e){this.tickCb=e,this.parent=t}setTimescale(t){this.timescale=t}addTick(t){this.newTicks.add(t)}removeTick(t){this.ticks.delete(t)||this.newTicks.delete(t)}tick(t){1===this.state&&(this.dt=t*this.timescale,this.newTicks.size>0&&(this.newTicks.forEach(t=>this.ticks.add(t)),this.newTicks.clear()),this.ticks.forEach(t=>t(this.dt)),this.elapsed+=this.dt)}start(){0===this.state&&(this.state=1)}pause(){1===this.state&&(this.state=2)}resume(){2===this.state&&(this.state=1)}kill(){this.state>=3||(this.parent&&this.tickCb&&this.parent.removeTick(this.tickCb),this.state=4)}skip(){}reset(){this.state=0}get isIdle(){return 0===this.state}get isRunning(){return 1===this.state}get isFinished(){return this.state>=3}get isPaused(){return 2===this.state}}},function(t,e,s){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const i=s(0);e.Callback=class extends i.BaseTween{constructor(t){super(),this.callback=t,this.tickCb=this.tick.bind(this)}tick(t){this.elapsed+=t,this.duration=0,this.callback(),this.emitEvent(this.events.update,[t,1]),this.complete()}}},function(t,e,s){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const i=s(8),n=s(0),h=s(2);e.Tween=class extends n.BaseTween{constructor(t){super(),this.prop=[],this.steps=0,this.relative=!1,this.p=0,this.v=0,this.remains=0,this.obj=t,this.tickCb=this.tick.bind(this)}init(t){this.obj=t,this.prop.length=0}validate(){if(!this.obj)throw new Error(\"undefined object\");if(!this.parent)throw new Error(\"no ticker\");this.ease||(this.ease=i.easeNames.linear),this.check()}check(){this.cf||(this.cf={}),this.ct||(this.ct={});for(const t of this.prop)this.f?(this.cf[t]=this.f[t],this.obj[t]=this.f[t]):this.cf[t]=this.obj[t],this.relative?this.ct[t]=this.obj[t]+this.t[t]:this.ct[t]=this.t[t]}tick(t){if(!(this.state>=3))for(this.remains=t*this.timescale;this.remains>0;){this.elapsed+=this.remains,this.p=Math.max(Math.min(this.elapsed/this.duration,1),0),this.v=this.ease(this.p),this.yo&&(this.yo.original-this.yo.value)%2==1&&(this.v=1-this.ease(1-this.p)),0!==this.steps&&(this.v=Math.round(this.v*this.steps)/this.steps);for(const t of this.prop)this.obj[t]=this.cf[t]+(this.ct[t]-this.cf[t])*this.v;if(this.events.update&&this.emitEvent(this.events.update,[this.remains,this.p]),this.elapsed<this.duration)return;if(this.remains=this.elapsed-this.duration,this.yo&&this.yo.value>0)this.reverse(),this.resetAndStart(0),this.yo.value--;else{if(!this.loop||(this.loop.value--,0===this.loop.value))return void this.complete();this.check(),this.resetAndStart(0)}}}from(t){return this.f=t,this.updateProp(),this}to(t,e){return this.t=t,this.duration=e,this.updateProp(),this}updateProp(){if(this.obj){for(const t in this.t)this.t.hasOwnProperty(t)&&this.prop.push(t);this.prop.filter((t,e,s)=>e===s.indexOf(t))}}setRelative(t){return this.relative=t,this}modify(t,e){for(const s of this.prop)t.hasOwnProperty(s)&&(this.obj[s]+=t[s],e?this.ct[s]+=t[s]:this.cf[s]+=t[s])}reset(t){if(this.yo){if((this.yo.original-this.yo.value)%2==1){let t=this.cf;this.cf=this.ct,this.ct=t,t=this.f,this.f=this.t,this.t=t;const e=(1-this.elapsed/this.duration)*this.duration;this.elapsed=Math.round(1e3*e)/1e3}this.yo.value=this.yo.original}super.reset(t)}reverse(){let t=this.cf;this.cf=this.ct,this.ct=t,t=this.f,this.f=this.t,this.t=t;const e=(1-this.elapsed/this.duration)*this.duration;this.elapsed=Math.round(1e3*e)/1e3,3===this.state&&(this.reset(!0),this.start())}yoyo(t){return this.yo||(this.yo={original:0,value:0}),this.yo.original=t,this.yo.value=t,this}setSteps(t){return this.steps=t,this}toSequence(){if(!this.parent)throw new Error(\"parent ticker not defined\");return(new h.Sequence).setParent(this.parent).append(this)}setEasing(t){if(!(t in i.easeNames))throw new Error(`unknown easing method ${t}`);return this.ease=i.easeNames[t],this}loopInit(){this.elapsed=0}}},function(t,e,s){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const i=Math.PI,n=Math.PI/2,h={linear:t=>t,inQuad:t=>t*t,outQuad:t=>2*t-t*t,inOutQuad:t=>t<.5?2*t*t:2*(2*t-t*t)-1,inCubic:t=>t*t*t,outCubic:t=>3*t-3*t*t+t*t*t,inOutCubic:t=>t<.5?4*t*t*t:4*(3*t-3*t*t+t*t*t)-3,inQuart:t=>t*t*t*t,outQuart:t=>{const e=t*t;return 4*t-6*e+4*e*t-e*e},inOutQuart:t=>{if(t<.5)return 8*t*t*t*t;{const e=t*t;return 8*(4*t-6*e+4*e*t-e*e)-7}},inSine:t=>1===t?1:1-Math.cos(n*t),outSine:t=>Math.sin(n*t),inOutSine:t=>t<.5?(1-Math.cos(i*t))/2:(1+Math.sin(i*(t-.5)))/2,inCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),outCirc:t=>Math.sqrt(1-Math.pow(1-t,2)),inOutCirc:t=>t<.5?(1-Math.sqrt(1-4*t*t))/2:(1+Math.sqrt(8*t-3-4*t*t))/2,inQuint:t=>t*t*t*t*t,outQuint:t=>--t*t*t*t*t+1,InOutQuint:t=>(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),inExponential:t=>1===t?1:0===t?0:Math.pow(1024,t-1),outExponential:t=>1===t?1:1-Math.pow(2,-10*t),inOutExponential:t=>0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1))),inElastic:t=>0===t?0:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI),outElastic:t=>1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1,inOutElastic:t=>0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1,inBack:t=>{const e=1.70158;return 1===t?1:t*t*((e+1)*t-e)},outBack:t=>{const e=1.70158;return 0===t?0:--t*t*((e+1)*t+e)+1},inOutBack:t=>{const e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},outBounce:t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,inBounce:t=>1-h.outBounce(1-t),inOutBounce:t=>t<.5?.5*h.inBounce(2*t):.5*h.outBounce(2*t-1)+.5};e.easeNames=h}])});","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (factory((global.maquette = {})));\n}(this, (function (exports) { 'use strict';\n\n    /* tslint:disable no-http-string */\r\n    var NAMESPACE_W3 = 'http://www.w3.org/';\r\n    /* tslint:enable no-http-string */\r\n    var NAMESPACE_SVG = NAMESPACE_W3 + \"2000/svg\";\r\n    var NAMESPACE_XLINK = NAMESPACE_W3 + \"1999/xlink\";\r\n    var emptyArray = [];\r\n    var extend = function (base, overrides) {\r\n        var result = {};\r\n        Object.keys(base).forEach(function (key) {\r\n            result[key] = base[key];\r\n        });\r\n        if (overrides) {\r\n            Object.keys(overrides).forEach(function (key) {\r\n                result[key] = overrides[key];\r\n            });\r\n        }\r\n        return result;\r\n    };\r\n    var same = function (vnode1, vnode2) {\r\n        if (vnode1.vnodeSelector !== vnode2.vnodeSelector) {\r\n            return false;\r\n        }\r\n        if (vnode1.properties && vnode2.properties) {\r\n            if (vnode1.properties.key !== vnode2.properties.key) {\r\n                return false;\r\n            }\r\n            return vnode1.properties.bind === vnode2.properties.bind;\r\n        }\r\n        return !vnode1.properties && !vnode2.properties;\r\n    };\r\n    var checkStyleValue = function (styleValue) {\r\n        if (typeof styleValue !== 'string') {\r\n            throw new Error('Style values must be strings');\r\n        }\r\n    };\r\n    var findIndexOfChild = function (children, sameAs, start) {\r\n        if (sameAs.vnodeSelector !== '') {\r\n            // Never scan for text-nodes\r\n            for (var i = start; i < children.length; i++) {\r\n                if (same(children[i], sameAs)) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    var checkDistinguishable = function (childNodes, indexToCheck, parentVNode, operation) {\r\n        var childNode = childNodes[indexToCheck];\r\n        if (childNode.vnodeSelector === '') {\r\n            return; // Text nodes need not be distinguishable\r\n        }\r\n        var properties = childNode.properties;\r\n        var key = properties ? (properties.key === undefined ? properties.bind : properties.key) : undefined;\r\n        if (!key) { // A key is just assumed to be unique\r\n            for (var i = 0; i < childNodes.length; i++) {\r\n                if (i !== indexToCheck) {\r\n                    var node = childNodes[i];\r\n                    if (same(node, childNode)) {\r\n                        throw new Error(parentVNode.vnodeSelector + \" had a \" + childNode.vnodeSelector + \" child \" + (operation === 'added' ? operation : 'removed') + \", but there is now more than one. You must add unique key properties to make them distinguishable.\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    var nodeAdded = function (vNode) {\r\n        if (vNode.properties) {\r\n            var enterAnimation = vNode.properties.enterAnimation;\r\n            if (enterAnimation) {\r\n                enterAnimation(vNode.domNode, vNode.properties);\r\n            }\r\n        }\r\n    };\r\n    var removedNodes = [];\r\n    var requestedIdleCallback = false;\r\n    var visitRemovedNode = function (node) {\r\n        (node.children || []).forEach(visitRemovedNode);\r\n        if (node.properties && node.properties.afterRemoved) {\r\n            node.properties.afterRemoved.apply(node.properties.bind || node.properties, [node.domNode]);\r\n        }\r\n    };\r\n    var processPendingNodeRemovals = function () {\r\n        requestedIdleCallback = false;\r\n        removedNodes.forEach(visitRemovedNode);\r\n        removedNodes.length = 0;\r\n    };\r\n    var scheduleNodeRemoval = function (vNode) {\r\n        removedNodes.push(vNode);\r\n        if (!requestedIdleCallback) {\r\n            requestedIdleCallback = true;\r\n            if (typeof window !== 'undefined' && 'requestIdleCallback' in window) {\r\n                window.requestIdleCallback(processPendingNodeRemovals, { timeout: 16 });\r\n            }\r\n            else {\r\n                setTimeout(processPendingNodeRemovals, 16);\r\n            }\r\n        }\r\n    };\r\n    var nodeToRemove = function (vNode) {\r\n        var domNode = vNode.domNode;\r\n        if (vNode.properties) {\r\n            var exitAnimation = vNode.properties.exitAnimation;\r\n            if (exitAnimation) {\r\n                domNode.style.pointerEvents = 'none';\r\n                var removeDomNode = function () {\r\n                    if (domNode.parentNode) {\r\n                        domNode.parentNode.removeChild(domNode);\r\n                        scheduleNodeRemoval(vNode);\r\n                    }\r\n                };\r\n                exitAnimation(domNode, removeDomNode, vNode.properties);\r\n                return;\r\n            }\r\n        }\r\n        if (domNode.parentNode) {\r\n            domNode.parentNode.removeChild(domNode);\r\n            scheduleNodeRemoval(vNode);\r\n        }\r\n    };\r\n    var setProperties = function (domNode, properties, projectionOptions) {\r\n        if (!properties) {\r\n            return;\r\n        }\r\n        var eventHandlerInterceptor = projectionOptions.eventHandlerInterceptor;\r\n        var propNames = Object.keys(properties);\r\n        var propCount = propNames.length;\r\n        var _loop_1 = function (i) {\r\n            var propName = propNames[i];\r\n            var propValue = properties[propName];\r\n            if (propName === 'className') {\r\n                throw new Error('Property \"className\" is not supported, use \"class\".');\r\n            }\r\n            else if (propName === 'class') {\r\n                toggleClasses(domNode, propValue, true);\r\n            }\r\n            else if (propName === 'classes') {\r\n                // object with string keys and boolean values\r\n                var classNames = Object.keys(propValue);\r\n                var classNameCount = classNames.length;\r\n                for (var j = 0; j < classNameCount; j++) {\r\n                    var className = classNames[j];\r\n                    if (propValue[className]) {\r\n                        domNode.classList.add(className);\r\n                    }\r\n                }\r\n            }\r\n            else if (propName === 'styles') {\r\n                // object with string keys and string (!) values\r\n                var styleNames = Object.keys(propValue);\r\n                var styleCount = styleNames.length;\r\n                for (var j = 0; j < styleCount; j++) {\r\n                    var styleName = styleNames[j];\r\n                    var styleValue = propValue[styleName];\r\n                    if (styleValue) {\r\n                        checkStyleValue(styleValue);\r\n                        projectionOptions.styleApplyer(domNode, styleName, styleValue);\r\n                    }\r\n                }\r\n            }\r\n            else if (propName !== 'key' && propValue !== null && propValue !== undefined) {\r\n                var type = typeof propValue;\r\n                if (type === 'function') {\r\n                    if (propName.lastIndexOf('on', 0) === 0) { // lastIndexOf(,0)===0 -> startsWith\r\n                        if (eventHandlerInterceptor) {\r\n                            propValue = eventHandlerInterceptor(propName, propValue, domNode, properties); // intercept eventhandlers\r\n                        }\r\n                        if (propName === 'oninput') {\r\n                            /* tslint:disable no-this-keyword no-invalid-this only-arrow-functions no-void-expression */\r\n                            (function () {\r\n                                // record the evt.target.value, because IE and Edge sometimes do a requestAnimationFrame between changing value and running oninput\r\n                                var oldPropValue = propValue;\r\n                                propValue = function (evt) {\r\n                                    oldPropValue.apply(this, [evt]);\r\n                                    evt.target['oninput-value'] = evt.target.value; // may be HTMLTextAreaElement as well\r\n                                };\r\n                            }());\r\n                            /* tslint:enable */\r\n                        }\r\n                        domNode[propName] = propValue;\r\n                    }\r\n                }\r\n                else if (projectionOptions.namespace === NAMESPACE_SVG) {\r\n                    if (propName === 'href') {\r\n                        domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\r\n                    }\r\n                    else {\r\n                        // all SVG attributes are read-only in DOM, so...\r\n                        domNode.setAttribute(propName, propValue);\r\n                    }\r\n                }\r\n                else if (type === 'string' && propName !== 'value' && propName !== 'innerHTML') {\r\n                    domNode.setAttribute(propName, propValue);\r\n                }\r\n                else {\r\n                    domNode[propName] = propValue;\r\n                }\r\n            }\r\n        };\r\n        for (var i = 0; i < propCount; i++) {\r\n            _loop_1(i);\r\n        }\r\n    };\r\n    var addChildren = function (domNode, children, projectionOptions) {\r\n        if (!children) {\r\n            return;\r\n        }\r\n        for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\r\n            var child = children_1[_i];\r\n            createDom(child, domNode, undefined, projectionOptions);\r\n        }\r\n    };\r\n    var initPropertiesAndChildren = function (domNode, vnode, projectionOptions) {\r\n        addChildren(domNode, vnode.children, projectionOptions); // children before properties, needed for value property of <select>.\r\n        if (vnode.text) {\r\n            domNode.textContent = vnode.text;\r\n        }\r\n        setProperties(domNode, vnode.properties, projectionOptions);\r\n        if (vnode.properties && vnode.properties.afterCreate) {\r\n            vnode.properties.afterCreate.apply(vnode.properties.bind || vnode.properties, [domNode, projectionOptions, vnode.vnodeSelector, vnode.properties, vnode.children]);\r\n        }\r\n    };\r\n    var createDom = function (vnode, parentNode, insertBefore, projectionOptions) {\r\n        var domNode;\r\n        var start = 0;\r\n        var vnodeSelector = vnode.vnodeSelector;\r\n        var doc = parentNode.ownerDocument;\r\n        if (vnodeSelector === '') {\r\n            domNode = vnode.domNode = doc.createTextNode(vnode.text);\r\n            if (insertBefore !== undefined) {\r\n                parentNode.insertBefore(domNode, insertBefore);\r\n            }\r\n            else {\r\n                parentNode.appendChild(domNode);\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i <= vnodeSelector.length; ++i) {\r\n                var c = vnodeSelector.charAt(i);\r\n                if (i === vnodeSelector.length || c === '.' || c === '#') {\r\n                    var type = vnodeSelector.charAt(start - 1);\r\n                    var found = vnodeSelector.slice(start, i);\r\n                    if (type === '.') {\r\n                        domNode.classList.add(found);\r\n                    }\r\n                    else if (type === '#') {\r\n                        domNode.id = found;\r\n                    }\r\n                    else {\r\n                        if (found === 'svg') {\r\n                            projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\r\n                        }\r\n                        if (projectionOptions.namespace !== undefined) {\r\n                            domNode = vnode.domNode = doc.createElementNS(projectionOptions.namespace, found);\r\n                        }\r\n                        else {\r\n                            domNode = vnode.domNode = (vnode.domNode || doc.createElement(found));\r\n                            if (found === 'input' && vnode.properties && vnode.properties.type !== undefined) {\r\n                                // IE8 and older don't support setting input type after the DOM Node has been added to the document\r\n                                domNode.setAttribute('type', vnode.properties.type);\r\n                            }\r\n                        }\r\n                        if (insertBefore !== undefined) {\r\n                            parentNode.insertBefore(domNode, insertBefore);\r\n                        }\r\n                        else if (domNode.parentNode !== parentNode) {\r\n                            parentNode.appendChild(domNode);\r\n                        }\r\n                    }\r\n                    start = i + 1;\r\n                }\r\n            }\r\n            initPropertiesAndChildren(domNode, vnode, projectionOptions);\r\n        }\r\n    };\r\n    var updateDom;\r\n    /**\r\n     * Adds or removes classes from an Element\r\n     * @param domNode the element\r\n     * @param classes a string separated list of classes\r\n     * @param on true means add classes, false means remove\r\n     */\r\n    var toggleClasses = function (domNode, classes, on) {\r\n        if (!classes) {\r\n            return;\r\n        }\r\n        classes.split(' ').forEach(function (c) { return domNode.classList.toggle(c, on); });\r\n    };\r\n    var updateProperties = function (domNode, previousProperties, properties, projectionOptions) {\r\n        if (!properties) {\r\n            return;\r\n        }\r\n        var propertiesUpdated = false;\r\n        var propNames = Object.keys(properties);\r\n        var propCount = propNames.length;\r\n        for (var i = 0; i < propCount; i++) {\r\n            var propName = propNames[i];\r\n            // assuming that properties will be nullified instead of missing is by design\r\n            var propValue = properties[propName];\r\n            var previousValue = previousProperties[propName];\r\n            if (propName === 'class') {\r\n                if (previousValue !== propValue) {\r\n                    toggleClasses(domNode, previousValue, false);\r\n                    toggleClasses(domNode, propValue, true);\r\n                }\r\n            }\r\n            else if (propName === 'classes') {\r\n                var classList = domNode.classList;\r\n                var classNames = Object.keys(propValue);\r\n                var classNameCount = classNames.length;\r\n                for (var j = 0; j < classNameCount; j++) {\r\n                    var className = classNames[j];\r\n                    var on = !!propValue[className];\r\n                    var previousOn = !!previousValue[className];\r\n                    if (on === previousOn) {\r\n                        continue;\r\n                    }\r\n                    propertiesUpdated = true;\r\n                    if (on) {\r\n                        classList.add(className);\r\n                    }\r\n                    else {\r\n                        classList.remove(className);\r\n                    }\r\n                }\r\n            }\r\n            else if (propName === 'styles') {\r\n                var styleNames = Object.keys(propValue);\r\n                var styleCount = styleNames.length;\r\n                for (var j = 0; j < styleCount; j++) {\r\n                    var styleName = styleNames[j];\r\n                    var newStyleValue = propValue[styleName];\r\n                    var oldStyleValue = previousValue[styleName];\r\n                    if (newStyleValue === oldStyleValue) {\r\n                        continue;\r\n                    }\r\n                    propertiesUpdated = true;\r\n                    if (newStyleValue) {\r\n                        checkStyleValue(newStyleValue);\r\n                        projectionOptions.styleApplyer(domNode, styleName, newStyleValue);\r\n                    }\r\n                    else {\r\n                        projectionOptions.styleApplyer(domNode, styleName, '');\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (!propValue && typeof previousValue === 'string') {\r\n                    propValue = '';\r\n                }\r\n                if (propName === 'value') { // value can be manipulated by the user directly and using event.preventDefault() is not an option\r\n                    var domValue = domNode[propName];\r\n                    if (domValue !== propValue // The 'value' in the DOM tree !== newValue\r\n                        && (domNode['oninput-value']\r\n                            ? domValue === domNode['oninput-value'] // If the last reported value to 'oninput' does not match domValue, do nothing and wait for oninput\r\n                            : propValue !== previousValue // Only update the value if the vdom changed\r\n                        )) {\r\n                        // The edge cases are described in the tests\r\n                        domNode[propName] = propValue; // Reset the value, even if the virtual DOM did not change\r\n                        domNode['oninput-value'] = undefined;\r\n                    } // else do not update the domNode, otherwise the cursor position would be changed\r\n                    if (propValue !== previousValue) {\r\n                        propertiesUpdated = true;\r\n                    }\r\n                }\r\n                else if (propValue !== previousValue) {\r\n                    var type = typeof propValue;\r\n                    if (type !== 'function' || !projectionOptions.eventHandlerInterceptor) { // Function updates are expected to be handled by the EventHandlerInterceptor\r\n                        if (projectionOptions.namespace === NAMESPACE_SVG) {\r\n                            if (propName === 'href') {\r\n                                domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\r\n                            }\r\n                            else {\r\n                                // all SVG attributes are read-only in DOM, so...\r\n                                domNode.setAttribute(propName, propValue);\r\n                            }\r\n                        }\r\n                        else if (type === 'string' && propName !== 'innerHTML') {\r\n                            if (propName === 'role' && propValue === '') {\r\n                                domNode.removeAttribute(propName);\r\n                            }\r\n                            else {\r\n                                domNode.setAttribute(propName, propValue);\r\n                            }\r\n                        }\r\n                        else if (domNode[propName] !== propValue) { // Comparison is here for side-effects in Edge with scrollLeft and scrollTop\r\n                            domNode[propName] = propValue;\r\n                        }\r\n                        propertiesUpdated = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return propertiesUpdated;\r\n    };\r\n    var updateChildren = function (vnode, domNode, oldChildren, newChildren, projectionOptions) {\r\n        if (oldChildren === newChildren) {\r\n            return false;\r\n        }\r\n        oldChildren = oldChildren || emptyArray;\r\n        newChildren = newChildren || emptyArray;\r\n        var oldChildrenLength = oldChildren.length;\r\n        var newChildrenLength = newChildren.length;\r\n        var oldIndex = 0;\r\n        var newIndex = 0;\r\n        var i;\r\n        var textUpdated = false;\r\n        while (newIndex < newChildrenLength) {\r\n            var oldChild = (oldIndex < oldChildrenLength) ? oldChildren[oldIndex] : undefined;\r\n            var newChild = newChildren[newIndex];\r\n            if (oldChild !== undefined && same(oldChild, newChild)) {\r\n                textUpdated = updateDom(oldChild, newChild, projectionOptions) || textUpdated;\r\n                oldIndex++;\r\n            }\r\n            else {\r\n                var findOldIndex = findIndexOfChild(oldChildren, newChild, oldIndex + 1);\r\n                if (findOldIndex >= 0) {\r\n                    // Remove preceding missing children\r\n                    for (i = oldIndex; i < findOldIndex; i++) {\r\n                        nodeToRemove(oldChildren[i]);\r\n                        checkDistinguishable(oldChildren, i, vnode, 'removed');\r\n                    }\r\n                    textUpdated = updateDom(oldChildren[findOldIndex], newChild, projectionOptions) || textUpdated;\r\n                    oldIndex = findOldIndex + 1;\r\n                }\r\n                else {\r\n                    // New child\r\n                    createDom(newChild, domNode, (oldIndex < oldChildrenLength) ? oldChildren[oldIndex].domNode : undefined, projectionOptions);\r\n                    nodeAdded(newChild);\r\n                    checkDistinguishable(newChildren, newIndex, vnode, 'added');\r\n                }\r\n            }\r\n            newIndex++;\r\n        }\r\n        if (oldChildrenLength > oldIndex) {\r\n            // Remove child fragments\r\n            for (i = oldIndex; i < oldChildrenLength; i++) {\r\n                nodeToRemove(oldChildren[i]);\r\n                checkDistinguishable(oldChildren, i, vnode, 'removed');\r\n            }\r\n        }\r\n        return textUpdated;\r\n    };\r\n    updateDom = function (previous, vnode, projectionOptions) {\r\n        var domNode = previous.domNode;\r\n        var textUpdated = false;\r\n        if (previous === vnode) {\r\n            return false; // By contract, VNode objects may not be modified anymore after passing them to maquette\r\n        }\r\n        var updated = false;\r\n        if (vnode.vnodeSelector === '') {\r\n            if (vnode.text !== previous.text) {\r\n                var newTextNode = domNode.ownerDocument.createTextNode(vnode.text);\r\n                domNode.parentNode.replaceChild(newTextNode, domNode);\r\n                vnode.domNode = newTextNode;\r\n                textUpdated = true;\r\n                return textUpdated;\r\n            }\r\n            vnode.domNode = domNode;\r\n        }\r\n        else {\r\n            if (vnode.vnodeSelector.lastIndexOf('svg', 0) === 0) { // lastIndexOf(needle,0)===0 means StartsWith\r\n                projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\r\n            }\r\n            if (previous.text !== vnode.text) {\r\n                updated = true;\r\n                if (vnode.text === undefined) {\r\n                    domNode.removeChild(domNode.firstChild); // the only textnode presumably\r\n                }\r\n                else {\r\n                    domNode.textContent = vnode.text;\r\n                }\r\n            }\r\n            vnode.domNode = domNode;\r\n            updated = updateChildren(vnode, domNode, previous.children, vnode.children, projectionOptions) || updated;\r\n            updated = updateProperties(domNode, previous.properties, vnode.properties, projectionOptions) || updated;\r\n            if (vnode.properties && vnode.properties.afterUpdate) {\r\n                vnode.properties.afterUpdate.apply(vnode.properties.bind || vnode.properties, [domNode, projectionOptions, vnode.vnodeSelector, vnode.properties, vnode.children]);\r\n            }\r\n        }\r\n        if (updated && vnode.properties && vnode.properties.updateAnimation) {\r\n            vnode.properties.updateAnimation(domNode, vnode.properties, previous.properties);\r\n        }\r\n        return textUpdated;\r\n    };\r\n    var createProjection = function (vnode, projectionOptions) {\r\n        return {\r\n            getLastRender: function () { return vnode; },\r\n            update: function (updatedVnode) {\r\n                if (vnode.vnodeSelector !== updatedVnode.vnodeSelector) {\r\n                    throw new Error('The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)');\r\n                }\r\n                var previousVNode = vnode;\r\n                vnode = updatedVnode;\r\n                updateDom(previousVNode, updatedVnode, projectionOptions);\r\n            },\r\n            domNode: vnode.domNode\r\n        };\r\n    };\n\n    var DEFAULT_PROJECTION_OPTIONS = {\r\n        namespace: undefined,\r\n        performanceLogger: function () { return undefined; },\r\n        eventHandlerInterceptor: undefined,\r\n        styleApplyer: function (domNode, styleName, value) {\r\n            // Provides a hook to add vendor prefixes for browsers that still need it.\r\n            domNode.style[styleName] = value;\r\n        }\r\n    };\r\n    var applyDefaultProjectionOptions = function (projectorOptions) {\r\n        return extend(DEFAULT_PROJECTION_OPTIONS, projectorOptions);\r\n    };\r\n    var dom = {\r\n        /**\r\n         * Creates a real DOM tree from `vnode`. The [[Projection]] object returned will contain the resulting DOM Node in\r\n         * its [[Projection.domNode|domNode]] property.\r\n         * This is a low-level method. Users will typically use a [[Projector]] instead.\r\n         * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\r\n         * objects may only be rendered once.\r\n         * @param projectionOptions - Options to be used to create and update the projection.\r\n         * @returns The [[Projection]] which also contains the DOM Node that was created.\r\n         */\r\n        create: function (vnode, projectionOptions) {\r\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n            createDom(vnode, document.createElement('div'), undefined, projectionOptions);\r\n            return createProjection(vnode, projectionOptions);\r\n        },\r\n        /**\r\n         * Appends a new child node to the DOM which is generated from a [[VNode]].\r\n         * This is a low-level method. Users will typically use a [[Projector]] instead.\r\n         * @param parentNode - The parent node for the new child node.\r\n         * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\r\n         * objects may only be rendered once.\r\n         * @param projectionOptions - Options to be used to create and update the [[Projection]].\r\n         * @returns The [[Projection]] that was created.\r\n         */\r\n        append: function (parentNode, vnode, projectionOptions) {\r\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n            createDom(vnode, parentNode, undefined, projectionOptions);\r\n            return createProjection(vnode, projectionOptions);\r\n        },\r\n        /**\r\n         * Inserts a new DOM node which is generated from a [[VNode]].\r\n         * This is a low-level method. Users wil typically use a [[Projector]] instead.\r\n         * @param beforeNode - The node that the DOM Node is inserted before.\r\n         * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function.\r\n         * NOTE: [[VNode]] objects may only be rendered once.\r\n         * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\r\n         * @returns The [[Projection]] that was created.\r\n         */\r\n        insertBefore: function (beforeNode, vnode, projectionOptions) {\r\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n            createDom(vnode, beforeNode.parentNode, beforeNode, projectionOptions);\r\n            return createProjection(vnode, projectionOptions);\r\n        },\r\n        /**\r\n         * Merges a new DOM node which is generated from a [[VNode]] with an existing DOM Node.\r\n         * This means that the virtual DOM and the real DOM will have one overlapping element.\r\n         * Therefore the selector for the root [[VNode]] will be ignored, but its properties and children will be applied to the Element provided.\r\n         * This is a low-level method. Users wil typically use a [[Projector]] instead.\r\n         * @param element - The existing element to adopt as the root of the new virtual DOM. Existing attributes and child nodes are preserved.\r\n         * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]] objects\r\n         * may only be rendered once.\r\n         * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\r\n         * @returns The [[Projection]] that was created.\r\n         */\r\n        merge: function (element, vnode, projectionOptions) {\r\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n            vnode.domNode = element;\r\n            initPropertiesAndChildren(element, vnode, projectionOptions);\r\n            return createProjection(vnode, projectionOptions);\r\n        },\r\n        /**\r\n         * Replaces an existing DOM node with a node generated from a [[VNode]].\r\n         * This is a low-level method. Users will typically use a [[Projector]] instead.\r\n         * @param element - The node for the [[VNode]] to replace.\r\n         * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\r\n         * objects may only be rendered once.\r\n         * @param projectionOptions - Options to be used to create and update the [[Projection]].\r\n         * @returns The [[Projection]] that was created.\r\n         */\r\n        replace: function (element, vnode, projectionOptions) {\r\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n            createDom(vnode, element.parentNode, element, projectionOptions);\r\n            element.parentNode.removeChild(element);\r\n            return createProjection(vnode, projectionOptions);\r\n        }\r\n    };\n\n    /* tslint:disable function-name */\r\n    var toTextVNode = function (data) {\r\n        return {\r\n            vnodeSelector: '',\r\n            properties: undefined,\r\n            children: undefined,\r\n            text: data.toString(),\r\n            domNode: null\r\n        };\r\n    };\r\n    var appendChildren = function (parentSelector, insertions, main) {\r\n        for (var i = 0, length_1 = insertions.length; i < length_1; i++) {\r\n            var item = insertions[i];\r\n            if (Array.isArray(item)) {\r\n                appendChildren(parentSelector, item, main);\r\n            }\r\n            else {\r\n                if (item !== null && item !== undefined && item !== false) {\r\n                    if (typeof item === 'string') {\r\n                        item = toTextVNode(item);\r\n                    }\r\n                    main.push(item);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    function h(selector, properties, children) {\r\n        if (Array.isArray(properties)) {\r\n            children = properties;\r\n            properties = undefined;\r\n        }\r\n        else if ((properties && (typeof properties === 'string' || properties.hasOwnProperty('vnodeSelector'))) ||\r\n            (children && (typeof children === 'string' || children.hasOwnProperty('vnodeSelector')))) {\r\n            throw new Error('h called with invalid arguments');\r\n        }\r\n        var text;\r\n        var flattenedChildren;\r\n        // Recognize a common special case where there is only a single text node\r\n        if (children && children.length === 1 && typeof children[0] === 'string') {\r\n            text = children[0];\r\n        }\r\n        else if (children) {\r\n            flattenedChildren = [];\r\n            appendChildren(selector, children, flattenedChildren);\r\n            if (flattenedChildren.length === 0) {\r\n                flattenedChildren = undefined;\r\n            }\r\n        }\r\n        return {\r\n            vnodeSelector: selector,\r\n            properties: properties,\r\n            children: flattenedChildren,\r\n            text: (text === '') ? undefined : text,\r\n            domNode: null\r\n        };\r\n    }\n\n    var createParentNodePath = function (node, rootNode) {\r\n        var parentNodePath = [];\r\n        while (node !== rootNode) {\r\n            parentNodePath.push(node);\r\n            node = node.parentNode;\r\n        }\r\n        return parentNodePath;\r\n    };\r\n    var find;\r\n    if (Array.prototype.find) {\r\n        find = function (items, predicate) { return items.find(predicate); };\r\n    }\r\n    else {\r\n        find = function (items, predicate) { return items.filter(predicate)[0]; };\r\n    }\r\n    var findVNodeByParentNodePath = function (vnode, parentNodePath) {\r\n        var result = vnode;\r\n        parentNodePath.forEach(function (node) {\r\n            result = (result && result.children) ? find(result.children, function (child) { return child.domNode === node; }) : undefined;\r\n        });\r\n        return result;\r\n    };\r\n    var createEventHandlerInterceptor = function (projector, getProjection, performanceLogger) {\r\n        var modifiedEventHandler = function (evt) {\r\n            performanceLogger('domEvent', evt);\r\n            var projection = getProjection();\r\n            var parentNodePath = createParentNodePath(evt.currentTarget, projection.domNode);\r\n            parentNodePath.reverse();\r\n            var matchingVNode = findVNodeByParentNodePath(projection.getLastRender(), parentNodePath);\r\n            projector.scheduleRender();\r\n            var result;\r\n            if (matchingVNode) {\r\n                /* tslint:disable no-invalid-this */\r\n                result = matchingVNode.properties[\"on\" + evt.type].apply(matchingVNode.properties.bind || this, arguments);\r\n                /* tslint:enable no-invalid-this */\r\n            }\r\n            performanceLogger('domEventProcessed', evt);\r\n            return result;\r\n        };\r\n        return function (propertyName, eventHandler, domNode, properties) { return modifiedEventHandler; };\r\n    };\r\n    /**\r\n     * Creates a [[Projector]] instance using the provided projectionOptions.\r\n     *\r\n     * For more information, see [[Projector]].\r\n     *\r\n     * @param projectorOptions   Options that influence how the DOM is rendered and updated.\r\n     */\r\n    var createProjector = function (projectorOptions) {\r\n        var projector;\r\n        var projectionOptions = applyDefaultProjectionOptions(projectorOptions);\r\n        var performanceLogger = projectionOptions.performanceLogger;\r\n        var renderCompleted = true;\r\n        var scheduled;\r\n        var stopped = false;\r\n        var projections = [];\r\n        var renderFunctions = []; // matches the projections array\r\n        var addProjection = function (\r\n        /* one of: dom.append, dom.insertBefore, dom.replace, dom.merge */\r\n        domFunction, \r\n        /* the parameter of the domFunction */\r\n        node, renderFunction) {\r\n            var projection;\r\n            var getProjection = function () { return projection; };\r\n            projectionOptions.eventHandlerInterceptor = createEventHandlerInterceptor(projector, getProjection, performanceLogger);\r\n            projection = domFunction(node, renderFunction(), projectionOptions);\r\n            projections.push(projection);\r\n            renderFunctions.push(renderFunction);\r\n        };\r\n        var doRender = function () {\r\n            scheduled = undefined;\r\n            if (!renderCompleted) {\r\n                return; // The last render threw an error, it should have been logged in the browser console.\r\n            }\r\n            renderCompleted = false;\r\n            performanceLogger('renderStart', undefined);\r\n            for (var i = 0; i < projections.length; i++) {\r\n                var updatedVnode = renderFunctions[i]();\r\n                performanceLogger('rendered', undefined);\r\n                projections[i].update(updatedVnode);\r\n                performanceLogger('patched', undefined);\r\n            }\r\n            performanceLogger('renderDone', undefined);\r\n            renderCompleted = true;\r\n        };\r\n        projector = {\r\n            renderNow: doRender,\r\n            scheduleRender: function () {\r\n                if (!scheduled && !stopped) {\r\n                    scheduled = requestAnimationFrame(doRender);\r\n                }\r\n            },\r\n            stop: function () {\r\n                if (scheduled) {\r\n                    cancelAnimationFrame(scheduled);\r\n                    scheduled = undefined;\r\n                }\r\n                stopped = true;\r\n            },\r\n            resume: function () {\r\n                stopped = false;\r\n                renderCompleted = true;\r\n                projector.scheduleRender();\r\n            },\r\n            append: function (parentNode, renderFunction) {\r\n                addProjection(dom.append, parentNode, renderFunction);\r\n            },\r\n            insertBefore: function (beforeNode, renderFunction) {\r\n                addProjection(dom.insertBefore, beforeNode, renderFunction);\r\n            },\r\n            merge: function (domNode, renderFunction) {\r\n                addProjection(dom.merge, domNode, renderFunction);\r\n            },\r\n            replace: function (domNode, renderFunction) {\r\n                addProjection(dom.replace, domNode, renderFunction);\r\n            },\r\n            detach: function (renderFunction) {\r\n                for (var i = 0; i < renderFunctions.length; i++) {\r\n                    if (renderFunctions[i] === renderFunction) {\r\n                        renderFunctions.splice(i, 1);\r\n                        return projections.splice(i, 1)[0];\r\n                    }\r\n                }\r\n                throw new Error('renderFunction was not found');\r\n            }\r\n        };\r\n        return projector;\r\n    };\n\n    /**\r\n     * Creates a [[CalculationCache]] object, useful for caching [[VNode]] trees.\r\n     * In practice, caching of [[VNode]] trees is not needed, because achieving 60 frames per second is almost never a problem.\r\n     * For more information, see [[CalculationCache]].\r\n     *\r\n     * @param <Result> The type of the value that is cached.\r\n     */\r\n    var createCache = function () {\r\n        var cachedInputs;\r\n        var cachedOutcome;\r\n        return {\r\n            invalidate: function () {\r\n                cachedOutcome = undefined;\r\n                cachedInputs = undefined;\r\n            },\r\n            result: function (inputs, calculation) {\r\n                if (cachedInputs) {\r\n                    for (var i = 0; i < inputs.length; i++) {\r\n                        if (cachedInputs[i] !== inputs[i]) {\r\n                            cachedOutcome = undefined;\r\n                        }\r\n                    }\r\n                }\r\n                if (!cachedOutcome) {\r\n                    cachedOutcome = calculation();\r\n                    cachedInputs = inputs;\r\n                }\r\n                return cachedOutcome;\r\n            }\r\n        };\r\n    };\n\n    /**\r\n     * Creates a {@link Mapping} instance that keeps an array of result objects synchronized with an array of source objects.\r\n     * See {@link http://maquettejs.org/docs/arrays.html|Working with arrays}.\r\n     *\r\n     * @param <Source>       The type of source items. A database-record for instance.\r\n     * @param <Target>       The type of target items. A [[MaquetteComponent]] for instance.\r\n     * @param getSourceKey   `function(source)` that must return a key to identify each source object. The result must either be a string or a number.\r\n     * @param createResult   `function(source, index)` that must create a new result object from a given source. This function is identical\r\n     *                       to the `callback` argument in `Array.map(callback)`.\r\n     * @param updateResult   `function(source, target, index)` that updates a result to an updated source.\r\n     */\r\n    var createMapping = function (getSourceKey, createResult, updateResult) {\r\n        var keys = [];\r\n        var results = [];\r\n        return {\r\n            results: results,\r\n            map: function (newSources) {\r\n                var newKeys = newSources.map(getSourceKey);\r\n                var oldTargets = results.slice();\r\n                var oldIndex = 0;\r\n                for (var i = 0; i < newSources.length; i++) {\r\n                    var source = newSources[i];\r\n                    var sourceKey = newKeys[i];\r\n                    if (sourceKey === keys[oldIndex]) {\r\n                        results[i] = oldTargets[oldIndex];\r\n                        updateResult(source, oldTargets[oldIndex], i);\r\n                        oldIndex++;\r\n                    }\r\n                    else {\r\n                        var found = false;\r\n                        for (var j = 1; j < keys.length + 1; j++) {\r\n                            var searchIndex = (oldIndex + j) % keys.length;\r\n                            if (keys[searchIndex] === sourceKey) {\r\n                                results[i] = oldTargets[searchIndex];\r\n                                updateResult(newSources[i], oldTargets[searchIndex], i);\r\n                                oldIndex = searchIndex + 1;\r\n                                found = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (!found) {\r\n                            results[i] = createResult(source, i);\r\n                        }\r\n                    }\r\n                }\r\n                results.length = newSources.length;\r\n                keys = newKeys;\r\n            }\r\n        };\r\n    };\n\n    exports.dom = dom;\n    exports.h = h;\n    exports.createProjector = createProjector;\n    exports.createCache = createCache;\n    exports.createMapping = createMapping;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","// Copyright © 2015 Rogier Schouten<github@workingcode.ninja>\n// License: ISC\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar sync_event_1 = require(\"./sync-event\");\n/**\n * Simple synchronous event queue that needs to be drained manually.\n */\nvar EventQueue = /** @class */ (function () {\n    function EventQueue() {\n        /**\n         * SyncEvent triggered after an event is added outside of a flush operation.\n         * @param queue The event queue itself\n         */\n        this.evtFilled = new sync_event_1.SyncEvent();\n        /**\n         * SyncEvent triggered after the queue is flushed empty\n         * @param queue The event queue itself\n         */\n        this.evtDrained = new sync_event_1.SyncEvent();\n        /**\n         * Queued elements\n         */\n        this._queue = [];\n        /**\n         * True while flush() or flushOnce() is running\n         */\n        this._flushing = false;\n    }\n    /**\n     * The module-global event queue\n     */\n    EventQueue.global = function () {\n        if (!EventQueue._instance) {\n            EventQueue.resetGlobal();\n        }\n        return EventQueue._instance;\n    };\n    /**\n     * Testing purposes\n     */\n    EventQueue.resetGlobal = function () {\n        EventQueue._instance = new EventQueue();\n    };\n    /**\n     * Returns true iff the queue is empty\n     */\n    EventQueue.prototype.empty = function () {\n        return this._queue.length === 0;\n    };\n    /**\n     * Add an element to the queue. The handler is called when one of the flush\n     * methods is called.\n     */\n    EventQueue.prototype.add = function (handler) {\n        this._queue.push(handler);\n        if (this._queue.length === 1 && !this._flushing) {\n            this.evtFilled.post(this);\n        }\n    };\n    /**\n     * Calls all handlers currently in the queue. Does not call any handlers added\n     * as a result of the flush\n     */\n    EventQueue.prototype.flushOnce = function () {\n        var empty = (this._queue.length === 0);\n        var flushing = this._flushing;\n        this._flushing = true;\n        try {\n            var queue = this._queue;\n            this._queue = [];\n            for (var i = 0; i < queue.length; ++i) {\n                queue[i]();\n            }\n        }\n        finally {\n            this._flushing = flushing;\n            if (!empty && !flushing && this._queue.length === 0) {\n                this.evtDrained.post(this);\n            }\n        }\n    };\n    /**\n     * Flushes the QueuedEvents, calling all events currently in the queue and those\n     * put into the queue as a result of the flush.\n     * @param maxRounds Optional, default 10. Number of iterations after which to throw an error because\n     *                  the queue keeps filling up. Set to null to disable this.\n     */\n    EventQueue.prototype.flush = function (maxRounds) {\n        if (maxRounds === void 0) { maxRounds = 10; }\n        var empty = (this._queue.length === 0);\n        var flushing = this._flushing;\n        this._flushing = true;\n        try {\n            var i = 0;\n            while (this._queue.length > 0) {\n                if (typeof maxRounds === 'number' && i >= maxRounds) {\n                    this._queue = [];\n                    throw new Error('unable to flush the queue due to recursively added event. Clearing queue now');\n                }\n                this.flushOnce();\n                ++i;\n            }\n        }\n        finally {\n            this._flushing = flushing;\n            if (!empty && !flushing && this._queue.length === 0) {\n                this.evtDrained.post(this);\n            }\n        }\n    };\n    return EventQueue;\n}());\nexports.default = EventQueue;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXZlbnRRdWV1ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvRXZlbnRRdWV1ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2REFBNkQ7QUFDN0QsZUFBZTtBQUVmLFlBQVksQ0FBQzs7QUFFYiwyQ0FBdUM7QUFFdkM7O0dBRUc7QUFDSDtJQUFBO1FBRUk7OztXQUdHO1FBQ0ksY0FBUyxHQUEwQixJQUFJLHNCQUFTLEVBQWMsQ0FBQztRQUN0RTs7O1dBR0c7UUFDSSxlQUFVLEdBQTBCLElBQUksc0JBQVMsRUFBYyxDQUFDO1FBd0J2RTs7V0FFRztRQUNLLFdBQU0sR0FBbUIsRUFBRSxDQUFDO1FBRXBDOztXQUVHO1FBQ0ssY0FBUyxHQUFZLEtBQUssQ0FBQztJQXFFdkMsQ0FBQztJQTlGRzs7T0FFRztJQUNXLGlCQUFNLEdBQXBCO1FBQ0ksSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLEVBQUU7WUFDdkIsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQzVCO1FBQ0QsT0FBTyxVQUFVLENBQUMsU0FBUyxDQUFDO0lBQ2hDLENBQUM7SUFFRDs7T0FFRztJQUNXLHNCQUFXLEdBQXpCO1FBQ0ksVUFBVSxDQUFDLFNBQVMsR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO0lBQzVDLENBQUM7SUFZRDs7T0FFRztJQUNJLDBCQUFLLEdBQVo7UUFDSSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ksd0JBQUcsR0FBVixVQUFXLE9BQW1CO1FBQzFCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzFCLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUM3QyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUM3QjtJQUNMLENBQUM7SUFFRDs7O09BR0c7SUFDSSw4QkFBUyxHQUFoQjtRQUNJLElBQU0sS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDekMsSUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUNoQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUN0QixJQUFJO1lBQ0EsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUMxQixJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztZQUNqQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTtnQkFDbkMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7YUFDZDtTQUNKO2dCQUFTO1lBQ04sSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7WUFDMUIsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7Z0JBQ2pELElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQzlCO1NBQ0o7SUFDTCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSwwQkFBSyxHQUFaLFVBQWEsU0FBc0I7UUFBdEIsMEJBQUEsRUFBQSxjQUFzQjtRQUMvQixJQUFNLEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLElBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDaEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7UUFDdEIsSUFBSTtZQUNBLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNWLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUMzQixJQUFJLE9BQU8sU0FBUyxLQUFLLFFBQVEsSUFBSSxDQUFDLElBQUksU0FBUyxFQUFFO29CQUNqRCxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztvQkFDakIsTUFBTSxJQUFJLEtBQUssQ0FBQyw4RUFBOEUsQ0FBQyxDQUFDO2lCQUNuRztnQkFDRCxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7Z0JBQ2pCLEVBQUUsQ0FBQyxDQUFDO2FBQ1A7U0FDSjtnQkFBUztZQUNOLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO1lBQzFCLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO2dCQUNqRCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUM5QjtTQUNKO0lBQ0wsQ0FBQztJQUNMLGlCQUFDO0FBQUQsQ0FBQyxBQWhIRCxJQWdIQztBQUVELGtCQUFlLFVBQVUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCDCqSAyMDE1IFJvZ2llciBTY2hvdXRlbjxnaXRodWJAd29ya2luZ2NvZGUubmluamE+XHJcbi8vIExpY2Vuc2U6IElTQ1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuaW1wb3J0IHtTeW5jRXZlbnR9IGZyb20gJy4vc3luYy1ldmVudCc7XHJcblxyXG4vKipcclxuICogU2ltcGxlIHN5bmNocm9ub3VzIGV2ZW50IHF1ZXVlIHRoYXQgbmVlZHMgdG8gYmUgZHJhaW5lZCBtYW51YWxseS5cclxuICovXHJcbmNsYXNzIEV2ZW50UXVldWUge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3luY0V2ZW50IHRyaWdnZXJlZCBhZnRlciBhbiBldmVudCBpcyBhZGRlZCBvdXRzaWRlIG9mIGEgZmx1c2ggb3BlcmF0aW9uLlxyXG4gICAgICogQHBhcmFtIHF1ZXVlIFRoZSBldmVudCBxdWV1ZSBpdHNlbGZcclxuICAgICAqL1xyXG4gICAgcHVibGljIGV2dEZpbGxlZDogU3luY0V2ZW50PEV2ZW50UXVldWU+ID0gbmV3IFN5bmNFdmVudDxFdmVudFF1ZXVlPigpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBTeW5jRXZlbnQgdHJpZ2dlcmVkIGFmdGVyIHRoZSBxdWV1ZSBpcyBmbHVzaGVkIGVtcHR5XHJcbiAgICAgKiBAcGFyYW0gcXVldWUgVGhlIGV2ZW50IHF1ZXVlIGl0c2VsZlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZXZ0RHJhaW5lZDogU3luY0V2ZW50PEV2ZW50UXVldWU+ID0gbmV3IFN5bmNFdmVudDxFdmVudFF1ZXVlPigpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1vZHVsZS1nbG9iYWwgZXZlbnQgcXVldWVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBFdmVudFF1ZXVlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1vZHVsZS1nbG9iYWwgZXZlbnQgcXVldWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnbG9iYWwoKTogRXZlbnRRdWV1ZSB7XHJcbiAgICAgICAgaWYgKCFFdmVudFF1ZXVlLl9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBFdmVudFF1ZXVlLnJlc2V0R2xvYmFsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBFdmVudFF1ZXVlLl9pbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlc3RpbmcgcHVycG9zZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZXNldEdsb2JhbCgpOiB2b2lkIHtcclxuICAgICAgICBFdmVudFF1ZXVlLl9pbnN0YW5jZSA9IG5ldyBFdmVudFF1ZXVlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBRdWV1ZWQgZWxlbWVudHNcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfcXVldWU6ICgoKSA9PiB2b2lkKVtdID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcnVlIHdoaWxlIGZsdXNoKCkgb3IgZmx1c2hPbmNlKCkgaXMgcnVubmluZ1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIF9mbHVzaGluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmZiB0aGUgcXVldWUgaXMgZW1wdHlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGVtcHR5KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9xdWV1ZS5sZW5ndGggPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYW4gZWxlbWVudCB0byB0aGUgcXVldWUuIFRoZSBoYW5kbGVyIGlzIGNhbGxlZCB3aGVuIG9uZSBvZiB0aGUgZmx1c2hcclxuICAgICAqIG1ldGhvZHMgaXMgY2FsbGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkKGhhbmRsZXI6ICgpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9xdWV1ZS5wdXNoKGhhbmRsZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLl9xdWV1ZS5sZW5ndGggPT09IDEgJiYgIXRoaXMuX2ZsdXNoaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZ0RmlsbGVkLnBvc3QodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbHMgYWxsIGhhbmRsZXJzIGN1cnJlbnRseSBpbiB0aGUgcXVldWUuIERvZXMgbm90IGNhbGwgYW55IGhhbmRsZXJzIGFkZGVkXHJcbiAgICAgKiBhcyBhIHJlc3VsdCBvZiB0aGUgZmx1c2hcclxuICAgICAqL1xyXG4gICAgcHVibGljIGZsdXNoT25jZSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBlbXB0eSA9ICh0aGlzLl9xdWV1ZS5sZW5ndGggPT09IDApO1xyXG4gICAgICAgIGNvbnN0IGZsdXNoaW5nID0gdGhpcy5fZmx1c2hpbmc7XHJcbiAgICAgICAgdGhpcy5fZmx1c2hpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHF1ZXVlID0gdGhpcy5fcXVldWU7XHJcbiAgICAgICAgICAgIHRoaXMuX3F1ZXVlID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXVlW2ldKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLl9mbHVzaGluZyA9IGZsdXNoaW5nO1xyXG4gICAgICAgICAgICBpZiAoIWVtcHR5ICYmICFmbHVzaGluZyAmJiB0aGlzLl9xdWV1ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZ0RHJhaW5lZC5wb3N0KHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmx1c2hlcyB0aGUgUXVldWVkRXZlbnRzLCBjYWxsaW5nIGFsbCBldmVudHMgY3VycmVudGx5IGluIHRoZSBxdWV1ZSBhbmQgdGhvc2VcclxuICAgICAqIHB1dCBpbnRvIHRoZSBxdWV1ZSBhcyBhIHJlc3VsdCBvZiB0aGUgZmx1c2guXHJcbiAgICAgKiBAcGFyYW0gbWF4Um91bmRzIE9wdGlvbmFsLCBkZWZhdWx0IDEwLiBOdW1iZXIgb2YgaXRlcmF0aW9ucyBhZnRlciB3aGljaCB0byB0aHJvdyBhbiBlcnJvciBiZWNhdXNlXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgIHRoZSBxdWV1ZSBrZWVwcyBmaWxsaW5nIHVwLiBTZXQgdG8gbnVsbCB0byBkaXNhYmxlIHRoaXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmbHVzaChtYXhSb3VuZHM6IG51bWJlciA9IDEwKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZW1wdHkgPSAodGhpcy5fcXVldWUubGVuZ3RoID09PSAwKTtcclxuICAgICAgICBjb25zdCBmbHVzaGluZyA9IHRoaXMuX2ZsdXNoaW5nO1xyXG4gICAgICAgIHRoaXMuX2ZsdXNoaW5nID0gdHJ1ZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlICh0aGlzLl9xdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1heFJvdW5kcyA9PT0gJ251bWJlcicgJiYgaSA+PSBtYXhSb3VuZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9xdWV1ZSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5hYmxlIHRvIGZsdXNoIHRoZSBxdWV1ZSBkdWUgdG8gcmVjdXJzaXZlbHkgYWRkZWQgZXZlbnQuIENsZWFyaW5nIHF1ZXVlIG5vdycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaE9uY2UoKTtcclxuICAgICAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZsdXNoaW5nID0gZmx1c2hpbmc7XHJcbiAgICAgICAgICAgIGlmICghZW1wdHkgJiYgIWZsdXNoaW5nICYmIHRoaXMuX3F1ZXVlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldnREcmFpbmVkLnBvc3QodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEV2ZW50UXVldWU7XHJcbiJdfQ==","// Copyright © 2015 Rogier Schouten<github@workingcode.ninja>\n// License: ISC\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar objects_1 = require(\"./objects\");\nvar sync_event_1 = require(\"./sync-event\");\nvar async_event_1 = require(\"./async-event\");\nvar queued_event_1 = require(\"./queued-event\");\nvar EventType;\n(function (EventType) {\n    EventType[EventType[\"Sync\"] = 0] = \"Sync\";\n    EventType[EventType[\"Async\"] = 1] = \"Async\";\n    EventType[EventType[\"Queued\"] = 2] = \"Queued\";\n})(EventType = exports.EventType || (exports.EventType = {}));\n/**\n * An event that behaves like a Sync/Async/Queued event depending on how\n * you subscribe.\n */\nvar AnyEvent = /** @class */ (function () {\n    function AnyEvent(opts) {\n        /**\n         * Underlying event implementations; one for every attach type + opts combination\n         */\n        this._events = [];\n        if (opts && opts.monitorAttach) {\n            this.evtFirstAttached = new VoidAnyEvent();\n            this.evtLastDetached = new VoidAnyEvent();\n        }\n    }\n    AnyEvent.prototype.attach = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var mode = EventType.Sync;\n        if (args.length > 0 && typeof args[0] === 'number') {\n            mode = args.shift();\n        }\n        var boundTo = this; // add ourselves as default 'boundTo' argument\n        var handler;\n        var opts;\n        var postable;\n        if (typeof args[0] === 'function' || (args[0] && typeof args[0] === 'object' && typeof args[0].post === 'function')) {\n            if (typeof args[0] === 'function') {\n                handler = args[0];\n            }\n            else {\n                postable = args[0];\n            }\n            opts = args[1];\n        }\n        else {\n            boundTo = args[0];\n            handler = args[1];\n            opts = args[2];\n        }\n        this._attach(mode, boundTo, handler, postable, opts, false);\n    };\n    AnyEvent.prototype.once = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var mode = EventType.Sync;\n        if (args.length > 0 && typeof args[0] === 'number') {\n            mode = args.shift();\n        }\n        var boundTo = this; // add ourselves as default 'boundTo' argument\n        var handler;\n        var opts;\n        var postable;\n        if (typeof args[0] === 'function' || (args[0] && typeof args[0] === 'object' && typeof args[0].post === 'function')) {\n            if (typeof args[0] === 'function') {\n                handler = args[0];\n            }\n            else {\n                postable = args[0];\n            }\n            opts = args[1];\n        }\n        else {\n            boundTo = args[0];\n            handler = args[1];\n            opts = args[2];\n        }\n        this._attach(mode, boundTo, handler, postable, opts, true);\n    };\n    AnyEvent.prototype._attach = function (mode, boundTo, handler, postable, opts, once) {\n        var prevCount = (!!this.evtFirstAttached ? this.listenerCount() : 0);\n        var event;\n        switch (mode) {\n            case EventType.Sync:\n                {\n                    for (var _i = 0, _a = this._events; _i < _a.length; _i++) {\n                        var evt = _a[_i];\n                        if (evt instanceof sync_event_1.SyncEvent) {\n                            event = evt;\n                        }\n                    }\n                    if (!event) {\n                        event = new sync_event_1.SyncEvent();\n                        this._events.push(event);\n                    }\n                }\n                break;\n            case EventType.Async:\n                {\n                    for (var _b = 0, _c = this._events; _b < _c.length; _b++) {\n                        var evt = _c[_b];\n                        if (evt instanceof async_event_1.AsyncEvent && objects_1.shallowEquals(evt.options, opts)) {\n                            event = evt;\n                        }\n                    }\n                    if (!event) {\n                        event = new async_event_1.AsyncEvent(opts);\n                        this._events.push(event);\n                    }\n                }\n                break;\n            case EventType.Queued:\n                {\n                    for (var _d = 0, _e = this._events; _d < _e.length; _d++) {\n                        var evt = _e[_d];\n                        if (evt instanceof queued_event_1.QueuedEvent && objects_1.shallowEquals(evt.options, opts)) {\n                            event = evt;\n                        }\n                    }\n                    if (!event) {\n                        event = new queued_event_1.QueuedEvent(opts);\n                        this._events.push(event);\n                    }\n                }\n                break;\n            default:\n                throw new Error('unknown EventType');\n        }\n        if (once) {\n            if (postable) {\n                event.once(postable);\n            }\n            else {\n                event.once(boundTo, handler);\n            }\n        }\n        else {\n            if (postable) {\n                event.attach(postable);\n            }\n            else {\n                event.attach(boundTo, handler);\n            }\n        }\n        if (this.evtFirstAttached && prevCount === 0) {\n            this.evtFirstAttached.post();\n        }\n    };\n    AnyEvent.prototype.attachSync = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        args.unshift(EventType.Sync);\n        this.attach.apply(this, args);\n    };\n    AnyEvent.prototype.onceSync = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        args.unshift(EventType.Sync);\n        this.once.apply(this, args);\n    };\n    AnyEvent.prototype.attachAsync = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        args.unshift(EventType.Async);\n        this.attach.apply(this, args);\n    };\n    AnyEvent.prototype.onceAsync = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        args.unshift(EventType.Async);\n        this.once.apply(this, args);\n    };\n    AnyEvent.prototype.attachQueued = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        args.unshift(EventType.Queued);\n        this.attach.apply(this, args);\n    };\n    AnyEvent.prototype.onceQueued = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        args.unshift(EventType.Queued);\n        this.once.apply(this, args);\n    };\n    /**\n     * Detach event handlers regardless of type\n     */\n    AnyEvent.prototype.detach = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var prevCount = (!!this.evtLastDetached ? this.listenerCount() : 0);\n        for (var i = 0; i < this._events.length; ++i) {\n            this._events[i].detach.apply(this._events[i], args);\n        }\n        if (!!this.evtLastDetached && prevCount > 0 && this.listenerCount() === 0) {\n            this.evtLastDetached.post();\n        }\n    };\n    /**\n     * Post an event to all current listeners\n     */\n    AnyEvent.prototype.post = function (data) {\n        // make a copy of the array first to cover the case where event handlers\n        // are attached during the post\n        var events = [];\n        for (var i = 0; i < this._events.length; ++i) {\n            events.push(this._events[i]);\n        }\n        for (var i = 0; i < events.length; ++i) {\n            events[i].post(data);\n        }\n    };\n    /**\n     * The number of attached listeners\n     */\n    AnyEvent.prototype.listenerCount = function () {\n        var result = 0;\n        for (var i = 0; i < this._events.length; ++i) {\n            result += this._events[i].listenerCount();\n        }\n        return result;\n    };\n    return AnyEvent;\n}());\nexports.AnyEvent = AnyEvent;\n/**\n * Convenience class for AnyEvents without data\n */\nvar VoidAnyEvent = /** @class */ (function (_super) {\n    __extends(VoidAnyEvent, _super);\n    function VoidAnyEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Send the AsyncEvent.\n     */\n    VoidAnyEvent.prototype.post = function () {\n        _super.prototype.post.call(this, undefined);\n    };\n    return VoidAnyEvent;\n}(AnyEvent));\nexports.VoidAnyEvent = VoidAnyEvent;\n/**\n * Similar to 'error' event on EventEmitter: throws when a post() occurs while no handlers set.\n */\nvar ErrorAnyEvent = /** @class */ (function (_super) {\n    __extends(ErrorAnyEvent, _super);\n    function ErrorAnyEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorAnyEvent.prototype.post = function (data) {\n        if (this.listenerCount() === 0) {\n            throw new Error(\"error event posted while no listeners attached. Error: \" + data.message);\n        }\n        _super.prototype.post.call(this, data);\n    };\n    return ErrorAnyEvent;\n}(AnyEvent));\nexports.ErrorAnyEvent = ErrorAnyEvent;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW55LWV2ZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xpYi9hbnktZXZlbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsNkRBQTZEO0FBQzdELGVBQWU7QUFFZixZQUFZLENBQUM7Ozs7Ozs7Ozs7Ozs7OztBQUViLHFDQUF3QztBQUd4QywyQ0FBdUM7QUFDdkMsNkNBQXlEO0FBQ3pELCtDQUE0RDtBQUU1RCxJQUFZLFNBSVg7QUFKRCxXQUFZLFNBQVM7SUFDakIseUNBQUksQ0FBQTtJQUNKLDJDQUFLLENBQUE7SUFDTCw2Q0FBTSxDQUFBO0FBQ1YsQ0FBQyxFQUpXLFNBQVMsR0FBVCxpQkFBUyxLQUFULGlCQUFTLFFBSXBCO0FBU0Q7OztHQUdHO0FBQ0g7SUFrQkksa0JBQVksSUFBbUI7UUFML0I7O1dBRUc7UUFDSyxZQUFPLEdBQW1CLEVBQUUsQ0FBQztRQUdqQyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQzVCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1lBQzNDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztTQUM3QztJQUNMLENBQUM7SUFhTSx5QkFBTSxHQUFiO1FBQWMsY0FBYzthQUFkLFVBQWMsRUFBZCxxQkFBYyxFQUFkLElBQWM7WUFBZCx5QkFBYzs7UUFDeEIsSUFBSSxJQUFJLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQztRQUMxQixJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLFFBQVEsRUFBRTtZQUNoRCxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBZSxDQUFDO1NBQ3BDO1FBQ0QsSUFBSSxPQUFPLEdBQVcsSUFBSSxDQUFDLENBQUMsOENBQThDO1FBQzFFLElBQUksT0FBMEIsQ0FBQztRQUMvQixJQUFJLElBQXNDLENBQUM7UUFDM0Ms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aHQgwqkgMjAxNSBSb2dpZXIgU2Nob3V0ZW48Z2l0aHViQHdvcmtpbmdjb2RlLm5pbmphPlxyXG4vLyBMaWNlbnNlOiBJU0NcclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmltcG9ydCB7c2hhbGxvd0VxdWFsc30gZnJvbSAnLi9vYmplY3RzJztcclxuXHJcbmltcG9ydCB7QmFzZUV2ZW50LCBQb3N0YWJsZSwgTGlzdGVuZXJ9IGZyb20gJy4vYmFzZS1ldmVudCc7XHJcbmltcG9ydCB7U3luY0V2ZW50fSBmcm9tICcuL3N5bmMtZXZlbnQnO1xyXG5pbXBvcnQge0FzeW5jRXZlbnQsIEFzeW5jRXZlbnRPcHRzfSBmcm9tICcuL2FzeW5jLWV2ZW50JztcclxuaW1wb3J0IHtRdWV1ZWRFdmVudCwgUXVldWVkRXZlbnRPcHRzfSBmcm9tICcuL3F1ZXVlZC1ldmVudCc7XHJcblxyXG5leHBvcnQgZW51bSBFdmVudFR5cGUge1xyXG4gICAgU3luYyxcclxuICAgIEFzeW5jLFxyXG4gICAgUXVldWVkXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQW55RXZlbnRPcHRzIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGV2dEZpcnN0QXR0YWNoZWQgYW5kIGV2dExhc3REZXRhY2hlZCBzbyB5b3UgY2FuIG1vbml0b3Igd2hlbiBzb21lb25lIGlzIHN1YnNjcmliZWRcclxuICAgICAqL1xyXG4gICAgbW9uaXRvckF0dGFjaD86IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBbiBldmVudCB0aGF0IGJlaGF2ZXMgbGlrZSBhIFN5bmMvQXN5bmMvUXVldWVkIGV2ZW50IGRlcGVuZGluZyBvbiBob3dcclxuICogeW91IHN1YnNjcmliZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBBbnlFdmVudDxUPiBpbXBsZW1lbnRzIFBvc3RhYmxlPFQ+IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyaWdnZXJlZCB3aGVuZXZlciBzb21lb25lIGF0dGFjaGVzIGFuZCBub2JvZHkgd2FzIGF0dGFjaGVkLlxyXG4gICAgICogTm90ZTogeW91IG11c3QgY2FsbCB0aGUgY29uc3RydWN0b3Igd2l0aCBtb25pdG9yQXR0YWNoIHNldCB0byB0cnVlIHRvIGNyZWF0ZSB0aGlzIGV2ZW50IVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZXZ0Rmlyc3RBdHRhY2hlZDogVm9pZEFueUV2ZW50O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbmV2ZXIgc29tZW9uZSBkZXRhY2hlcyBhbmQgbm9ib2R5IGlzIGF0dGFjaGVkIGFueW1vcmVcclxuICAgICAqIE5vdGU6IHlvdSBtdXN0IGNhbGwgdGhlIGNvbnN0cnVjdG9yIHdpdGggbW9uaXRvckF0dGFjaCBzZXQgdG8gdHJ1ZSB0byBjcmVhdGUgdGhpcyBldmVudCFcclxuICAgICAqL1xyXG4gICAgcHVibGljIGV2dExhc3REZXRhY2hlZDogVm9pZEFueUV2ZW50O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5kZXJseWluZyBldmVudCBpbXBsZW1lbnRhdGlvbnM7IG9uZSBmb3IgZXZlcnkgYXR0YWNoIHR5cGUgKyBvcHRzIGNvbWJpbmF0aW9uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX2V2ZW50czogQmFzZUV2ZW50PFQ+W10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRzPzogQW55RXZlbnRPcHRzKSB7XHJcbiAgICAgICAgaWYgKG9wdHMgJiYgb3B0cy5tb25pdG9yQXR0YWNoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZ0Rmlyc3RBdHRhY2hlZCA9IG5ldyBWb2lkQW55RXZlbnQoKTtcclxuICAgICAgICAgICAgdGhpcy5ldnRMYXN0RGV0YWNoZWQgPSBuZXcgVm9pZEFueUV2ZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTGVnYWN5IG1ldGhvZFxyXG4gICAgICogc2FtZSBhcyBhdHRhY2hTeW5jL2F0dGFjaEFzeW5jL2F0dGFjaFF1ZXVlZDsgYmFzZWQgb24gdGhlIGdpdmVuIGVudW1cclxuICAgICAqIEBwYXJhbSBtb2RlIGRldGVybWluZXMgd2hldGhlciB0byBhdHRhY2ggc3luYy9hc3luYy9xdWV1ZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGF0dGFjaChoYW5kbGVyOiAoZGF0YTogVCkgPT4gdm9pZCwgb3B0cz86IEFzeW5jRXZlbnRPcHRzIHwgUXVldWVkRXZlbnRPcHRzKTogdm9pZDtcclxuICAgIHB1YmxpYyBhdHRhY2goYm91bmRUbzogT2JqZWN0LCBoYW5kbGVyOiAoZGF0YTogVCkgPT4gdm9pZCwgb3B0cz86IEFzeW5jRXZlbnRPcHRzIHwgUXVldWVkRXZlbnRPcHRzKTogdm9pZDtcclxuICAgIHB1YmxpYyBhdHRhY2goZXZlbnQ6IFBvc3RhYmxlPFQ+LCBvcHRzPzogQXN5bmNFdmVudE9wdHMgfCBRdWV1ZWRFdmVudE9wdHMpOiB2b2lkO1xyXG4gICAgcHVibGljIGF0dGFjaChtb2RlOiBFdmVudFR5cGUsIGhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkLCBvcHRzPzogQXN5bmNFdmVudE9wdHMgfCBRdWV1ZWRFdmVudE9wdHMpOiB2b2lkO1xyXG4gICAgcHVibGljIGF0dGFjaChtb2RlOiBFdmVudFR5cGUsIGJvdW5kVG86IE9iamVjdCwgaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQsIG9wdHM/OiBBc3luY0V2ZW50T3B0cyB8IFF1ZXVlZEV2ZW50T3B0cyk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgYXR0YWNoKG1vZGU6IEV2ZW50VHlwZSwgZXZlbnQ6IFBvc3RhYmxlPFQ+LCBvcHRzPzogQXN5bmNFdmVudE9wdHMgfCBRdWV1ZWRFdmVudE9wdHMpOiB2b2lkO1xyXG4gICAgcHVibGljIGF0dGFjaCguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGxldCBtb2RlID0gRXZlbnRUeXBlLlN5bmM7XHJcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCAmJiB0eXBlb2YgYXJnc1swXSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgbW9kZSA9IGFyZ3Muc2hpZnQoKSBhcyBFdmVudFR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBib3VuZFRvOiBPYmplY3QgPSB0aGlzOyAvLyBhZGQgb3Vyc2VsdmVzIGFzIGRlZmF1bHQgJ2JvdW5kVG8nIGFyZ3VtZW50XHJcbiAgICAgICAgbGV0IGhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkO1xyXG4gICAgICAgIGxldCBvcHRzOiBBc3luY0V2ZW50T3B0cyB8IFF1ZXVlZEV2ZW50T3B0cztcclxuICAgICAgICBsZXQgcG9zdGFibGU6IFBvc3RhYmxlPFQ+O1xyXG4gICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Z1bmN0aW9uJyB8fCAoYXJnc1swXSAmJiB0eXBlb2YgYXJnc1swXSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGFyZ3NbMF0ucG9zdCA9PT0gJ2Z1bmN0aW9uJykpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gYXJnc1swXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBvc3RhYmxlID0gYXJnc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcHRzID0gYXJnc1sxXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBib3VuZFRvID0gYXJnc1swXTtcclxuICAgICAgICAgICAgaGFuZGxlciA9IGFyZ3NbMV07XHJcbiAgICAgICAgICAgIG9wdHMgPSBhcmdzWzJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9hdHRhY2gobW9kZSwgYm91bmRUbywgaGFuZGxlciwgcG9zdGFibGUsIG9wdHMsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExlZ2FjeSBtZXRob2RcclxuICAgICAqIHNhbWUgYXMgb25jZVN5bmMvb25jZUFzeW5jL29uY2VRdWV1ZWQ7IGJhc2VkIG9uIHRoZSBnaXZlbiBlbnVtXHJcbiAgICAgKiBAcGFyYW0gbW9kZSBkZXRlcm1pbmVzIHdoZXRoZXIgdG8gb25jZSBzeW5jL2FzeW5jL3F1ZXVlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25jZShoYW5kbGVyOiAoZGF0YTogVCkgPT4gdm9pZCwgb3B0cz86IEFzeW5jRXZlbnRPcHRzIHwgUXVldWVkRXZlbnRPcHRzKTogdm9pZDtcclxuICAgIHB1YmxpYyBvbmNlKGJvdW5kVG86IE9iamVjdCwgaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQsIG9wdHM/OiBBc3luY0V2ZW50T3B0cyB8IFF1ZXVlZEV2ZW50T3B0cyk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgb25jZShldmVudDogUG9zdGFibGU8VD4sIG9wdHM/OiBBc3luY0V2ZW50T3B0cyB8IFF1ZXVlZEV2ZW50T3B0cyk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgb25jZShtb2RlOiBFdmVudFR5cGUsIGhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkLCBvcHRzPzogQXN5bmNFdmVudE9wdHMgfCBRdWV1ZWRFdmVudE9wdHMpOiB2b2lkO1xyXG4gICAgcHVibGljIG9uY2UobW9kZTogRXZlbnRUeXBlLCBib3VuZFRvOiBPYmplY3QsIGhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkLCBvcHRzPzogQXN5bmNFdmVudE9wdHMgfCBRdWV1ZWRFdmVudE9wdHMpOiB2b2lkO1xyXG4gICAgcHVibGljIG9uY2UobW9kZTogRXZlbnRUeXBlLCBldmVudDogUG9zdGFibGU8VD4sIG9wdHM/OiBBc3luY0V2ZW50T3B0cyB8IFF1ZXVlZEV2ZW50T3B0cyk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgb25jZSguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGxldCBtb2RlID0gRXZlbnRUeXBlLlN5bmM7XHJcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCAmJiB0eXBlb2YgYXJnc1swXSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgbW9kZSA9IGFyZ3Muc2hpZnQoKSBhcyBFdmVudFR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBib3VuZFRvOiBPYmplY3QgPSB0aGlzOyAvLyBhZGQgb3Vyc2VsdmVzIGFzIGRlZmF1bHQgJ2JvdW5kVG8nIGFyZ3VtZW50XHJcbiAgICAgICAgbGV0IGhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkO1xyXG4gICAgICAgIGxldCBvcHRzOiBBc3luY0V2ZW50T3B0cyB8IFF1ZXVlZEV2ZW50T3B0cztcclxuICAgICAgICBsZXQgcG9zdGFibGU6IFBvc3RhYmxlPFQ+O1xyXG4gICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Z1bmN0aW9uJyB8fCAoYXJnc1swXSAmJiB0eXBlb2YgYXJnc1swXSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGFyZ3NbMF0ucG9zdCA9PT0gJ2Z1bmN0aW9uJykpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gYXJnc1swXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBvc3RhYmxlID0gYXJnc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcHRzID0gYXJnc1sxXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBib3VuZFRvID0gYXJnc1swXTtcclxuICAgICAgICAgICAgaGFuZGxlciA9IGFyZ3NbMV07XHJcbiAgICAgICAgICAgIG9wdHMgPSBhcmdzWzJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9hdHRhY2gobW9kZSwgYm91bmRUbywgaGFuZGxlciwgcG9zdGFibGUsIG9wdHMsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2F0dGFjaChcclxuICAgICAgICBtb2RlOiBFdmVudFR5cGUsXHJcbiAgICAgICAgYm91bmRUbzogT2JqZWN0IHwgdW5kZWZpbmVkLFxyXG4gICAgICAgIGhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkIHwgdW5kZWZpbmVkLFxyXG4gICAgICAgIHBvc3RhYmxlOiBQb3N0YWJsZTxUPiB8IHVuZGVmaW5lZCxcclxuICAgICAgICBvcHRzOiBBc3luY0V2ZW50T3B0cyB8IFF1ZXVlZEV2ZW50T3B0cyB8IHVuZGVmaW5lZCxcclxuICAgICAgICBvbmNlOiBib29sZWFuXHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBwcmV2Q291bnQgPSAoISF0aGlzLmV2dEZpcnN0QXR0YWNoZWQgPyB0aGlzLmxpc3RlbmVyQ291bnQoKSA6IDApO1xyXG4gICAgICAgIGxldCBldmVudDogQmFzZUV2ZW50PFQ+O1xyXG4gICAgICAgIHN3aXRjaCAobW9kZSkge1xyXG4gICAgICAgICAgICBjYXNlIEV2ZW50VHlwZS5TeW5jOiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV2dCBvZiB0aGlzLl9ldmVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0IGluc3RhbmNlb2YgU3luY0V2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gZXZ0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudCA9IG5ldyBTeW5jRXZlbnQ8VD4oKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHMucHVzaChldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRXZlbnRUeXBlLkFzeW5jOiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV2dCBvZiB0aGlzLl9ldmVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0IGluc3RhbmNlb2YgQXN5bmNFdmVudCAmJiBzaGFsbG93RXF1YWxzKCg8QXN5bmNFdmVudDxUPj5ldnQpLm9wdGlvbnMsIG9wdHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gZXZ0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudCA9IG5ldyBBc3luY0V2ZW50PFQ+KG9wdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50cy5wdXNoKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBFdmVudFR5cGUuUXVldWVkOiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV2dCBvZiB0aGlzLl9ldmVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZ0IGluc3RhbmNlb2YgUXVldWVkRXZlbnQgJiYgc2hhbGxvd0VxdWFscygoPFF1ZXVlZEV2ZW50PFQ+PmV2dCkub3B0aW9ucywgb3B0cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBldnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gbmV3IFF1ZXVlZEV2ZW50PFQ+KG9wdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50cy5wdXNoKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBFdmVudFR5cGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uY2UpIHtcclxuICAgICAgICAgICAgaWYgKHBvc3RhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5vbmNlKHBvc3RhYmxlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50Lm9uY2UoYm91bmRUbywgaGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAocG9zdGFibGUpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LmF0dGFjaChwb3N0YWJsZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5hdHRhY2goYm91bmRUbywgaGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZXZ0Rmlyc3RBdHRhY2hlZCAmJiBwcmV2Q291bnQgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5ldnRGaXJzdEF0dGFjaGVkLnBvc3QoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGF0dGFjaFN5bmMoaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQpOiB2b2lkO1xyXG4gICAgcHVibGljIGF0dGFjaFN5bmMoYm91bmRUbzogT2JqZWN0LCBoYW5kbGVyOiAoZGF0YTogVCkgPT4gdm9pZCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgYXR0YWNoU3luYyhldmVudDogUG9zdGFibGU8VD4pOiB2b2lkO1xyXG4gICAgcHVibGljIGF0dGFjaFN5bmMoLi4uYXJnczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICBhcmdzLnVuc2hpZnQoRXZlbnRUeXBlLlN5bmMpO1xyXG4gICAgICAgIHRoaXMuYXR0YWNoLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbmNlU3luYyhoYW5kbGVyOiAoZGF0YTogVCkgPT4gdm9pZCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgb25jZVN5bmMoYm91bmRUbzogT2JqZWN0LCBoYW5kbGVyOiAoZGF0YTogVCkgPT4gdm9pZCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgb25jZVN5bmMoZXZlbnQ6IFBvc3RhYmxlPFQ+KTogdm9pZDtcclxuICAgIHB1YmxpYyBvbmNlU3luYyguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGFyZ3MudW5zaGlmdChFdmVudFR5cGUuU3luYyk7XHJcbiAgICAgICAgdGhpcy5vbmNlLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhdHRhY2hBc3luYyhoYW5kbGVyOiAoZGF0YTogVCkgPT4gdm9pZCwgb3B0cz86IEFzeW5jRXZlbnRPcHRzKTogdm9pZDtcclxuICAgIHB1YmxpYyBhdHRhY2hBc3luYyhib3VuZFRvOiBPYmplY3QsIGhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkLCBvcHRzPzogQXN5bmNFdmVudE9wdHMpOiB2b2lkO1xyXG4gICAgcHVibGljIGF0dGFjaEFzeW5jKGV2ZW50OiBQb3N0YWJsZTxUPiwgb3B0cz86IEFzeW5jRXZlbnRPcHRzKTogdm9pZDtcclxuICAgIHB1YmxpYyBhdHRhY2hBc3luYyguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGFyZ3MudW5zaGlmdChFdmVudFR5cGUuQXN5bmMpO1xyXG4gICAgICAgIHRoaXMuYXR0YWNoLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbmNlQXN5bmMoaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQsIG9wdHM/OiBBc3luY0V2ZW50T3B0cyk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgb25jZUFzeW5jKGJvdW5kVG86IE9iamVjdCwgaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQsIG9wdHM/OiBBc3luY0V2ZW50T3B0cyk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgb25jZUFzeW5jKGV2ZW50OiBQb3N0YWJsZTxUPiwgb3B0cz86IEFzeW5jRXZlbnRPcHRzKTogdm9pZDtcclxuICAgIHB1YmxpYyBvbmNlQXN5bmMoLi4uYXJnczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICBhcmdzLnVuc2hpZnQoRXZlbnRUeXBlLkFzeW5jKTtcclxuICAgICAgICB0aGlzLm9uY2UuYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGF0dGFjaFF1ZXVlZChoYW5kbGVyOiAoZGF0YTogVCkgPT4gdm9pZCwgb3B0cz86IFF1ZXVlZEV2ZW50T3B0cyk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgYXR0YWNoUXVldWVkKGJvdW5kVG86IE9iamVjdCwgaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQsIG9wdHM/OiBRdWV1ZWRFdmVudE9wdHMpOiB2b2lkO1xyXG4gICAgcHVibGljIGF0dGFjaFF1ZXVlZChldmVudDogUG9zdGFibGU8VD4sIG9wdHM/OiBRdWV1ZWRFdmVudE9wdHMpOiB2b2lkO1xyXG4gICAgcHVibGljIGF0dGFjaFF1ZXVlZCguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGFyZ3MudW5zaGlmdChFdmVudFR5cGUuUXVldWVkKTtcclxuICAgICAgICB0aGlzLmF0dGFjaC5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25jZVF1ZXVlZChoYW5kbGVyOiAoZGF0YTogVCkgPT4gdm9pZCwgb3B0cz86IFF1ZXVlZEV2ZW50T3B0cyk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgb25jZVF1ZXVlZChib3VuZFRvOiBPYmplY3QsIGhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkLCBvcHRzPzogUXVldWVkRXZlbnRPcHRzKTogdm9pZDtcclxuICAgIHB1YmxpYyBvbmNlUXVldWVkKGV2ZW50OiBQb3N0YWJsZTxUPiwgb3B0cz86IFF1ZXVlZEV2ZW50T3B0cyk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgb25jZVF1ZXVlZCguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGFyZ3MudW5zaGlmdChFdmVudFR5cGUuUXVldWVkKTtcclxuICAgICAgICB0aGlzLm9uY2UuYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRldGFjaChoYW5kbGVyOiAoZGF0YTogVCkgPT4gdm9pZCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgZGV0YWNoKGJvdW5kVG86IE9iamVjdCwgaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQpOiB2b2lkO1xyXG4gICAgcHVibGljIGRldGFjaChib3VuZFRvOiBPYmplY3QpOiB2b2lkO1xyXG4gICAgcHVibGljIGRldGFjaChldmVudDogUG9zdGFibGU8VD4pOiB2b2lkO1xyXG4gICAgcHVibGljIGRldGFjaCgpOiB2b2lkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRhY2ggZXZlbnQgaGFuZGxlcnMgcmVnYXJkbGVzcyBvZiB0eXBlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZXRhY2goLi4uYXJnczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBwcmV2Q291bnQgPSAoISF0aGlzLmV2dExhc3REZXRhY2hlZCA/IHRoaXMubGlzdGVuZXJDb3VudCgpIDogMCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9ldmVudHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzW2ldLmRldGFjaC5hcHBseSh0aGlzLl9ldmVudHNbaV0sIGFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISF0aGlzLmV2dExhc3REZXRhY2hlZCAmJiBwcmV2Q291bnQgPiAwICYmIHRoaXMubGlzdGVuZXJDb3VudCgpID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZ0TGFzdERldGFjaGVkLnBvc3QoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQb3N0IGFuIGV2ZW50IHRvIGFsbCBjdXJyZW50IGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9zdChkYXRhOiBUKTogdm9pZCB7XHJcbiAgICAgICAgLy8gbWFrZSBhIGNvcHkgb2YgdGhlIGFycmF5IGZpcnN0IHRvIGNvdmVyIHRoZSBjYXNlIHdoZXJlIGV2ZW50IGhhbmRsZXJzXHJcbiAgICAgICAgLy8gYXJlIGF0dGFjaGVkIGR1cmluZyB0aGUgcG9zdFxyXG4gICAgICAgIGNvbnN0IGV2ZW50czogQmFzZUV2ZW50PFQ+W10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2V2ZW50cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBldmVudHMucHVzaCh0aGlzLl9ldmVudHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBldmVudHNbaV0ucG9zdChkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGF0dGFjaGVkIGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbGlzdGVuZXJDb3VudCgpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fZXZlbnRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCArPSB0aGlzLl9ldmVudHNbaV0ubGlzdGVuZXJDb3VudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ29udmVuaWVuY2UgY2xhc3MgZm9yIEFueUV2ZW50cyB3aXRob3V0IGRhdGFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWb2lkQW55RXZlbnQgZXh0ZW5kcyBBbnlFdmVudDx2b2lkPiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIHRoZSBBc3luY0V2ZW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9zdCgpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5wb3N0KHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaW1pbGFyIHRvICdlcnJvcicgZXZlbnQgb24gRXZlbnRFbWl0dGVyOiB0aHJvd3Mgd2hlbiBhIHBvc3QoKSBvY2N1cnMgd2hpbGUgbm8gaGFuZGxlcnMgc2V0LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEVycm9yQW55RXZlbnQgZXh0ZW5kcyBBbnlFdmVudDxFcnJvcj4ge1xyXG5cclxuICAgIHB1YmxpYyBwb3N0KGRhdGE6IEVycm9yKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJDb3VudCgpID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZXJyb3IgZXZlbnQgcG9zdGVkIHdoaWxlIG5vIGxpc3RlbmVycyBhdHRhY2hlZC4gRXJyb3I6ICR7ZGF0YS5tZXNzYWdlfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlci5wb3N0KGRhdGEpO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==","// Copyright © 2015 Rogier Schouten<github@workingcode.ninja>\n// License: ISC\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_event_1 = require(\"./base-event\");\n/**\n * A-synchronous event. Handlers are called in the next Node.JS cycle.\n * - Optionally condenses multiple post() calls into one (the last post() gets through)\n * - Handlers are called only for events posted after they were attached.\n * - Handlers are not called anymore when they are detached, even if a post() is in progress\n */\nvar AsyncEvent = /** @class */ (function (_super) {\n    __extends(AsyncEvent, _super);\n    /**\n     * Constructor\n     * @param opts Optional. Various settings:\n     *             - condensed: a Boolean indicating whether to condense multiple post() calls within the same cycle.\n     */\n    function AsyncEvent(opts) {\n        var _this = _super.call(this) || this;\n        _this._queued = false;\n        _this.options = opts;\n        var options = opts || {};\n        if (typeof options.condensed === 'boolean') {\n            _this._condensed = options.condensed;\n        }\n        else {\n            _this._condensed = false;\n        }\n        return _this;\n    }\n    /**\n     * The default scheduler uses setImmediate() or setTimeout(..., 0) if setImmediate is not available.\n     */\n    AsyncEvent.defaultScheduler = function (callback) {\n        /* istanbul ignore else  */\n        if (typeof window !== 'undefined') {\n            // browsers don't always support setImmediate()\n            setTimeout(callback, 0);\n        }\n        else {\n            // node.js\n            setImmediate(callback);\n        }\n    };\n    /**\n     * By default, AsyncEvent uses setImmediate() to schedule event handler invocation.\n     * You can change this for e.g. setTimeout(..., 0) by calling this static method once.\n     * @param scheduler A function that takes a callback and executes it in the next Node.JS cycle.\n     */\n    AsyncEvent.setScheduler = function (scheduler) {\n        AsyncEvent._scheduler = scheduler;\n    };\n    AsyncEvent.prototype.post = function () {\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (!this._listeners || this._listeners.length === 0) {\n            return;\n        }\n        if (this._condensed) {\n            this._queuedData = args;\n            this._queuedListeners = this._listeners;\n            if (this._queued) {\n                return;\n            }\n            else {\n                this._queued = true;\n                AsyncEvent._scheduler(function () {\n                    // immediately mark non-queued to allow new AsyncEvent to happen as result\n                    // of calling handlers\n                    _this._queued = false;\n                    // cache listeners and data because they might change while calling event handlers\n                    var data = _this._queuedData;\n                    var listeners = _this._queuedListeners;\n                    for (var i = 0; i < listeners.length; ++i) {\n                        var listener = listeners[i];\n                        _this._call(listener, data);\n                    }\n                });\n            }\n        }\n        else { // not condensed\n            var listeners_1 = this._listeners;\n            AsyncEvent._scheduler(function () {\n                for (var i = 0; i < listeners_1.length; ++i) {\n                    var listener = listeners_1[i];\n                    _this._call(listener, args);\n                }\n            });\n        }\n    };\n    // inherited\n    AsyncEvent.prototype._call = function (listener, args) {\n        // performance optimization: don't use consecutive nodejs cycles\n        // for asyncevents attached to asyncevents\n        if (listener.event && listener.event instanceof AsyncEvent) {\n            listener.event._postDirect(args);\n        }\n        else {\n            _super.prototype._call.call(this, listener, args);\n        }\n    };\n    /**\n     * Performance optimization: if this async signal is attached to another\n     * async signal, we're already a the next cycle and we can call listeners\n     * directly\n     */\n    AsyncEvent.prototype._postDirect = function (args) {\n        if (!this._listeners || this._listeners.length === 0) {\n            return;\n        }\n        // copy a reference to the array because this._listeners might be replaced during\n        // the handler calls\n        var listeners = this._listeners;\n        for (var i = 0; i < listeners.length; ++i) {\n            var listener = listeners[i];\n            this._call(listener, args);\n        }\n    };\n    /**\n     * The current scheduler\n     */\n    AsyncEvent._scheduler = AsyncEvent.defaultScheduler;\n    return AsyncEvent;\n}(base_event_1.BaseEvent));\nexports.AsyncEvent = AsyncEvent;\n/**\n * Convenience class for AsyncEvents without data\n */\nvar VoidAsyncEvent = /** @class */ (function (_super) {\n    __extends(VoidAsyncEvent, _super);\n    function VoidAsyncEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Send the AsyncEvent.\n     */\n    VoidAsyncEvent.prototype.post = function () {\n        _super.prototype.post.call(this, undefined);\n    };\n    return VoidAsyncEvent;\n}(AsyncEvent));\nexports.VoidAsyncEvent = VoidAsyncEvent;\n/**\n * Similar to 'error' event on EventEmitter: throws when a post() occurs while no handlers set.\n */\nvar ErrorAsyncEvent = /** @class */ (function (_super) {\n    __extends(ErrorAsyncEvent, _super);\n    function ErrorAsyncEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorAsyncEvent.prototype.post = function (data) {\n        if (this.listenerCount() === 0) {\n            throw new Error(\"error event posted while no listeners attached. Error: \" + data.message);\n        }\n        _super.prototype.post.call(this, data);\n    };\n    return ErrorAsyncEvent;\n}(AsyncEvent));\nexports.ErrorAsyncEvent = ErrorAsyncEvent;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXN5bmMtZXZlbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbGliL2FzeW5jLWV2ZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZEQUE2RDtBQUM3RCxlQUFlO0FBRWYsWUFBWSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7QUFFYiwyQ0FBMkQ7QUFhM0Q7Ozs7O0dBS0c7QUFDSDtJQUFtQyw4QkFBWTtJQXdDM0M7Ozs7T0FJRztJQUNILG9CQUFZLElBQXFCO1FBQWpDLFlBQ0ksaUJBQU8sU0FRVjtRQTlDTyxhQUFPLEdBQVksS0FBSyxDQUFDO1FBdUM3QixLQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNwQixJQUFNLE9BQU8sR0FBbUIsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUMzQyxJQUFJLE9BQU8sT0FBTyxDQUFDLFNBQVMsS0FBSyxTQUFTLEVBQUU7WUFDeEMsS0FBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDO1NBQ3ZDO2FBQU07WUFDSCxLQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztTQUMzQjs7SUFDTCxDQUFDO0lBMUNEOztPQUVHO0lBQ1csMkJBQWdCLEdBQTlCLFVBQStCLFFBQW9CO1FBQy9DLDJCQUEyQjtRQUMzQixJQUFJLE9BQU8sTUFBTSxLQUFLLFdBQVcsRUFBRTtZQUMvQiwrQ0FBK0M7WUFDL0MsVUFBVSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUMzQjthQUFNO1lBQ0gsVUFBVTtZQUNWLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUMxQjtJQUNMLENBQUM7SUFPRDs7OztPQUlHO0lBQ1csdUJBQVksR0FBMUIsVUFBMkIsU0FBeUM7UUFDaEUsVUFBVSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7SUFDdEMsQ0FBQztJQXNCTSx5QkFBSSxHQUFYO1FBQUEsaUJBaUNDO1FBakNXLGNBQWM7YUFBZCxVQUFjLEVBQWQscUJBQWMsRUFBZCxJQUFj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SDtJQUFvQyxrQ0FBZ0I7SUFBcEQ7O0lBUUEsQ0FBQztJQU5HOztPQUVHO0lBQ0ksNkJBQUksR0FBWDtRQUNJLGlCQUFNLElBQUksWUFBQyxTQUFTLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBQ0wscUJBQUM7QUFBRCxDQUFDLEFBUkQsQ0FBb0MsVUFBVSxHQVE3QztBQVJZLHdDQUFjO0FBVTNCOztHQUVHO0FBQ0g7SUFBcUMsbUNBQWlCO0lBQXREOztJQVFBLENBQUM7SUFOVSw4QkFBSSxHQUFYLFVBQVksSUFBVztRQUNuQixJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUUsS0FBSyxDQUFDLEVBQUU7WUFDNUIsTUFBTSxJQUFJLEtBQUssQ0FBQyw0REFBMEQsSUFBSSxDQUFDLE9BQVMsQ0FBQyxDQUFDO1NBQzdGO1FBQ0QsaUJBQU0sSUFBSSxZQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUFDTCxzQkFBQztBQUFELENBQUMsQUFSRCxDQUFxQyxVQUFVLEdBUTlDO0FBUlksMENBQWUiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgwqkgMjAxNSBSb2dpZXIgU2Nob3V0ZW48Z2l0aHViQHdvcmtpbmdjb2RlLm5pbmphPlxyXG4vLyBMaWNlbnNlOiBJU0NcclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmltcG9ydCB7QmFzZUV2ZW50LCBQb3N0YWJsZSwgTGlzdGVuZXJ9IGZyb20gJy4vYmFzZS1ldmVudCc7XHJcblxyXG4vKipcclxuICogT3B0aW9ucyBmb3IgdGhlIEFzeW5jRXZlbnQgY29uc3RydWN0b3JcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQXN5bmNFdmVudE9wdHMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25kZW5zZSBtdWx0aXBsZSBjYWxscyB0byBwb3N0KCkgaW50byBvbmUgd2hpbGUgdGhlIHByZXZpb3VzIG9uZVxyXG4gICAgICogaGFzIG5vdCBiZWVuIGhhbmRsZWQgeWV0LlxyXG4gICAgICovXHJcbiAgICBjb25kZW5zZWQ/OiBib29sZWFuO1xyXG59XHJcblxyXG4vKipcclxuICogQS1zeW5jaHJvbm91cyBldmVudC4gSGFuZGxlcnMgYXJlIGNhbGxlZCBpbiB0aGUgbmV4dCBOb2RlLkpTIGN5Y2xlLlxyXG4gKiAtIE9wdGlvbmFsbHkgY29uZGVuc2VzIG11bHRpcGxlIHBvc3QoKSBjYWxscyBpbnRvIG9uZSAodGhlIGxhc3QgcG9zdCgpIGdldHMgdGhyb3VnaClcclxuICogLSBIYW5kbGVycyBhcmUgY2FsbGVkIG9ubHkgZm9yIGV2ZW50cyBwb3N0ZWQgYWZ0ZXIgdGhleSB3ZXJlIGF0dGFjaGVkLlxyXG4gKiAtIEhhbmRsZXJzIGFyZSBub3QgY2FsbGVkIGFueW1vcmUgd2hlbiB0aGV5IGFyZSBkZXRhY2hlZCwgZXZlbiBpZiBhIHBvc3QoKSBpcyBpbiBwcm9ncmVzc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEFzeW5jRXZlbnQ8VD4gZXh0ZW5kcyBCYXNlRXZlbnQ8VD4gaW1wbGVtZW50cyBQb3N0YWJsZTxUPiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIGludGVybmFsbHkgLSB0aGUgZXhhY3Qgb3B0aW9ucyBvYmplY3QgZ2l2ZW4gdG8gY29uc3RydWN0b3JcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9wdGlvbnM6IEFzeW5jRXZlbnRPcHRzO1xyXG5cclxuICAgIHByaXZhdGUgX2NvbmRlbnNlZDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX3F1ZXVlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfcXVldWVkTGlzdGVuZXJzOiBMaXN0ZW5lcjxUPltdO1xyXG4gICAgcHJpdmF0ZSBfcXVldWVkRGF0YTogYW55W107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGVmYXVsdCBzY2hlZHVsZXIgdXNlcyBzZXRJbW1lZGlhdGUoKSBvciBzZXRUaW1lb3V0KC4uLiwgMCkgaWYgc2V0SW1tZWRpYXRlIGlzIG5vdCBhdmFpbGFibGUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmYXVsdFNjaGVkdWxlcihjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICAqL1xyXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAvLyBicm93c2VycyBkb24ndCBhbHdheXMgc3VwcG9ydCBzZXRJbW1lZGlhdGUoKVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBub2RlLmpzXHJcbiAgICAgICAgICAgIHNldEltbWVkaWF0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGN1cnJlbnQgc2NoZWR1bGVyXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIF9zY2hlZHVsZXI6IChjYWxsYmFjazogKCkgPT4gdm9pZCkgPT4gdm9pZCA9IEFzeW5jRXZlbnQuZGVmYXVsdFNjaGVkdWxlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ5IGRlZmF1bHQsIEFzeW5jRXZlbnQgdXNlcyBzZXRJbW1lZGlhdGUoKSB0byBzY2hlZHVsZSBldmVudCBoYW5kbGVyIGludm9jYXRpb24uXHJcbiAgICAgKiBZb3UgY2FuIGNoYW5nZSB0aGlzIGZvciBlLmcuIHNldFRpbWVvdXQoLi4uLCAwKSBieSBjYWxsaW5nIHRoaXMgc3RhdGljIG1ldGhvZCBvbmNlLlxyXG4gICAgICogQHBhcmFtIHNjaGVkdWxlciBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjayBhbmQgZXhlY3V0ZXMgaXQgaW4gdGhlIG5leHQgTm9kZS5KUyBjeWNsZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXRTY2hlZHVsZXIoc2NoZWR1bGVyOiAoY2FsbGJhY2s6ICgpID0+IHZvaWQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICBBc3luY0V2ZW50Ll9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIG9wdHMgT3B0aW9uYWwuIFZhcmlvdXMgc2V0dGluZ3M6XHJcbiAgICAgKiAgICAgICAgICAgICAtIGNvbmRlbnNlZDogYSBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0byBjb25kZW5zZSBtdWx0aXBsZSBwb3N0KCkgY2FsbHMgd2l0aGluIHRoZSBzYW1lIGN5Y2xlLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRzPzogQXN5bmNFdmVudE9wdHMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uczogQXN5bmNFdmVudE9wdHMgPSBvcHRzIHx8IHt9O1xyXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jb25kZW5zZWQgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICB0aGlzLl9jb25kZW5zZWQgPSBvcHRpb25zLmNvbmRlbnNlZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9jb25kZW5zZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIHRoZSBBc3luY0V2ZW50LiBIYW5kbGVycyBhcmUgY2FsbGVkIGluIHRoZSBuZXh0IE5vZGUuSlMgY3ljbGUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwb3N0KGRhdGE6IFQpOiB2b2lkO1xyXG4gICAgcHVibGljIHBvc3QoLi4uYXJnczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2xpc3RlbmVycyB8fCB0aGlzLl9saXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbmRlbnNlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9xdWV1ZWREYXRhID0gYXJncztcclxuICAgICAgICAgICAgdGhpcy5fcXVldWVkTGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcXVldWVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9xdWV1ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQXN5bmNFdmVudC5fc2NoZWR1bGVyKCgpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbW1lZGlhdGVseSBtYXJrIG5vbi1xdWV1ZWQgdG8gYWxsb3cgbmV3IEFzeW5jRXZlbnQgdG8gaGFwcGVuIGFzIHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9mIGNhbGxpbmcgaGFuZGxlcnNcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9xdWV1ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjYWNoZSBsaXN0ZW5lcnMgYW5kIGRhdGEgYmVjYXVzZSB0aGV5IG1pZ2h0IGNoYW5nZSB3aGlsZSBjYWxsaW5nIGV2ZW50IGhhbmRsZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX3F1ZXVlZERhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fcXVldWVkTGlzdGVuZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxsKGxpc3RlbmVyLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7IC8vIG5vdCBjb25kZW5zZWRcclxuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xyXG4gICAgICAgICAgICBBc3luY0V2ZW50Ll9zY2hlZHVsZXIoKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxsKGxpc3RlbmVyLCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIGluaGVyaXRlZFxyXG4gICAgcHJvdGVjdGVkIF9jYWxsKGxpc3RlbmVyOiBMaXN0ZW5lcjxUPiwgYXJnczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICAvLyBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb246IGRvbid0IHVzZSBjb25zZWN1dGl2ZSBub2RlanMgY3ljbGVzXHJcbiAgICAgICAgLy8gZm9yIGFzeW5jZXZlbnRzIGF0dGFjaGVkIHRvIGFzeW5jZXZlbnRzXHJcbiAgICAgICAgaWYgKGxpc3RlbmVyLmV2ZW50ICYmIGxpc3RlbmVyLmV2ZW50IGluc3RhbmNlb2YgQXN5bmNFdmVudCkge1xyXG4gICAgICAgICAgICAoPEFzeW5jRXZlbnQ8VD4+bGlzdGVuZXIuZXZlbnQpLl9wb3N0RGlyZWN0KGFyZ3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN1cGVyLl9jYWxsKGxpc3RlbmVyLCBhcmdzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQZXJmb3JtYW5jZSBvcHRpbWl6YXRpb246IGlmIHRoaXMgYXN5bmMgc2lnbmFsIGlzIGF0dGFjaGVkIHRvIGFub3RoZXJcclxuICAgICAqIGFzeW5jIHNpZ25hbCwgd2UncmUgYWxyZWFkeSBhIHRoZSBuZXh0IGN5Y2xlIGFuZCB3ZSBjYW4gY2FsbCBsaXN0ZW5lcnNcclxuICAgICAqIGRpcmVjdGx5XHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBfcG9zdERpcmVjdChhcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5fbGlzdGVuZXJzIHx8IHRoaXMuX2xpc3RlbmVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb3B5IGEgcmVmZXJlbmNlIHRvIHRoZSBhcnJheSBiZWNhdXNlIHRoaXMuX2xpc3RlbmVycyBtaWdodCBiZSByZXBsYWNlZCBkdXJpbmdcclxuICAgICAgICAvLyB0aGUgaGFuZGxlciBjYWxsc1xyXG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTtcclxuICAgICAgICAgICAgdGhpcy5fY2FsbChsaXN0ZW5lciwgYXJncyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ29udmVuaWVuY2UgY2xhc3MgZm9yIEFzeW5jRXZlbnRzIHdpdGhvdXQgZGF0YVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZvaWRBc3luY0V2ZW50IGV4dGVuZHMgQXN5bmNFdmVudDx2b2lkPiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIHRoZSBBc3luY0V2ZW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9zdCgpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5wb3N0KHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaW1pbGFyIHRvICdlcnJvcicgZXZlbnQgb24gRXZlbnRFbWl0dGVyOiB0aHJvd3Mgd2hlbiBhIHBvc3QoKSBvY2N1cnMgd2hpbGUgbm8gaGFuZGxlcnMgc2V0LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEVycm9yQXN5bmNFdmVudCBleHRlbmRzIEFzeW5jRXZlbnQ8RXJyb3I+IHtcclxuXHJcbiAgICBwdWJsaWMgcG9zdChkYXRhOiBFcnJvcik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyQ291bnQoKSA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGVycm9yIGV2ZW50IHBvc3RlZCB3aGlsZSBubyBsaXN0ZW5lcnMgYXR0YWNoZWQuIEVycm9yOiAke2RhdGEubWVzc2FnZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3VwZXIucG9zdChkYXRhKTtcclxuICAgIH1cclxufVxyXG4iXX0=","// Copyright © 2015 Rogier Schouten<github@workingcode.ninja>\n// License: ISC\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Base class for events.\n * Handles attaching and detaching listeners\n */\nvar BaseEvent = /** @class */ (function () {\n    function BaseEvent() {\n    }\n    /**\n     * Attach implementation\n     */\n    BaseEvent.prototype.attach = function (a, b) {\n        this._attach(a, b, false);\n    };\n    /**\n     * Attach implementation\n     */\n    BaseEvent.prototype.once = function (a, b) {\n        this._attach(a, b, true);\n    };\n    /**\n     * Attach / once implementation\n     * @param a\n     * @param b\n     * @param once\n     */\n    BaseEvent.prototype._attach = function (a, b, once) {\n        var boundTo;\n        var handler;\n        var event;\n        if (typeof a === 'function') {\n            handler = a;\n        }\n        else if (!b && typeof a.post === 'function') {\n            event = a;\n        }\n        else {\n            if (typeof a !== 'object') {\n                throw new Error('Expect a function or object as first argument');\n            }\n            if (typeof b !== 'function') {\n                throw new Error('Expect a function as second argument');\n            }\n            boundTo = a;\n            handler = b;\n        }\n        if (!this._listeners) {\n            this._listeners = [];\n        }\n        else {\n            // make a copy of the array so events that are underway have a stable local copy\n            // of the listeners array at the time of post()\n            this._listeners = this._listeners.slice();\n        }\n        this._listeners.push({\n            deleted: false,\n            boundTo: boundTo,\n            handler: handler,\n            event: event,\n            once: once\n        });\n    };\n    /**\n     * Detach implementation. See the overloads for description.\n     */\n    BaseEvent.prototype.detach = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (!this._listeners || this._listeners.length === 0) {\n            return;\n        }\n        var boundTo;\n        var handler;\n        var event;\n        if (args.length >= 1) {\n            if (typeof (args[0]) === 'function') {\n                handler = args[0];\n            }\n            else if (args.length === 1 && typeof args[0].post === 'function') {\n                event = args[0];\n            }\n            else {\n                boundTo = args[0];\n            }\n        }\n        if (args.length >= 2) {\n            handler = args[1];\n        }\n        // remove listeners AND mark them as deleted so subclasses don't send any more events to them\n        this._listeners = this._listeners.filter(function (listener) {\n            if ((typeof handler === 'undefined' || listener.handler === handler)\n                && (typeof event === 'undefined' || listener.event === event)\n                && (typeof boundTo === 'undefined' || listener.boundTo === boundTo)) {\n                listener.deleted = true;\n                return false;\n            }\n            return true;\n        });\n        if (this._listeners.length === 0) {\n            delete this._listeners;\n        }\n    };\n    /**\n     * Abstract post() method to be able to connect any type of event to any other directly\n     * @abstract\n     */\n    BaseEvent.prototype.post = function (data) {\n        throw new Error('abstract');\n    };\n    /**\n     * The number of attached listeners\n     */\n    BaseEvent.prototype.listenerCount = function () {\n        return (this._listeners ? this._listeners.length : 0);\n    };\n    /**\n     * Call the given listener, if it is not marked as 'deleted'\n     * @param listener The listener to call\n     * @param args The arguments to the handler\n     */\n    BaseEvent.prototype._call = function (listener, args) {\n        if (!listener.deleted) {\n            if (listener.once) {\n                // remove listeners AND mark as deleted so subclasses don't send any more events to them\n                listener.deleted = true;\n                this._listeners = this._listeners.filter(function (l) { return l !== listener; });\n                if (this._listeners.length === 0) {\n                    delete this._listeners;\n                }\n            }\n            if (listener.event) {\n                listener.event.post.apply(listener.event, args);\n            }\n            else {\n                listener.handler.apply((typeof listener.boundTo === 'object' ? listener.boundTo : this), args);\n            }\n        }\n    };\n    return BaseEvent;\n}());\nexports.BaseEvent = BaseEvent;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS1ldmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvYmFzZS1ldmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2REFBNkQ7QUFDN0QsZUFBZTtBQUVmLFlBQVksQ0FBQzs7QUFnQ2I7OztHQUdHO0FBQ0g7SUFBQTtJQWdNQSxDQUFDO0lBdktHOztPQUVHO0lBQ0ksMEJBQU0sR0FBYixVQUFjLENBQTZDLEVBQUUsQ0FBcUI7UUFDOUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFrQkQ7O09BRUc7SUFDSSx3QkFBSSxHQUFYLFVBQVksQ0FBNkMsRUFBRSxDQUFxQjtRQUM1RSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0ssMkJBQU8sR0FBZixVQUFnQixDQUE2QyxFQUFFLENBQWtDLEVBQUUsSUFBYTtRQUM1RyxJQUFJLE9BQWUsQ0FBQztRQUNwQixJQUFJLE9BQTBCLENBQUM7UUFDL0IsSUFBSSxLQUFrQixDQUFDO1FBQ3ZCLElBQUksT0FBTyxDQUFDLEtBQUssVUFBVSxFQUFFO1lBQ3pCLE9BQU8sR0FBRyxDQUF3QixDQUFDO1NBQ3RDO2FBQU0sSUFBSSxDQUFDLENBQUMsSUFBSSxPQUFRLENBQWlCLENBQUMsSUFBSSxLQUFLLFVBQVUsRUFBRTtZQUM1RCxLQUFLLEdBQUcsQ0FBZ0IsQ0FBQztTQUM1QjthQUFNO1lBQ0gsSUFBSSxPQUFPLENBQUMsS0FBSyxRQUFRLEVBQUU7Z0JBQ3ZCLE1BQU0sSUFBSSxLQUFLLENBQUMsK0NBQStDLENBQUMsQ0FBQzthQUNwRTtZQUNELElBQUksT0FBTyxDQUFDLEtBQUssVUFBVSxFQUFFO2dCQUN6QixNQUFNLElBQUksS0FBSyxDQUFDLHNDQUFzQyxDQUFDLENBQUM7YUFDM0Q7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QixFQUFFLElBQVc7UUFDOUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUU7WUFDbkIsSUFBSSxRQUFRLENBQUMsSUFBSSxFQUFFO2dCQUNmLHdGQUF3RjtnQkFDeEYsUUFBUSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7Z0JBQ3hCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsVUFBQyxDQUFjLElBQWMsT0FBQSxDQUFDLEtBQUssUUFBUSxFQUFkLENBQWMsQ0FBQyxDQUFDO2dCQUN0RixJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtvQkFDOUIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO2lCQUMxQjthQUNKO1lBQ0QsSUFBSSxRQUFRLENBQUMsS0FBSyxFQUFFO2dCQUNoQixRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQzthQUNuRDtpQkFBTTtnQkFDSCxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sUUFBUSxDQUFDLE9BQU8sS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO2FBQ2xHO1NBQ0o7SUFDTCxDQUFDO0lBRUwsZ0JBQUM7QUFBRCxDQUFDLEFBaE1ELElBZ01DO0FBaE1ZLDhCQUFTIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IMKpIDIwMTUgUm9naWVyIFNjaG91dGVuPGdpdGh1YkB3b3JraW5nY29kZS5uaW5qYT5cclxuLy8gTGljZW5zZTogSVNDXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBvc3RhYmxlPFQ+IHtcclxuICAgIHBvc3QoZGF0YTogVCk6IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbnRlcm5hbCBpbnRlcmZhY2UgYmV0d2VlbiBCYXNlRXZlbnQgYW5kIGl0cyBzdWJjbGFzc2VzXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIExpc3RlbmVyPFQ+IHtcclxuICAgIC8qKlxyXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIGxpc3RlbmVyIHdhcyBkZXRhY2hlZFxyXG4gICAgICovXHJcbiAgICBkZWxldGVkOiBib29sZWFuO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaGFuZGxlclxyXG4gICAgICovXHJcbiAgICBoYW5kbGVyPzogKGRhdGE6IFQpID0+IHZvaWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0aGlzIHBvaW50ZXIgZm9yIHRoZSBoYW5kbGVyXHJcbiAgICAgKi9cclxuICAgIGJvdW5kVG8/OiBPYmplY3Q7XHJcbiAgICAvKipcclxuICAgICAqIEluc3RlYWQgb2YgYSBoYW5kbGVyLCBhbiBhdHRhY2hlZCBldmVudFxyXG4gICAgICovXHJcbiAgICBldmVudD86IFBvc3RhYmxlPFQ+O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYWZ0ZXIgZmlyc3QgY2FsbD9cclxuICAgICAqL1xyXG4gICAgb25jZTogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJhc2UgY2xhc3MgZm9yIGV2ZW50cy5cclxuICogSGFuZGxlcyBhdHRhY2hpbmcgYW5kIGRldGFjaGluZyBsaXN0ZW5lcnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBCYXNlRXZlbnQ8VD4gaW1wbGVtZW50cyBQb3N0YWJsZTxUPiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRhY2hlZCBsaXN0ZW5lcnMuIE5PVEU6IGRvIG5vdCBtb2RpZnkuXHJcbiAgICAgKiBJbnN0ZWFkLCByZXBsYWNlIHdpdGggYSBuZXcgYXJyYXkgd2l0aCBwb3NzaWJseSB0aGUgc2FtZSBlbGVtZW50cy4gVGhpcyBlbnN1cmVzXHJcbiAgICAgKiB0aGF0IGFueSByZWZlcmVuY2VzIHRvIHRoZSBhcnJheSBieSBldmVudHMgdGhhdCBhcmUgdW5kZXJ3YXkgcmVtYWluIHRoZSBzYW1lLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX2xpc3RlbmVyczogTGlzdGVuZXI8VD5bXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEF0dGFjaCBhbiBldmVudCBoYW5kbGVyXHJcbiAgICAgKiBAcGFyYW0gaGFuZGxlciBUaGUgZnVuY3Rpb24gdG8gY2FsbC4gVGhlIHRoaXMgYXJndW1lbnQgb2YgdGhlIGZ1bmN0aW9uIHdpbGwgYmUgdGhpcyBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhdHRhY2goaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQpOiB2b2lkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRhY2ggYW4gZXZlbnQgaGFuZGxlclxyXG4gICAgICogQHBhcmFtIGJvdW5kVG8gVGhlIHRoaXMgYXJndW1lbnQgb2YgdGhlIGhhbmRsZXJcclxuICAgICAqIEBwYXJhbSBoYW5kbGVyIFRoZSBmdW5jdGlvbiB0byBjYWxsLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXR0YWNoKGJvdW5kVG86IE9iamVjdCwgaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQpOiB2b2lkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRhY2ggYW4gZXZlbnQgZGlyZWN0bHlcclxuICAgICAqIEBwYXJhbSBldmVudCBUaGUgZXZlbnQgdG8gYmUgcG9zdGVkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhdHRhY2goZXZlbnQ6IFBvc3RhYmxlPFQ+KTogdm9pZDtcclxuICAgIC8qKlxyXG4gICAgICogQXR0YWNoIGltcGxlbWVudGF0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhdHRhY2goYTogKChkYXRhOiBUKSA9PiB2b2lkKSB8IE9iamVjdCB8IFBvc3RhYmxlPFQ+LCBiPzogKGRhdGE6IFQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9hdHRhY2goYSwgYiwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXR0YWNoIGFuIGV2ZW50IGhhbmRsZXIgd2hpY2ggYXV0b21hdGljYWxseSBnZXRzIHJlbW92ZWQgYWZ0ZXIgdGhlIGZpcnN0IGNhbGxcclxuICAgICAqIEBwYXJhbSBoYW5kbGVyIFRoZSBmdW5jdGlvbiB0byBjYWxsLiBUaGUgdGhpcyBhcmd1bWVudCBvZiB0aGUgZnVuY3Rpb24gd2lsbCBiZSB0aGlzIG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIG9uY2UoaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQpOiB2b2lkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRhY2ggYW4gZXZlbnQgaGFuZGxlciB3aGljaCBhdXRvbWF0aWNhbGx5IGdldHMgcmVtb3ZlZCBhZnRlciB0aGUgZmlyc3QgY2FsbFxyXG4gICAgICogQHBhcmFtIGJvdW5kVG8gVGhlIHRoaXMgYXJndW1lbnQgb2YgdGhlIGhhbmRsZXJcclxuICAgICAqIEBwYXJhbSBoYW5kbGVyIFRoZSBmdW5jdGlvbiB0byBjYWxsLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25jZShib3VuZFRvOiBPYmplY3QsIGhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkKTogdm9pZDtcclxuICAgIC8qKlxyXG4gICAgICogQXR0YWNoIGFuIGV2ZW50IGRpcmVjdGx5IGFuZCBkZS1hdHRhY2ggYWZ0ZXIgdGhlIGZpcnN0IGNhbGxcclxuICAgICAqIEBwYXJhbSBldmVudCBUaGUgZXZlbnQgdG8gYmUgcG9zdGVkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBvbmNlKGV2ZW50OiBQb3N0YWJsZTxUPik6IHZvaWQ7XHJcbiAgICAvKipcclxuICAgICAqIEF0dGFjaCBpbXBsZW1lbnRhdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgb25jZShhOiAoKGRhdGE6IFQpID0+IHZvaWQpIHwgT2JqZWN0IHwgUG9zdGFibGU8VD4sIGI/OiAoZGF0YTogVCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2F0dGFjaChhLCBiLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEF0dGFjaCAvIG9uY2UgaW1wbGVtZW50YXRpb25cclxuICAgICAqIEBwYXJhbSBhXHJcbiAgICAgKiBAcGFyYW0gYlxyXG4gICAgICogQHBhcmFtIG9uY2VcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfYXR0YWNoKGE6ICgoZGF0YTogVCkgPT4gdm9pZCkgfCBPYmplY3QgfCBQb3N0YWJsZTxUPiwgYjogKChkYXRhOiBUKSA9PiB2b2lkKSB8IHVuZGVmaW5lZCwgb25jZTogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGxldCBib3VuZFRvOiBPYmplY3Q7XHJcbiAgICAgICAgbGV0IGhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkO1xyXG4gICAgICAgIGxldCBldmVudDogUG9zdGFibGU8VD47XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXIgPSBhIGFzICgoZGF0YTogVCkgPT4gdm9pZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICghYiAmJiB0eXBlb2YgKGEgYXMgUG9zdGFibGU8VD4pLnBvc3QgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgZXZlbnQgPSBhIGFzIFBvc3RhYmxlPFQ+O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYSAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0IGEgZnVuY3Rpb24gb3Igb2JqZWN0IGFzIGZpcnN0IGFyZ3VtZW50Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBiICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdCBhIGZ1bmN0aW9uIGFzIHNlY29uZCBhcmd1bWVudCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJvdW5kVG8gPSBhO1xyXG4gICAgICAgICAgICBoYW5kbGVyID0gYjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLl9saXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0gW107XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gbWFrZSBhIGNvcHkgb2YgdGhlIGFycmF5IHNvIGV2ZW50cyB0aGF0IGFyZSB1bmRlcndheSBoYXZlIGEgc3RhYmxlIGxvY2FsIGNvcHlcclxuICAgICAgICAgICAgLy8gb2YgdGhlIGxpc3RlbmVycyBhcnJheSBhdCB0aGUgdGltZSBvZiBwb3N0KClcclxuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLnNsaWNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKHtcclxuICAgICAgICAgICAgZGVsZXRlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGJvdW5kVG8sXHJcbiAgICAgICAgICAgIGhhbmRsZXIsXHJcbiAgICAgICAgICAgIGV2ZW50LFxyXG4gICAgICAgICAgICBvbmNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRhY2ggYWxsIGxpc3RlbmVycyB3aXRoIHRoZSBnaXZlbiBoYW5kbGVyIGZ1bmN0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZXRhY2goaGFuZGxlcjogKGRhdGE6IFQpID0+IHZvaWQpOiB2b2lkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRhY2ggYWxsIGxpc3RlbmVycyB3aXRoIHRoZSBnaXZlbiBoYW5kbGVyIGZ1bmN0aW9uIGFuZCBib3VuZFRvIG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRldGFjaChib3VuZFRvOiBPYmplY3QsIGhhbmRsZXI6IChkYXRhOiBUKSA9PiB2b2lkKTogdm9pZDtcclxuICAgIC8qKlxyXG4gICAgICogRGV0YWNoIGFsbCBsaXN0ZW5lcnMgdGhhdCB3ZXJlIGF0dGFjaGVkIHdpdGggdGhlIGdpdmVuIGJvdW5kVG8gb2JqZWN0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGV0YWNoKGJvdW5kVG86IE9iamVjdCk6IHZvaWQ7XHJcbiAgICAvKipcclxuICAgICAqIERldGFjaCB0aGUgZ2l2ZW4gZXZlbnQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZXRhY2goZXZlbnQ6IFBvc3RhYmxlPFQ+KTogdm9pZDtcclxuICAgIC8qKlxyXG4gICAgICogRGV0YWNoIGFsbCBsaXN0ZW5lcnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRldGFjaCgpOiB2b2lkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRhY2ggaW1wbGVtZW50YXRpb24uIFNlZSB0aGUgb3ZlcmxvYWRzIGZvciBkZXNjcmlwdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRldGFjaCguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5fbGlzdGVuZXJzIHx8IHRoaXMuX2xpc3RlbmVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYm91bmRUbzogT2JqZWN0O1xyXG4gICAgICAgIGxldCBoYW5kbGVyOiAoZGF0YTogVCkgPT4gdm9pZDtcclxuICAgICAgICBsZXQgZXZlbnQ6IFBvc3RhYmxlPFQ+O1xyXG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGFyZ3NbMF0pID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gYXJnc1swXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgYXJnc1swXS5wb3N0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudCA9IGFyZ3NbMF07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBib3VuZFRvID0gYXJnc1swXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJncy5sZW5ndGggPj0gMikge1xyXG4gICAgICAgICAgICBoYW5kbGVyID0gYXJnc1sxXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHJlbW92ZSBsaXN0ZW5lcnMgQU5EIG1hcmsgdGhlbSBhcyBkZWxldGVkIHNvIHN1YmNsYXNzZXMgZG9uJ3Qgc2VuZCBhbnkgbW9yZSBldmVudHMgdG8gdGhlbVxyXG4gICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycy5maWx0ZXIoKGxpc3RlbmVyOiBMaXN0ZW5lcjxUPik6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgICAgICBpZiAoKHR5cGVvZiBoYW5kbGVyID09PSAndW5kZWZpbmVkJyB8fCBsaXN0ZW5lci5oYW5kbGVyID09PSBoYW5kbGVyKVxyXG4gICAgICAgICAgICAgICAgJiYgKHR5cGVvZiBldmVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgbGlzdGVuZXIuZXZlbnQgPT09IGV2ZW50KVxyXG4gICAgICAgICAgICAgICAgJiYgKHR5cGVvZiBib3VuZFRvID09PSAndW5kZWZpbmVkJyB8fCBsaXN0ZW5lci5ib3VuZFRvID09PSBib3VuZFRvKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuZGVsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9saXN0ZW5lcnM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWJzdHJhY3QgcG9zdCgpIG1ldGhvZCB0byBiZSBhYmxlIHRvIGNvbm5lY3QgYW55IHR5cGUgb2YgZXZlbnQgdG8gYW55IG90aGVyIGRpcmVjdGx5XHJcbiAgICAgKiBAYWJzdHJhY3RcclxuICAgICAqL1xyXG4gICAgcHVibGljIHBvc3QoZGF0YTogVCk6IHZvaWQge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignYWJzdHJhY3QnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBudW1iZXIgb2YgYXR0YWNoZWQgbGlzdGVuZXJzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBsaXN0ZW5lckNvdW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl9saXN0ZW5lcnMgPyB0aGlzLl9saXN0ZW5lcnMubGVuZ3RoIDogMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsIHRoZSBnaXZlbiBsaXN0ZW5lciwgaWYgaXQgaXMgbm90IG1hcmtlZCBhcyAnZGVsZXRlZCdcclxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gY2FsbFxyXG4gICAgICogQHBhcmFtIGFyZ3MgVGhlIGFyZ3VtZW50cyB0byB0aGUgaGFuZGxlclxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgX2NhbGwobGlzdGVuZXI6IExpc3RlbmVyPFQ+LCBhcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghbGlzdGVuZXIuZGVsZXRlZCkge1xyXG4gICAgICAgICAgICBpZiAobGlzdGVuZXIub25jZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGxpc3RlbmVycyBBTkQgbWFyayBhcyBkZWxldGVkIHNvIHN1YmNsYXNzZXMgZG9uJ3Qgc2VuZCBhbnkgbW9yZSBldmVudHMgdG8gdGhlbVxyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuZGVsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnMuZmlsdGVyKChsOiBMaXN0ZW5lcjxUPik6IGJvb2xlYW4gPT4gbCAhPT0gbGlzdGVuZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fbGlzdGVuZXJzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lci5ldmVudCkge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuZXZlbnQucG9zdC5hcHBseShsaXN0ZW5lci5ldmVudCwgYXJncyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5oYW5kbGVyLmFwcGx5KCh0eXBlb2YgbGlzdGVuZXIuYm91bmRUbyA9PT0gJ29iamVjdCcgPyBsaXN0ZW5lci5ib3VuZFRvIDogdGhpcyksIGFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG4iXX0=","// Copyright © 2015 Rogier Schouten<github@workingcode.ninja>\n// License: ISC\n'use strict';\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./base-event\"));\n__export(require(\"./sync-event\"));\n__export(require(\"./queued-event\"));\n__export(require(\"./async-event\"));\n__export(require(\"./any-event\"));\nvar EventQueue_1 = require(\"./EventQueue\");\nvar EventQueue_2 = require(\"./EventQueue\");\nexports.EventQueue = EventQueue_2.default;\n/**\n * The global event queue for QueuedEvents\n */\nfunction queue() {\n    return EventQueue_1.default.global();\n}\nexports.queue = queue;\n/**\n * Convenience function, same as EventQueue.global().flushOnce().\n * Flushes the QueuedEvents, calling all events currently in the queue but not\n * any events put into the queue as a result of the flush.\n */\nfunction flushOnce() {\n    EventQueue_1.default.global().flushOnce();\n}\nexports.flushOnce = flushOnce;\n/**\n * Convenience function, same as EventQueue.global().flush().\n * Flushes the QueuedEvents, calling all handlers currently in the queue and those\n * put into the queue as a result of the flush.\n * @param maxRounds Optional, default 10. Number of iterations after which to throw an error because\n *                  the queue keeps filling up. Set to undefined or null to disable this.\n */\nfunction flush(maxRounds) {\n    if (maxRounds === void 0) { maxRounds = 10; }\n    EventQueue_1.default.global().flush(maxRounds);\n}\nexports.flush = flush;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbGliL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZEQUE2RDtBQUM3RCxlQUFlO0FBRWYsWUFBWSxDQUFDOzs7OztBQUViLGtDQUE2QjtBQUM3QixrQ0FBNkI7QUFDN0Isb0NBQStCO0FBQy9CLG1DQUE4QjtBQUM5QixpQ0FBNEI7QUFFNUIsMkNBQW1EO0FBQ25ELDJDQUFtRDtBQUEzQyxrQ0FBQSxPQUFPLENBQWM7QUFFN0I7O0dBRUc7QUFDSCxTQUFnQixLQUFLO0lBQ2pCLE9BQU8sb0JBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMvQixDQUFDO0FBRkQsc0JBRUM7QUFFRDs7OztHQUlHO0FBQ0gsU0FBZ0IsU0FBUztJQUNyQixvQkFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQ3BDLENBQUM7QUFGRCw4QkFFQztBQUVEOzs7Ozs7R0FNRztBQUNILFNBQWdCLEtBQUssQ0FBQyxTQUFzQjtJQUF0QiwwQkFBQSxFQUFBLGNBQXNCO0lBQ3hDLG9CQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3pDLENBQUM7QUFGRCxzQkFFQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCDCqSAyMDE1IFJvZ2llciBTY2hvdXRlbjxnaXRodWJAd29ya2luZ2NvZGUubmluamE+XHJcbi8vIExpY2Vuc2U6IElTQ1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuZXhwb3J0ICogZnJvbSAnLi9iYXNlLWV2ZW50JztcclxuZXhwb3J0ICogZnJvbSAnLi9zeW5jLWV2ZW50JztcclxuZXhwb3J0ICogZnJvbSAnLi9xdWV1ZWQtZXZlbnQnO1xyXG5leHBvcnQgKiBmcm9tICcuL2FzeW5jLWV2ZW50JztcclxuZXhwb3J0ICogZnJvbSAnLi9hbnktZXZlbnQnO1xyXG5cclxuaW1wb3J0IHtkZWZhdWx0IGFzIEV2ZW50UXVldWV9IGZyb20gJy4vRXZlbnRRdWV1ZSc7XHJcbmV4cG9ydCB7ZGVmYXVsdCBhcyBFdmVudFF1ZXVlfSBmcm9tICcuL0V2ZW50UXVldWUnO1xyXG5cclxuLyoqXHJcbiAqIFRoZSBnbG9iYWwgZXZlbnQgcXVldWUgZm9yIFF1ZXVlZEV2ZW50c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHF1ZXVlKCk6IEV2ZW50UXVldWUge1xyXG4gICAgcmV0dXJuIEV2ZW50UXVldWUuZ2xvYmFsKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZW5pZW5jZSBmdW5jdGlvbiwgc2FtZSBhcyBFdmVudFF1ZXVlLmdsb2JhbCgpLmZsdXNoT25jZSgpLlxyXG4gKiBGbHVzaGVzIHRoZSBRdWV1ZWRFdmVudHMsIGNhbGxpbmcgYWxsIGV2ZW50cyBjdXJyZW50bHkgaW4gdGhlIHF1ZXVlIGJ1dCBub3RcclxuICogYW55IGV2ZW50cyBwdXQgaW50byB0aGUgcXVldWUgYXMgYSByZXN1bHQgb2YgdGhlIGZsdXNoLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZsdXNoT25jZSgpOiB2b2lkIHtcclxuICAgIEV2ZW50UXVldWUuZ2xvYmFsKCkuZmx1c2hPbmNlKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZW5pZW5jZSBmdW5jdGlvbiwgc2FtZSBhcyBFdmVudFF1ZXVlLmdsb2JhbCgpLmZsdXNoKCkuXHJcbiAqIEZsdXNoZXMgdGhlIFF1ZXVlZEV2ZW50cywgY2FsbGluZyBhbGwgaGFuZGxlcnMgY3VycmVudGx5IGluIHRoZSBxdWV1ZSBhbmQgdGhvc2VcclxuICogcHV0IGludG8gdGhlIHF1ZXVlIGFzIGEgcmVzdWx0IG9mIHRoZSBmbHVzaC5cclxuICogQHBhcmFtIG1heFJvdW5kcyBPcHRpb25hbCwgZGVmYXVsdCAxMC4gTnVtYmVyIG9mIGl0ZXJhdGlvbnMgYWZ0ZXIgd2hpY2ggdG8gdGhyb3cgYW4gZXJyb3IgYmVjYXVzZVxyXG4gKiAgICAgICAgICAgICAgICAgIHRoZSBxdWV1ZSBrZWVwcyBmaWxsaW5nIHVwLiBTZXQgdG8gdW5kZWZpbmVkIG9yIG51bGwgdG8gZGlzYWJsZSB0aGlzLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZsdXNoKG1heFJvdW5kczogbnVtYmVyID0gMTApOiB2b2lkIHtcclxuICAgIEV2ZW50UXVldWUuZ2xvYmFsKCkuZmx1c2gobWF4Um91bmRzKTtcclxufVxyXG4iXX0=","// Copyright © 2015 Rogier Schouten<github@workingcode.ninja>\n// License: ISC\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction shallowEquals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (typeof a !== typeof b) {\n        return false;\n    }\n    switch (typeof a) {\n        case 'boolean':\n        case 'number':\n        case 'string':\n        case 'function':\n        case 'symbol':\n        case 'undefined':\n            // already did === compare\n            return false;\n        case 'object':\n            if (a === null || b === null) {\n                return false; // already compared ===\n            }\n            if (Array.isArray(a) || Array.isArray(b)) {\n                if (!Array.isArray(a) || !Array.isArray(b)) {\n                    return false;\n                }\n                if (a.length !== b.length) {\n                    return false;\n                }\n                for (var i = 0; i < a.length; ++i) {\n                    if (a[i] !== b[i]) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n            var namesA = [];\n            var namesB = [];\n            for (var name_1 in a) {\n                if (a.hasOwnProperty(name_1)) {\n                    namesA.push(name_1);\n                }\n            }\n            for (var name_2 in b) {\n                if (b.hasOwnProperty(name_2)) {\n                    namesB.push(name_2);\n                }\n            }\n            namesA.sort();\n            namesB.sort();\n            if (namesA.join(',') !== namesB.join(',')) {\n                return false;\n            }\n            for (var i = 0; i < namesA.length; ++i) {\n                if (a[namesA[i]] !== b[namesA[i]]) {\n                    return false;\n                }\n            }\n            return true;\n        default:\n            return false;\n    }\n}\nexports.shallowEquals = shallowEquals;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2JqZWN0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvb2JqZWN0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2REFBNkQ7QUFDN0QsZUFBZTtBQUVmLFlBQVksQ0FBQzs7QUFFYixTQUFnQixhQUFhLENBQUMsQ0FBTSxFQUFFLENBQU07SUFDeEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ1QsT0FBTyxJQUFJLENBQUM7S0FDZjtJQUNELElBQUksT0FBTyxDQUFDLEtBQUssT0FBTyxDQUFDLEVBQUU7UUFDdkIsT0FBTyxLQUFLLENBQUM7S0FDaEI7SUFDRCxRQUFRLE9BQU8sQ0FBQyxFQUFFO1FBQ2QsS0FBSyxTQUFTLENBQUM7UUFDZixLQUFLLFFBQVEsQ0FBQztRQUNkLEtBQUssUUFBUSxDQUFDO1FBQ2QsS0FBSyxVQUFVLENBQUM7UUFDaEIsS0FBSyxRQUFRLENBQUM7UUFDZCxLQUFLLFdBQVc7WUFDWiwwQkFBMEI7WUFDMUIsT0FBTyxLQUFLLENBQUM7UUFDakIsS0FBSyxRQUFRO1lBQ1QsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLEVBQUU7Z0JBQzFCLE9BQU8sS0FBSyxDQUFDLENBQUMsdUJBQXVCO2FBQ3hDO1lBQ0QsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3RDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtvQkFDeEMsT0FBTyxLQUFLLENBQUM7aUJBQ2hCO2dCQUNELElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFO29CQUN2QixPQUFPLEtBQUssQ0FBQztpQkFDaEI7Z0JBQ0QsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUU7b0JBQy9CLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTt3QkFDZixPQUFPLEtBQUssQ0FBQztxQkFDaEI7aUJBQ0o7Z0JBQ0QsT0FBTyxJQUFJLENBQUM7YUFDZjtZQUNELElBQU0sTUFBTSxHQUFhLEVBQUUsQ0FBQztZQUM1QixJQUFNLE1BQU0sR0FBYSxFQUFFLENBQUM7WUFDNUIsS0FBSyxJQUFNLE1BQUksSUFBSSxDQUFDLEVBQUU7Z0JBQ2xCLElBQUksQ0FBQyxDQUFDLGNBQWMsQ0FBQyxNQUFJLENBQUMsRUFBRTtvQkFDeEIsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFJLENBQUMsQ0FBQztpQkFDckI7YUFDSjtZQUNELEtBQUssSUFBTSxNQUFJLElBQUksQ0FBQyxFQUFFO2dCQUNsQixJQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsTUFBSSxDQUFDLEVBQUU7b0JBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBSSxDQUFDLENBQUM7aUJBQ3JCO2FBQ0o7WUFDRCxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDZCxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDZCxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDdkMsT0FBTyxLQUFLLENBQUM7YUFDaEI7WUFDRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTtnQkFDcEMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO29CQUMvQixPQUFPLEtBQUssQ0FBQztpQkFDaEI7YUFDSjtZQUNELE9BQU8sSUFBSSxDQUFDO1FBQ2hCO1lBQ0ksT0FBTyxLQUFLLENBQUM7S0FDcEI7QUFDTCxDQUFDO0FBNURELHNDQTREQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCDCqSAyMDE1IFJvZ2llciBTY2hvdXRlbjxnaXRodWJAd29ya2luZ2NvZGUubmluamE+XHJcbi8vIExpY2Vuc2U6IElTQ1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNoYWxsb3dFcXVhbHMoYTogYW55LCBiOiBhbnkpOiBib29sZWFuIHtcclxuICAgIGlmIChhID09PSBiKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGEgIT09IHR5cGVvZiBiKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoICh0eXBlb2YgYSkge1xyXG4gICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxyXG4gICAgICAgIGNhc2UgJ251bWJlcic6XHJcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcclxuICAgICAgICBjYXNlICdmdW5jdGlvbic6XHJcbiAgICAgICAgY2FzZSAnc3ltYm9sJzpcclxuICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxyXG4gICAgICAgICAgICAvLyBhbHJlYWR5IGRpZCA9PT0gY29tcGFyZVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgY2FzZSAnb2JqZWN0JzpcclxuICAgICAgICAgICAgaWYgKGEgPT09IG51bGwgfHwgYiA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBhbHJlYWR5IGNvbXBhcmVkID09PVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpIHx8IEFycmF5LmlzQXJyYXkoYikpIHtcclxuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhKSB8fCAhQXJyYXkuaXNBcnJheShiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYVtpXSAhPT0gYltpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbmFtZXNBOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBuYW1lc0I6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVzQS5wdXNoKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVzQi5wdXNoKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5hbWVzQS5zb3J0KCk7XHJcbiAgICAgICAgICAgIG5hbWVzQi5zb3J0KCk7XHJcbiAgICAgICAgICAgIGlmIChuYW1lc0Euam9pbignLCcpICE9PSBuYW1lc0Iuam9pbignLCcpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lc0EubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhW25hbWVzQVtpXV0gIT09IGJbbmFtZXNBW2ldXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuIl19","// Copyright © 2015 Rogier Schouten<github@workingcode.ninja>\n// License: ISC\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_event_1 = require(\"./base-event\");\nvar EventQueue_1 = require(\"./EventQueue\");\n/**\n * Event that stays in a queue until you process the queue. Allows fine-grained\n * control over when events happen.\n * - Optionally condenses multiple post() calls into one.\n * - Handlers are called only for events posted after they were attached.\n * - Handlers are not called anymore when they are detached, even if a post() is in progress\n */\nvar QueuedEvent = /** @class */ (function (_super) {\n    __extends(QueuedEvent, _super);\n    /**\n     * Constructor\n     * @param opts Optional, an object with the following members:\n     *             - condensed: a Boolean indicating whether to condense multiple calls to post() into one (default false)\n     *             - queue: a specific event queue to use. The global EventQueue instance is used if not given.\n     */\n    function QueuedEvent(opts) {\n        var _this = _super.call(this) || this;\n        _this._queued = false;\n        _this.options = opts;\n        var options = opts || {};\n        if (typeof options.condensed === 'boolean') {\n            _this._condensed = options.condensed;\n        }\n        else {\n            _this._condensed = false;\n        }\n        if (typeof options.queue === 'object' && options.queue !== null) {\n            _this._queue = options.queue;\n        }\n        return _this;\n    }\n    QueuedEvent.prototype.post = function () {\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (!this._listeners || this._listeners.length === 0) {\n            return;\n        }\n        var queue = (this._queue ? this._queue : EventQueue_1.default.global());\n        if (this._condensed) {\n            this._queuedData = args;\n            this._queuedListeners = this._listeners;\n            if (this._queued) {\n                return;\n            }\n            else {\n                this._queued = true;\n                queue.add(function () {\n                    // immediately mark non-queued to allow new AsyncEvent to happen as result\n                    // of calling handlers\n                    _this._queued = false;\n                    // cache listeners and data because they might change while calling event handlers\n                    var data = _this._queuedData;\n                    var listeners = _this._queuedListeners;\n                    for (var i = 0; i < listeners.length; ++i) {\n                        var listener = listeners[i];\n                        _this._call(listener, data);\n                    }\n                });\n            }\n        }\n        else { // not condensed\n            var listeners_1 = this._listeners;\n            queue.add(function () {\n                for (var i = 0; i < listeners_1.length; ++i) {\n                    var listener = listeners_1[i];\n                    _this._call(listener, args);\n                }\n            });\n        }\n    };\n    return QueuedEvent;\n}(base_event_1.BaseEvent));\nexports.QueuedEvent = QueuedEvent;\n/**\n * Convenience class for events without data\n */\nvar VoidQueuedEvent = /** @class */ (function (_super) {\n    __extends(VoidQueuedEvent, _super);\n    function VoidQueuedEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Send the event.\n     */\n    VoidQueuedEvent.prototype.post = function () {\n        _super.prototype.post.call(this, undefined);\n    };\n    return VoidQueuedEvent;\n}(QueuedEvent));\nexports.VoidQueuedEvent = VoidQueuedEvent;\n/**\n * Similar to 'error' event on EventEmitter: throws when a post() occurs while no handlers set.\n */\nvar ErrorQueuedEvent = /** @class */ (function (_super) {\n    __extends(ErrorQueuedEvent, _super);\n    function ErrorQueuedEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorQueuedEvent.prototype.post = function (data) {\n        if (!this._listeners || this._listeners.length === 0) {\n            throw new Error(\"error event posted while no listeners attached. Error: \" + data.message);\n        }\n        _super.prototype.post.call(this, data);\n    };\n    return ErrorQueuedEvent;\n}(QueuedEvent));\nexports.ErrorQueuedEvent = ErrorQueuedEvent;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVldWVkLWV2ZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xpYi9xdWV1ZWQtZXZlbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsNkRBQTZEO0FBQzdELGVBQWU7QUFFZixZQUFZLENBQUM7Ozs7Ozs7Ozs7Ozs7OztBQUViLDJDQUEyRDtBQUMzRCwyQ0FBbUQ7QUFnQm5EOzs7Ozs7R0FNRztBQUNIO0lBQW9DLCtCQUFZO0lBYTVDOzs7OztPQUtHO0lBQ0gscUJBQVksSUFBc0I7UUFBbEMsWUFDSSxpQkFBTyxTQVdWO1FBdEJPLGFBQU8sR0FBWSxLQUFLLENBQUM7UUFZN0IsS0FBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7UUFDcEIsSUFBTSxPQUFPLEdBQW9CLElBQUksSUFBSSxFQUFFLENBQUM7UUFDNUMsSUFBSSxPQUFPLE9BQU8sQ0FBQyxTQUFTLEtBQUssU0FBUyxFQUFFO1lBQ3hDLEtBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQztTQUN2QzthQUFNO1lBQ0gsS0FBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7U0FDM0I7UUFDRCxJQUFJLE9BQU8sT0FBTyxDQUFDLEtBQUssS0FBSyxRQUFRLElBQUksT0FBTyxDQUFDLEtBQUssS0FBSyxJQUFJLEVBQUU7WUFDN0QsS0FBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDO1NBQy9COztJQUNMLENBQUM7SUFTTSwwQkFBSSxHQUFYO1FBQUEsaUJBa0NDO1FBbENXLGNBQWM7YUFBZCxVQUFjLEVBQWQscUJBQWMsRUFBZCxJQUFjO1lBQWQseUJBQWM7O1FBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUNsRCxPQUFPO1NBQ1Y7UUFDRCxJQUFNLEtBQUssR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLG9CQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUNoRSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDakIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7WUFDeEIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7WUFDeEMsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO2dCQUNkLE9BQU87YUFDVjtpQkFBTTtnQkFDSCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztnQkFDcEIsS0FBSyxDQUFDLEdBQUcsQ0FBQztvQkFDTiwwRUFBMEU7b0JBQzFFLHNCQUFzQjtvQkFDdEIsS0FBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7b0JBQ3JCLGtGQUFrRjtvQkFDbEYsSUFBTSxJQUFJLEdBQUcsS0FBSSxDQUFDLFdBQVcsQ0FBQztvQkFDOUIsSUFBTSxTQUFTLEdBQUcsS0FBSSxDQUFDLGdCQUFnQixDQUFDO29CQUN4QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTt3QkFDdkMsSUFBTSxRQUFRLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUM5QixLQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQztxQkFDOUI7Z0JBQ0wsQ0FBQyxDQUFDLENBQUM7YUFDTjtTQUNKO2FBQU0sRUFBRSxnQkFBZ0I7WUFDckIsSUFBTSxXQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztZQUNsQyxLQUFLLENBQUMsR0FBRyxDQUFDO2dCQUNOLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFTLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFO29CQUN2QyxJQUFNLFFBQVEsR0FBRyxXQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQzlCLEtBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO2lCQUM5QjtZQUNMLENBQUMsQ0FBQyxDQUFDO1NBQ047SUFDTCxDQUFDO0lBQ0wsa0JBQUM7QUFBRCxDQUFDLEFBM0VELENBQW9DLHNCQUFTLEdBMkU1QztBQTNFWSxrQ0FBVztBQTZFeEI7O0dBRUc7QUFDSDtJQUFxQyxtQ0FBaUI7SUFBdEQ7O0lBUUEsQ0FBQztJQU5HOztPQUVHO0lBQ0ksOEJBQUksR0FBWDtRQUNJLGlCQUFNLElBQUksWUFBQyxTQUFTLENBQUMsQ0FBQztJQUMxQixDQUFDO0lBQ0wsc0JBQUM7QUFBRCxDQUFDLEFBUkQsQ0FBcUMsV0FBVyxHQVEvQztBQVJZLDBDQUFlO0FBVzVCOztHQUVHO0FBQ0g7SUFBc0Msb0NBQWtCO0lBQXhEOztJQVFBLENBQUM7SUFOVSwrQkFBSSxHQUFYLFVBQVksSUFBVztRQUNuQixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDbEQsTUFBTSxJQUFJLEtBQUssQ0FBQyw0REFBMEQsSUFBSSxDQUFDLE9BQVMsQ0FBQyxDQUFDO1NBQzdGO1FBQ0QsaUJBQU0sSUFBSSxZQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUFDTCx1QkFBQztBQUFELENBQUMsQUFSRCxDQUFzQyxXQUFXLEdBUWhEO0FBUlksNENBQWdCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IMKpIDIwMTUgUm9naWVyIFNjaG91dGVuPGdpdGh1YkB3b3JraW5nY29kZS5uaW5qYT5cclxuLy8gTGljZW5zZTogSVNDXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5pbXBvcnQge0Jhc2VFdmVudCwgUG9zdGFibGUsIExpc3RlbmVyfSBmcm9tICcuL2Jhc2UtZXZlbnQnO1xyXG5pbXBvcnQge2RlZmF1bHQgYXMgRXZlbnRRdWV1ZX0gZnJvbSAnLi9FdmVudFF1ZXVlJztcclxuXHJcbi8qKlxyXG4gKiBPcHRpb25zIGZvciB0aGUgUXVldWVkRXZlbnQgY29uc3RydWN0b3JcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVldWVkRXZlbnRPcHRzIHtcclxuICAgIC8qKlxyXG4gICAgICogQ29uZGVuc2UgbXVsdGlwbGUgY2FsbHMgdG8gcG9zdCgpIGludG8gb25lLlxyXG4gICAgICovXHJcbiAgICBjb25kZW5zZWQ/OiBib29sZWFuO1xyXG4gICAgLyoqXHJcbiAgICAgKiBTcGVjaWZpYyBldmVudCBxdWV1ZSB0byB1c2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGdsb2JhbCBpbnN0YW5jZSBpcyB1c2VkLlxyXG4gICAgICovXHJcbiAgICBxdWV1ZT86IEV2ZW50UXVldWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFdmVudCB0aGF0IHN0YXlzIGluIGEgcXVldWUgdW50aWwgeW91IHByb2Nlc3MgdGhlIHF1ZXVlLiBBbGxvd3MgZmluZS1ncmFpbmVkXHJcbiAqIGNvbnRyb2wgb3ZlciB3aGVuIGV2ZW50cyBoYXBwZW4uXHJcbiAqIC0gT3B0aW9uYWxseSBjb25kZW5zZXMgbXVsdGlwbGUgcG9zdCgpIGNhbGxzIGludG8gb25lLlxyXG4gKiAtIEhhbmRsZXJzIGFyZSBjYWxsZWQgb25seSBmb3IgZXZlbnRzIHBvc3RlZCBhZnRlciB0aGV5IHdlcmUgYXR0YWNoZWQuXHJcbiAqIC0gSGFuZGxlcnMgYXJlIG5vdCBjYWxsZWQgYW55bW9yZSB3aGVuIHRoZXkgYXJlIGRldGFjaGVkLCBldmVuIGlmIGEgcG9zdCgpIGlzIGluIHByb2dyZXNzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUXVldWVkRXZlbnQ8VD4gZXh0ZW5kcyBCYXNlRXZlbnQ8VD4gaW1wbGVtZW50cyBQb3N0YWJsZTxUPiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIGludGVybmFsbHkgLSB0aGUgZXhhY3Qgb3B0aW9ucyBvYmplY3QgZ2l2ZW4gdG8gY29uc3RydWN0b3JcclxuICAgICAqL1xyXG4gICAgcHVibGljIG9wdGlvbnM6IFF1ZXVlZEV2ZW50T3B0cztcclxuXHJcbiAgICBwcml2YXRlIF9jb25kZW5zZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIF9xdWV1ZTogRXZlbnRRdWV1ZTtcclxuICAgIHByaXZhdGUgX3F1ZXVlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfcXVldWVkTGlzdGVuZXJzOiBMaXN0ZW5lcjxUPltdO1xyXG4gICAgcHJpdmF0ZSBfcXVldWVkRGF0YTogYW55W107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIG9wdHMgT3B0aW9uYWwsIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgbWVtYmVyczpcclxuICAgICAqICAgICAgICAgICAgIC0gY29uZGVuc2VkOiBhIEJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRvIGNvbmRlbnNlIG11bHRpcGxlIGNhbGxzIHRvIHBvc3QoKSBpbnRvIG9uZSAoZGVmYXVsdCBmYWxzZSlcclxuICAgICAqICAgICAgICAgICAgIC0gcXVldWU6IGEgc3BlY2lmaWMgZXZlbnQgcXVldWUgdG8gdXNlLiBUaGUgZ2xvYmFsIEV2ZW50UXVldWUgaW5zdGFuY2UgaXMgdXNlZCBpZiBub3QgZ2l2ZW4uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdHM/OiBRdWV1ZWRFdmVudE9wdHMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uczogUXVldWVkRXZlbnRPcHRzID0gb3B0cyB8fCB7fTtcclxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuY29uZGVuc2VkID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZGVuc2VkID0gb3B0aW9ucy5jb25kZW5zZWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZGVuc2VkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5xdWV1ZSA9PT0gJ29iamVjdCcgJiYgb3B0aW9ucy5xdWV1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9xdWV1ZSA9IG9wdGlvbnMucXVldWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBTZW5kIHRoZSBldmVudC4gRXZlbnRzIGFyZSBxdWV1ZWQgaW4gdGhlIGV2ZW50IHF1ZXVlIHVudGlsIGZsdXNoZWQgb3V0LlxyXG4gICAgKiBJZiB0aGUgJ2NvbmRlbnNlZCcgb3B0aW9uIHdhcyBnaXZlbiBpbiB0aGUgY29uc3RydWN0b3IsIG11bHRpcGxlIHBvc3RzKClcclxuICAgICogYmV0d2VlbiBxdWV1ZSBmbHVzaGVzIGFyZSBjb25kZW5zZWQgaW50byBvbmUgY2FsbCB3aXRoIHRoZSBkYXRhIGZyb20gdGhlXHJcbiAgICAqIGxhc3QgcG9zdCgpIGNhbGwuXHJcbiAgICAqL1xyXG4gICAgcHVibGljIHBvc3QoZGF0YTogVCk6IHZvaWQ7XHJcbiAgICBwdWJsaWMgcG9zdCguLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5fbGlzdGVuZXJzIHx8IHRoaXMuX2xpc3RlbmVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBxdWV1ZSA9ICh0aGlzLl9xdWV1ZSA/IHRoaXMuX3F1ZXVlIDogRXZlbnRRdWV1ZS5nbG9iYWwoKSk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NvbmRlbnNlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9xdWV1ZWREYXRhID0gYXJncztcclxuICAgICAgICAgICAgdGhpcy5fcXVldWVkTGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcXVldWVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9xdWV1ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcXVldWUuYWRkKCgpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbW1lZGlhdGVseSBtYXJrIG5vbi1xdWV1ZWQgdG8gYWxsb3cgbmV3IEFzeW5jRXZlbnQgdG8gaGFwcGVuIGFzIHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9mIGNhbGxpbmcgaGFuZGxlcnNcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9xdWV1ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjYWNoZSBsaXN0ZW5lcnMgYW5kIGRhdGEgYmVjYXVzZSB0aGV5IG1pZ2h0IGNoYW5nZSB3aGlsZSBjYWxsaW5nIGV2ZW50IGhhbmRsZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX3F1ZXVlZERhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fcXVldWVkTGlzdGVuZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxsKGxpc3RlbmVyLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7IC8vIG5vdCBjb25kZW5zZWRcclxuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xyXG4gICAgICAgICAgICBxdWV1ZS5hZGQoKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxsKGxpc3RlbmVyLCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ29udmVuaWVuY2UgY2xhc3MgZm9yIGV2ZW50cyB3aXRob3V0IGRhdGFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWb2lkUXVldWVkRXZlbnQgZXh0ZW5kcyBRdWV1ZWRFdmVudDx2b2lkPiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIHRoZSBldmVudC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHBvc3QoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIucG9zdCh1bmRlZmluZWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFNpbWlsYXIgdG8gJ2Vycm9yJyBldmVudCBvbiBFdmVudEVtaXR0ZXI6IHRocm93cyB3aGVuIGEgcG9zdCgpIG9jY3VycyB3aGlsZSBubyBoYW5kbGVycyBzZXQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRXJyb3JRdWV1ZWRFdmVudCBleHRlbmRzIFF1ZXVlZEV2ZW50PEVycm9yPiB7XHJcblxyXG4gICAgcHVibGljIHBvc3QoZGF0YTogRXJyb3IpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2xpc3RlbmVycyB8fCB0aGlzLl9saXN0ZW5lcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZXJyb3IgZXZlbnQgcG9zdGVkIHdoaWxlIG5vIGxpc3RlbmVycyBhdHRhY2hlZC4gRXJyb3I6ICR7ZGF0YS5tZXNzYWdlfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlci5wb3N0KGRhdGEpO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==","// Copyright © 2015 Rogier Schouten<github@workingcode.ninja>\n// License: ISC\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_event_1 = require(\"./base-event\");\n/**\n * This is a true EventEmitter replacement: the handlers are called synchronously when\n * you post the event.\n * - Allows better error handling by aggregating any errors thrown by handlers.\n * - Prevents livelock by throwing an error when recursion depth is above a maximum.\n * - Handlers are called only for events posted after they were attached.\n * - Handlers are not called anymore when they are detached, even if a post() is in progress\n */\nvar SyncEvent = /** @class */ (function (_super) {\n    __extends(SyncEvent, _super);\n    function SyncEvent() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * Recursive post() invocations\n         */\n        _this._recursion = 0;\n        return _this;\n    }\n    SyncEvent.prototype.post = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (!this._listeners || this._listeners.length === 0) {\n            return;\n        }\n        this._recursion++;\n        if (SyncEvent.MAX_RECURSION_DEPTH > 0 &&\n            this._recursion > SyncEvent.MAX_RECURSION_DEPTH) {\n            throw new Error('event fired recursively');\n        }\n        // copy a reference to the array because this._listeners might be replaced during\n        // the handler calls\n        var listeners = this._listeners;\n        for (var i = 0; i < listeners.length; ++i) {\n            var listener = listeners[i];\n            this._call(listener, args);\n        }\n        this._recursion--;\n    };\n    /**\n     * Maximum number of times that an event handler may cause the same event\n     * recursively.\n     */\n    SyncEvent.MAX_RECURSION_DEPTH = 10;\n    return SyncEvent;\n}(base_event_1.BaseEvent));\nexports.SyncEvent = SyncEvent;\n/**\n * Convenience class for events without data\n */\nvar VoidSyncEvent = /** @class */ (function (_super) {\n    __extends(VoidSyncEvent, _super);\n    function VoidSyncEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Send the event.\n     */\n    VoidSyncEvent.prototype.post = function () {\n        _super.prototype.post.call(this, undefined);\n    };\n    return VoidSyncEvent;\n}(SyncEvent));\nexports.VoidSyncEvent = VoidSyncEvent;\n/**\n * Similar to 'error' event on EventEmitter: throws when a post() occurs while no handlers set.\n */\nvar ErrorSyncEvent = /** @class */ (function (_super) {\n    __extends(ErrorSyncEvent, _super);\n    function ErrorSyncEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ErrorSyncEvent.prototype.post = function (data) {\n        if (this.listenerCount() === 0) {\n            throw new Error(\"error event posted while no listeners attached. Error: \" + data.message);\n        }\n        _super.prototype.post.call(this, data);\n    };\n    return ErrorSyncEvent;\n}(SyncEvent));\nexports.ErrorSyncEvent = ErrorSyncEvent;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3luYy1ldmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvc3luYy1ldmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2REFBNkQ7QUFDN0QsZUFBZTtBQUVmLFlBQVksQ0FBQzs7Ozs7Ozs7Ozs7Ozs7O0FBRWIsMkNBQWlEO0FBRWpEOzs7Ozs7O0dBT0c7QUFDSDtJQUFrQyw2QkFBWTtJQUE5QztRQUFBLHFFQXFDQztRQTdCRzs7V0FFRztRQUNLLGdCQUFVLEdBQVcsQ0FBQyxDQUFDOztJQTBCbkMsQ0FBQztJQWxCVSx3QkFBSSxHQUFYO1FBQVksY0FBYzthQUFkLFVBQWMsRUFBZCxxQkFBYyxFQUFkLElBQWM7WUFBZCx5QkFBYzs7UUFDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQ2xELE9BQU87U0FDVjtRQUNELElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNsQixJQUFJLFNBQVMsQ0FBQyxtQkFBbUIsR0FBRyxDQUFDO1lBQ2pDLElBQUksQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDLG1CQUFtQixFQUFFO1lBQ2pELE1BQU0sSUFBSSxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQztTQUM5QztRQUNELGlGQUFpRjtRQUNqRixvQkFBb0I7UUFDcEIsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUNsQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTtZQUN2QyxJQUFNLFFBQVEsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDOUI7UUFDRCxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDdEIsQ0FBQztJQWxDRDs7O09BR0c7SUFDVyw2QkFBbUIsR0FBVyxFQUFFLENBQUM7SUErQm5ELGdCQUFDO0NBQUEsQUFyQ0QsQ0FBa0Msc0JBQVMsR0FxQzFDO0FBckNZLDhCQUFTO0FBdUN0Qjs7R0FFRztBQUNIO0lBQW1DLGlDQUFlO0lBQWxEOztJQVFBLENBQUM7SUFORzs7T0FFRztJQUNJLDRCQUFJLEdBQVg7UUFDSSxpQkFBTSxJQUFJLFlBQUMsU0FBUyxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUNMLG9CQUFDO0FBQUQsQ0FBQyxBQVJELENBQW1DLFNBQVMsR0FRM0M7QUFSWSxzQ0FBYTtBQVUxQjs7R0FFRztBQUNIO0lBQW9DLGtDQUFnQjtJQUFwRDs7SUFRQSxDQUFDO0lBTlUsNkJBQUksR0FBWCxVQUFZLElBQVc7UUFDbkIsSUFBSSxJQUFJLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQyxFQUFFO1lBQzVCLE1BQU0sSUFBSSxLQUFLLENBQUMsNERBQTBELElBQUksQ0FBQyxPQUFTLENBQUMsQ0FBQztTQUM3RjtRQUNELGlCQUFNLElBQUksWUFBQyxJQUFJLENBQUMsQ0FBQztJQUNyQixDQUFDO0lBQ0wscUJBQUM7QUFBRCxDQUFDLEFBUkQsQ0FBb0MsU0FBUyxHQVE1QztBQVJZLHdDQUFjIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IMKpIDIwMTUgUm9naWVyIFNjaG91dGVuPGdpdGh1YkB3b3JraW5nY29kZS5uaW5qYT5cclxuLy8gTGljZW5zZTogSVNDXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5pbXBvcnQge0Jhc2VFdmVudCwgUG9zdGFibGV9IGZyb20gJy4vYmFzZS1ldmVudCc7XHJcblxyXG4vKipcclxuICogVGhpcyBpcyBhIHRydWUgRXZlbnRFbWl0dGVyIHJlcGxhY2VtZW50OiB0aGUgaGFuZGxlcnMgYXJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IHdoZW5cclxuICogeW91IHBvc3QgdGhlIGV2ZW50LlxyXG4gKiAtIEFsbG93cyBiZXR0ZXIgZXJyb3IgaGFuZGxpbmcgYnkgYWdncmVnYXRpbmcgYW55IGVycm9ycyB0aHJvd24gYnkgaGFuZGxlcnMuXHJcbiAqIC0gUHJldmVudHMgbGl2ZWxvY2sgYnkgdGhyb3dpbmcgYW4gZXJyb3Igd2hlbiByZWN1cnNpb24gZGVwdGggaXMgYWJvdmUgYSBtYXhpbXVtLlxyXG4gKiAtIEhhbmRsZXJzIGFyZSBjYWxsZWQgb25seSBmb3IgZXZlbnRzIHBvc3RlZCBhZnRlciB0aGV5IHdlcmUgYXR0YWNoZWQuXHJcbiAqIC0gSGFuZGxlcnMgYXJlIG5vdCBjYWxsZWQgYW55bW9yZSB3aGVuIHRoZXkgYXJlIGRldGFjaGVkLCBldmVuIGlmIGEgcG9zdCgpIGlzIGluIHByb2dyZXNzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU3luY0V2ZW50PFQ+IGV4dGVuZHMgQmFzZUV2ZW50PFQ+IGltcGxlbWVudHMgUG9zdGFibGU8VD4ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF4aW11bSBudW1iZXIgb2YgdGltZXMgdGhhdCBhbiBldmVudCBoYW5kbGVyIG1heSBjYXVzZSB0aGUgc2FtZSBldmVudFxyXG4gICAgICogcmVjdXJzaXZlbHkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgTUFYX1JFQ1VSU0lPTl9ERVBUSDogbnVtYmVyID0gMTA7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWN1cnNpdmUgcG9zdCgpIGludm9jYXRpb25zXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgX3JlY3Vyc2lvbjogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgdGhlIGV2ZW50LiBIYW5kbGVycyBhcmUgY2FsbGVkIGltbWVkaWF0ZWx5IGFuZCBzeW5jaHJvbm91c2x5LlxyXG4gICAgICogSWYgYW4gZXJyb3IgaXMgdGhyb3duIGJ5IGEgaGFuZGxlciwgdGhlIHJlbWFpbmluZyBoYW5kbGVycyBhcmUgc3RpbGwgY2FsbGVkLlxyXG4gICAgICogQWZ0ZXJ3YXJkLCBhbiBBZ2dyZWdhdGVFcnJvciBpcyB0aHJvd24gd2l0aCB0aGUgb3JpZ2luYWwgZXJyb3IocykgaW4gaXRzICdjYXVzZXMnIHByb3BlcnR5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9zdChkYXRhOiBUKTogdm9pZDtcclxuICAgIHB1YmxpYyBwb3N0KC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9saXN0ZW5lcnMgfHwgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JlY3Vyc2lvbisrO1xyXG4gICAgICAgIGlmIChTeW5jRXZlbnQuTUFYX1JFQ1VSU0lPTl9ERVBUSCA+IDAgJiZcclxuICAgICAgICAgICAgdGhpcy5fcmVjdXJzaW9uID4gU3luY0V2ZW50Lk1BWF9SRUNVUlNJT05fREVQVEgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdldmVudCBmaXJlZCByZWN1cnNpdmVseScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb3B5IGEgcmVmZXJlbmNlIHRvIHRoZSBhcnJheSBiZWNhdXNlIHRoaXMuX2xpc3RlbmVycyBtaWdodCBiZSByZXBsYWNlZCBkdXJpbmdcclxuICAgICAgICAvLyB0aGUgaGFuZGxlciBjYWxsc1xyXG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTtcclxuICAgICAgICAgICAgdGhpcy5fY2FsbChsaXN0ZW5lciwgYXJncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JlY3Vyc2lvbi0tO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ29udmVuaWVuY2UgY2xhc3MgZm9yIGV2ZW50cyB3aXRob3V0IGRhdGFcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWb2lkU3luY0V2ZW50IGV4dGVuZHMgU3luY0V2ZW50PHZvaWQ+IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgdGhlIGV2ZW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9zdCgpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5wb3N0KHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaW1pbGFyIHRvICdlcnJvcicgZXZlbnQgb24gRXZlbnRFbWl0dGVyOiB0aHJvd3Mgd2hlbiBhIHBvc3QoKSBvY2N1cnMgd2hpbGUgbm8gaGFuZGxlcnMgc2V0LlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEVycm9yU3luY0V2ZW50IGV4dGVuZHMgU3luY0V2ZW50PEVycm9yPiB7XHJcblxyXG4gICAgcHVibGljIHBvc3QoZGF0YTogRXJyb3IpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lckNvdW50KCkgPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBlcnJvciBldmVudCBwb3N0ZWQgd2hpbGUgbm8gbGlzdGVuZXJzIGF0dGFjaGVkLiBFcnJvcjogJHtkYXRhLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyLnBvc3QoZGF0YSk7XHJcbiAgICB9XHJcbn1cclxuIl19","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction mix(client, mixins) {\r\n    var clientKeys = Object.getOwnPropertyNames(client.prototype);\r\n    for (var _i = 0, mixins_1 = mixins; _i < mixins_1.length; _i++) {\r\n        var mixin = mixins_1[_i];\r\n        var mixinMixables = getMixables(clientKeys, mixin);\r\n        Object.defineProperties(client.prototype, mixinMixables);\r\n    }\r\n}\r\n/**\r\n * Returns a map of mixables. That is things that can be mixed in\r\n */\r\nfunction getMixables(clientKeys, mixin) {\r\n    var descriptors = {};\r\n    switch (typeof mixin) {\r\n        case \"object\":\r\n            descriptors = getMixables(mixin);\r\n            break;\r\n        case \"function\":\r\n            descriptors = getMixables(mixin.prototype);\r\n            break;\r\n    }\r\n    return descriptors;\r\n    function getMixables(obj) {\r\n        var map = {};\r\n        Object.getOwnPropertyNames(obj).map(function (key) {\r\n            if (clientKeys.indexOf(key) < 0) {\r\n                var descriptor = Object.getOwnPropertyDescriptor(obj, key);\r\n                if (descriptor === undefined)\r\n                    return;\r\n                if (descriptor.get || descriptor.set) {\r\n                    map[key] = descriptor;\r\n                }\r\n                else if (typeof descriptor.value === \"function\") {\r\n                    map[key] = descriptor;\r\n                }\r\n            }\r\n        });\r\n        return map;\r\n    }\r\n}\r\n/**\r\n * Takes a list of classes or object literals and adds their methods\r\n * to the class calling it.\r\n */\r\nfunction use() {\r\n    var options = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        options[_i] = arguments[_i];\r\n    }\r\n    return function (target, propertyKey) {\r\n        mix(target.constructor, options.reverse());\r\n    };\r\n}\r\nexports.use = use;\r\n/**\r\n * Takes a method as a parameter and add it to the class calling it.\r\n */\r\nfunction delegate(method) {\r\n    return function (target, propertyKey) {\r\n        target.constructor.prototype[propertyKey] = method;\r\n    };\r\n}\r\nexports.delegate = delegate;\r\n//# sourceMappingURL=index.js.map","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import * as Fatina from 'fatina';\n\n// tslint:disable:no-console\nexport class TransformTween {\n\tprivate moveTween: Fatina.ITween | undefined;\n\tprivate rotateTween: Fatina.ITween | undefined;\n\tprivate fadeTween: Fatina.ITween | undefined;\n\n\tprivate _moveTween (data: any, duration: number, autostart: boolean, autokill: boolean) {\n\t\tconst self = this as any;\n\t\tconst tween = Fatina.tween(self.position)\n\t\t\t.to(data, duration)\n\t\t\t.setEasing(Fatina.EasingType.InOutQuad);\n\n\t\tif (self.refresh) tween.onUpdate(() => self.refresh());\n\n\t\tif (autostart) {\n\t\t\tif (autokill && this.moveTween) this.moveTween.kill();\n\t\t\ttween.start();\n\t\t}\n\n\t\tthis.moveTween = tween;\n\n\t\treturn tween;\n\t}\n\n\tpublic moveX (x = 0, duration = 250, autostart = true, autokill = false) {\n\t\treturn this._moveTween({ x }, duration, autostart, autokill);\n\t}\n\n\tpublic moveY (y = 0, duration = 250, autostart = true, autokill = false) {\n\t\treturn this._moveTween({ y }, duration, autostart, autokill);\n\t}\n\n\tpublic move (x = 0, y = 0, duration = 250, autostart = true, autokill = true) {\n\t\treturn this._moveTween({ x, y }, duration, autostart, autokill);\n\t}\n\n\tprivate _fadeTween (data: any, duration: number, autostart: boolean, autokill: boolean) {\n\t\tconst self = this as any;\n\t\tconst tween = Fatina.tween(this)\n\t\t\t.to(data, duration)\n\t\t\t.setEasing(Fatina.EasingType.InOutQuad);\n\n\t\tif (self.refresh) tween.onUpdate(() => self.refresh());\n\n\t\tif (autostart) {\n\t\t\tif (autokill && this.fadeTween) this.fadeTween.kill();\n\t\t\ttween.start();\n\t\t}\n\n\t\tthis.fadeTween = tween;\n\t\treturn tween;\n\t}\n\n\tpublic show (duration = 150, autostart = true, autokill = true) {\n\t\treturn this._fadeTween({ opacity: 1 }, duration, autostart, autokill);\n\t}\n\n\tpublic hide (duration = 150, autostart = true, autokill = true) {\n\t\treturn this._fadeTween({ opacity: 0 }, duration, autostart, autokill);\n\t}\n\n\tprivate _rotateTween (data: any, duration: number, autostart: boolean, autokill: boolean) {\n\t\tconst self = this as any;\n\t\tconst tween = Fatina.tween(this)\n\t\t\t.to(data, duration)\n\t\t\t.setEasing(Fatina.EasingType.InOutQuad);\n\n\t\tif (self.refresh) tween.onUpdate(() => self.refresh());\n\n\t\tif (autostart) {\n\t\t\tif (autokill && this.rotateTween) this.rotateTween.kill();\n\t\t\ttween.start();\n\t\t}\n\n\t\tthis.rotateTween = tween;\n\t\treturn tween;\n\t}\n\n\tpublic rotate (duration = 150, autostart = true, autokill = true) {\n\t\treturn this._fadeTween({ opacity: 1 }, duration, autostart, autokill);\n\t}\n}\n","export const types = {};\nexport function register (type: string, className: any) {\n\ttypes[type] = className;\n}\n\nexport class Factory {\n\t/**\n\t * @ignore\n\t */\n\tpublic create (type: string, id: string, params?: any) {\n\t\tif (!types[type]) {\n\t\t\tthrow new Error(`Cannot create type ${type}`);\n\t\t}\n\t\tconst self = this as any;\n\t\tconst child = new types[type](id, params, self, self._projector);\n\t\tself.addChild(child);\n\t\treturn child;\n\t}\n}\n","import { h, VNode, Projector } from 'maquette';\nimport { SyncEvent } from 'ts-events';\n\nexport class Node {\n\tpublic id?: string;\n\t/**\n\t * @ignore\n\t */\n\tpublic _projector?: Projector;\n\t/**\n\t * @ignore\n\t */\n\tpublic _parent?: Node;\n\t/**\n\t * @ignore\n\t */\n\tpublic _childrens: Node[] = [];\n\n\tprivate createEvent: SyncEvent<void> | undefined;\n\tprivate destroyEvent: SyncEvent<void> | undefined;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic resetTransform () {\n\t\tthis._childrens = [];\n\t\tif (!this.createEvent) this.createEvent = new SyncEvent<void>();\n\t\tif (!this.destroyEvent) this.destroyEvent = new SyncEvent<void>();\n\t}\n\n\tprotected handlerAfterCreate () {\n\t\tif (this.createEvent) this.createEvent.post();\n\t}\n\n\tprotected handleAfterRemoved () {\n\t\tif (this.destroyEvent) this.destroyEvent.post();\n\t}\n\n\tpublic onLoad (cb: () => void) {\n\t\tif (this.createEvent) this.createEvent.attach(cb);\n\t}\n\n\tpublic onDestroy (cb: () => void) {\n\t\tif (this.destroyEvent) this.destroyEvent.attach(cb);\n\t}\n\n\tpublic addChild (element: Node) {\n\t\tthis._childrens.push(element);\n\t\tthis.refresh();\n\t}\n\n\tpublic removeChild (element: Node) {\n\t\tconst i = this._childrens.indexOf(element);\n\t\tif (i !== -1) {\n\t\t\tthis._childrens.splice(i, 1);\n\t\t}\n\t\tthis.refresh();\n\t}\n\n\tpublic destroy () {\n\t\tif (this._parent) this._parent.removeChild(this);\n\t}\n\n\tpublic refresh () {\n\t\tif (this._projector) this._projector.scheduleRender();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic render (): VNode {\n\t\treturn h('div', this._childrens.map((x) => x.render()));\n\t}\n\n\tpublic toString (): string {\n\t\treturn `[UI ${this.id}]`;\n\t}\n}\n","import { Vector2 } from '../../helpers';\nimport { resolution } from '../../config';\n\n// tslint:disable-next-line:max-classes-per-file\nexport class Transform {\n\tpublic enable = true;\n\tpublic anchor: Vector2 = undefined as any;\n\tpublic pivot: Vector2 = undefined as any;\n\tpublic position: Vector2 = undefined as any;\n\tpublic positionPx: Vector2 = undefined as any;\n\tpublic size: Vector2 = undefined as any;\n\tpublic sizePx: Vector2 = undefined as any;\n\tpublic scale: Vector2 = undefined as any;\n\tpublic opacity = 1;\n\tpublic rotation = 0;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic resetStyle () {\n\t\tconst self = this as any;\n\t\tconst handler = {\n\t\t\tset: (obj, prop, value) => {\n\t\t\t\tobj[prop] = value;\n\t\t\t\t// tslint:disable-next-line:no-console\n\t\t\t\tif (self.refresh) self.refresh();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\n\t\tconst handlerPos = {\n\t\t\tget: (obj, prop) => {\n\t\t\t\tif (prop !== 'x' && prop !== 'y') return obj[prop];\n\t\t\t\treturn self.position[prop] * resolution[prop];\n\t\t\t},\n\t\t\tset: (obj, prop, value) => {\n\t\t\t\tif (prop !== 'x' && prop !== 'y') return obj[prop] = value;\n\t\t\t\telse self.position[prop] = value / resolution[prop];\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\t\t// tslint:disable:no-console\n\t\tconst handlerSize = {\n\t\t\tget: (obj, prop) => {\n\t\t\t\tif (prop !== 'x' && prop !== 'y') return obj[prop];\n\t\t\t\treturn self.size[prop] * resolution[prop];\n\t\t\t},\n\t\t\tset: (obj, prop, value) => {\n\t\t\t\tif (prop !== 'x' && prop !== 'y') return obj[prop] = value;\n\t\t\t\telse self.size[prop] = value / resolution[prop];\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\t\tthis.enable = true;\n\t\tthis.anchor = new Proxy(new Vector2(), handler);\n\t\tthis.pivot = new Proxy(new Vector2(), handler);\n\t\tthis.position = new Proxy(new Vector2(), handler);\n\t\tthis.positionPx = new Proxy(new Vector2(), handlerPos);\n\t\tthis.size = new Proxy(new Vector2(1, 1), handler);\n\t\tthis.sizePx = new Proxy(new Vector2(), handlerSize);\n\t\tthis.scale = new Proxy(new Vector2(1, 1), handler);\n\n\t\tthis.opacity = 1;\n\t\tthis.rotation = 0;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic getStyle () {\n\t\tconst x = ((this.anchor.x / this.size.x) - this.pivot.x + (this.position.x / this.size.x)) * 100;\n\t\tconst y = ((this.anchor.y / this.size.y) - this.pivot.y + (this.position.y / this.size.y)) * 100;\n\t\tlet transform = `translate(${x}%, ${y}%) `;\n\n\t\tif (this.scale.x !== 1 || this.scale.y !== 1) {\n\t\t\ttransform += `scale(${this.scale.x}, ${this.scale.y}) `;\n\t\t}\n\n\t\tif (this.rotation !== 0) {\n\t\t\ttransform += `rotate(${this.rotation}deg)`;\n\t\t}\n\n\t\treturn {\n\t\t\tdisplay: this.enable && this.opacity > 0 ? 'block' : 'none',\n\t\t\twidth: `${this.size.x * 100}%`,\n\t\t\theight: `${this.size.y * 100}%`,\n\t\t\ttransformOrigin: 'top left',\n\t\t\topacity: this.opacity.toString(),\n\t\t\ttransform,\n\t\t\twillChange: 'transform, opacity'\n\t\t};\n\t}\n}\n","// Core\nexport { Factory } from './core/factory';\nexport { Node } from './core/node';\nexport { Transform } from './core/transform';\n\n// Interaction\nexport { Clickable } from './interaction/clickable';\n\n// Animation\nexport { TransformTween } from './animation/transformTween';\n","import { SyncEvent } from 'ts-events';\n\nexport class Clickable {\n\n\t/**\n\t * @ignore\n\t */\n\tprivate clickEvent?: SyncEvent<void>;\n\n\t/**\n\t * @ignore\n\t */\n\tpublic resetClickable () {\n\t\tthis.clickEvent = new SyncEvent<void>();\n\t}\n\n\tpublic click () {\n\t\tif (!this.clickEvent) return;\n\t\tthis.clickEvent.post();\n\t}\n\n\t// helpers\n\tpublic onClick (cb: () => void) {\n\t\tif (this.clickEvent) this.clickEvent.attach(cb);\n\t}\n}\n","import { use } from 'typescript-mix';\nimport { h, VNode, Projector } from 'maquette';\nimport { Node, Transform, Clickable, TransformTween } from '../../behaviours';\nimport { resolution } from '../../config';\n\n// tslint:disable-next-line:interface-name\nexport interface JilCanvas extends Node, Transform, Clickable, TransformTween { }\n\nexport class JilCanvas {\n\t@use(Node, Transform, Clickable, TransformTween) public this: any;\n\n\tconstructor (id: string, params: any, parent: Node, projector: Projector | undefined) {\n\t\tthis.id = id;\n\t\tthis._parent = parent;\n\t\tthis._projector = projector;\n\t\tthis.resetClickable();\n\t\tthis.resetTransform();\n\t\tthis.resetStyle();\n\t}\n\n\tpublic render (): VNode {\n\t\treturn h('canvas', {\n\t\t\tid: this.id,\n\t\t\tkey: this.id,\n\t\t\twidth: resolution.x,\n\t\t\theight: resolution.y,\n\t\t\tclass: 'canvas',\n\t\t\t// styles: this.getStyle(),\n\t\t\tonclick: this.click.bind(this),\n\t\t\tafterCreate: this.handlerAfterCreate.bind(this),\n\t\t\tafterRemoved: this.handleAfterRemoved.bind(this)\n\t\t});\n\t}\n}\n","import { use } from 'typescript-mix';\nimport { h, VNode, Projector } from 'maquette';\nimport { Node, Transform, TransformTween, Factory } from '../../behaviours';\nimport { resolution } from '../../config';\nimport { JilPanel } from './panel';\nimport { JilCanvas } from './canvas';\nimport { JilButton } from '../element/button';\nimport { JilImage } from '../element/image';\nimport { JilText } from '../element/text';\n\n// tslint:disable-next-line:interface-name\nexport interface JilLayer extends Node, Transform, Factory, TransformTween { }\n\nexport class JilLayer {\n\t@use(Node, Transform, Factory, TransformTween) public this: any;\n\n\tpublic classname: string;\n\n\tconstructor (id: string, params: any, parent: Node, projector: Projector | undefined) {\n\t\tthis.id = id;\n\t\tthis.classname = params ? params : '';\n\t\tthis._parent = parent;\n\t\tthis._projector = projector;\n\t\tthis.resetTransform();\n\t\tthis.resetStyle();\n\n\t\t// tslint:disable-next-line\n\t\tif (typeof(window) !== 'undefined') {\n\t\t\twindow.addEventListener('resize', this.resizeHandler.bind(this), false);\n\t\t}\n\t}\n\n\tpublic createPanel = (id: string) => this.create('panel', id) as JilPanel;\n\tpublic createButton = (id: string, params?: string | any) => this.create('button', id, params) as JilButton;\n\tpublic createImage = (id: string, params?: string | any) => this.create('image', id, params) as JilImage;\n\tpublic createText = (id: string, params?: string | any) => this.create('text', id, params) as JilText;\n\tpublic createCanvas = (id: string, params?: string | any) => this.create('canvas', id, params) as JilCanvas;\n\n\tprivate resizeHandler () {\n\t\tthis.refresh();\n\t}\n\n\tpublic render (): VNode {\n\t\tconst styles = {} as any;\n\t\tstyles.display = this.enable ? 'block' : 'none';\n\t\tstyles.opacity = this.opacity.toString();\n\n\t\t// tslint:disable-next-line\n\t\tif ((typeof(window) !== 'undefined') && window.innerWidth > 0 && window.innerWidth > 0) {\n\t\t\tconst screenRatio = window.innerWidth / window.innerHeight;\n\t\t\tconst gameRatio = resolution.x / resolution.y;\n\t\t\tconst scaleX = window.innerWidth / resolution.x;\n\t\t\tconst scaleY = window.innerHeight / resolution.y;\n\t\t\tconst scale = (screenRatio <= gameRatio) ? scaleX : scaleY;\n\n\t\t\tstyles.width = `${resolution.x}px`;\n\t\t\tstyles.height = `${resolution.y}px`;\n\t\t\tstyles.transformOrigin = 'top left';\n\t\t\tstyles.transform = `scale(${scale})`;\n\t\t}\n\n\t\treturn h('div', {\n\t\t\tid: this.id,\n\t\t\tkey: this.id,\n\t\t\tclass: `layer ${this.classname}`.trim(),\n\t\t\tstyles\n\t\t}, this._childrens.map((x) => x.render()));\n\t}\n}\n","import { use } from 'typescript-mix';\nimport { h, VNode, Projector } from 'maquette';\nimport { Node, Transform, TransformTween, Factory } from '../../behaviours';\nimport { JilCanvas } from './canvas';\nimport { JilButton } from '../element/button';\nimport { JilImage } from '../element/image';\nimport { JilText } from '../element/text';\n\n// tslint:disable-next-line:interface-name\nexport interface JilPanel extends Node, Transform, Factory, TransformTween { }\n\nexport class JilPanel {\n\t@use(Node, Transform, Factory, TransformTween) public this: any;\n\n\tconstructor (id: string, params: any, parent: Node, projector: Projector | undefined) {\n\t\tthis.id = id;\n\t\tthis._parent = parent;\n\t\tthis._projector = projector;\n\t\tthis.resetTransform();\n\t\tthis.resetStyle();\n\t}\n\n\tpublic render (): VNode {\n\t\treturn h('div', {\n\t\t\tid: this.id,\n\t\t\tkey: this.id,\n\t\t\tclass: 'panel',\n\t\t\tstyles: this.getStyle()\n\t\t}, this._childrens.map((x) => x.render()));\n\t}\n\n\tpublic createPanel = (id: string) => this.create('panel', id) as JilPanel;\n\tpublic createButton = (id: string, params?: string | any) => this.create('button', id, params) as JilButton;\n\tpublic createImage = (id: string, params?: string | any) => this.create('image', id, params) as JilImage;\n\tpublic createText = (id: string, params?: string | any) => this.create('text', id, params) as JilText;\n\tpublic createCanvas = (id: string, params?: string | any) => this.create('canvas', id, params) as JilCanvas;\n}\n","import { use } from 'typescript-mix';\nimport { h, VNode, Projector } from 'maquette';\nimport { SyncEvent } from 'ts-events';\nimport { Node, Transform, Factory } from '../../behaviours';\nimport { Vector2 } from '../../helpers';\nimport { resolution } from '../../config';\nimport { JilLayer } from './layer';\n\n// tslint:disable-next-line:interface-name\nexport interface JilScene extends Node, Transform, Factory { }\n\nexport class JilScene {\n\t/**\n\t * @ignore\n\t */\n\t@use(Node, Transform, Factory) public this: any;\n\n\tprivate enterEvent: SyncEvent<void>;\n\tprivate leaveEvent: SyncEvent<void>;\n\n\tconstructor (id: string, projector: Projector) {\n\t\tthis.id = id;\n\t\tthis.enterEvent = new SyncEvent<void>();\n\t\tthis.leaveEvent = new SyncEvent<void>();\n\t\tthis._projector = projector;\n\t\tthis.resetTransform();\n\t\tthis.resetStyle();\n\t\tthis.enable = false;\n\t}\n\n\t/**\n\t * Enter the scene\n\t *  - Make it visible\n\t *  - Trigger events\n\t *  - Refresh UI\n\t *\n\t * @returns\n\t * @memberof Scene\n\t */\n\tpublic enter () {\n\t\tif (this.enable) return;\n\t\tthis.enable = true;\n\t\tthis.enterEvent.post();\n\t\tthis.refresh();\n\t}\n\n\t/**\n\t * Leave the scene\n\t *  - Hide it\n\t *  - Trigger events\n\t *  - Refresh UI\n\t *\n\t * @returns\n\t * @memberof Scene\n\t */\n\tpublic leave () {\n\t\tif (!this.enable) return;\n\t\tthis.enable = false;\n\t\tthis.leaveEvent.post();\n\t\tthis.refresh();\n\t}\n\n\t/**\n\t * Create a new Layer in this scene\n\t *\n\t * @param id ID of the new layer (need to be unique)\n\t * @memberof Scene\n\t */\n\tpublic createLayer = (id: string, classname?: string) => this.create('layer', id, classname) as JilLayer;\n\n\t/**\n\t * Render the HTML\n\t * @ignore\n\t *\n\t * @returns {VNode}\n\t * @memberof Scene\n\t */\n\tpublic render (): VNode {\n\t\tconst styles = {} as any;\n\t\tstyles.display = this.enable ? 'block' : 'none';\n\n\t\t// tslint:disable-next-line\n\t\tconst screenRatio = (typeof(window) !== 'undefined') ? window.innerWidth / window.innerHeight : 1;\n\t\tconst gameRatio = resolution.x / resolution.y;\n\n\t\tif (screenRatio <= gameRatio) {\n\t\t\tstyles.width = '100vw';\n\t\t\tstyles.height = '56.25vw';\n\t\t\tstyles.marginTop = '-28.125vw';\n\t\t\tstyles.marginLeft = '0vw';\n\t\t\tstyles.top = '50vh';\n\t\t\tstyles.left = '0vh';\n\t\t} else {\n\t\t\tstyles.width = '177vh';\n\t\t\tstyles.height = '100vh';\n\t\t\tstyles.marginTop = '0vh';\n\t\t\tstyles.marginLeft = '-88.5vh';\n\t\t\tstyles.top = '0vw';\n\t\t\tstyles.left = '50vw';\n\t\t}\n\n\t\treturn h('div', {\n\t\t\tid: this.id,\n\t\t\tkey: this.id,\n\t\t\tclass: 'scene',\n\t\t\tstyles\n\t\t}, this._childrens.map((x) => {\n\t\t\treturn x.render();\n\t\t}));\n\t}\n\n\t// helpers\n\tpublic onEnter (cb: () => void) {\n\t\tthis.enterEvent.attach(cb);\n\t}\n\n\tpublic onLeave (cb: () => void) {\n\t\tthis.leaveEvent.attach(cb);\n\t}\n}\n","import { use } from 'typescript-mix';\nimport { h, VNode, Projector } from 'maquette';\nimport { Node, Transform, Clickable, TransformTween } from '../../behaviours';\n\n// tslint:disable-next-line:interface-name\nexport interface JilButton extends Node, Transform, Clickable, TransformTween { }\n\nexport class JilButton {\n\t@use(Node, Transform, Clickable, TransformTween) public this: any;\n\tpublic text;\n\n\tconstructor (id: string, params: any, parent: Node, projector: Projector | undefined) {\n\t\tthis.id = id;\n\t\tthis.text = params;\n\t\tthis._parent = parent;\n\t\tthis._projector = projector;\n\t\tthis.resetClickable();\n\t\tthis.resetTransform();\n\t\tthis.resetStyle();\n\t}\n\n\tpublic render (): VNode {\n\t\treturn h('button', {\n\t\t\tid: this.id,\n\t\t\tkey: this.id,\n\t\t\ttype: 'button',\n\t\t\tclass: 'nes-btn',\n\t\t\tstyles: this.getStyle(),\n\t\t\tonclick: this.click.bind(this)\n\t\t}, [ this.text ]);\n\t}\n}\n","import { use } from 'typescript-mix';\nimport { h, VNode, Projector } from 'maquette';\nimport { Node, Transform, Clickable, TransformTween } from '../../behaviours';\nimport { isString } from '../../helpers';\n\n// tslint:disable-next-line:interface-name\nexport interface JilImage extends Node, Transform, Clickable, TransformTween { }\n\nexport class JilImage {\n\t@use(Node, Transform, Clickable, TransformTween) public this: any;\n\n\tpublic src;\n\tpublic styles;\n\n\tconstructor (id: string, params: any, parent: Node, projector: Projector | undefined) {\n\t\tthis.id = id;\n\t\tthis.src = '';\n\t\tif (params) {\n\t\t\tthis.src = isString(params) ? params : params.src;\n\t\t}\n\t\tthis.styles = params || {};\n\t\tthis._parent = parent;\n\t\tthis._projector = projector;\n\t\tthis.resetClickable();\n\t\tthis.resetTransform();\n\t\tthis.resetStyle();\n\t}\n\n\tpublic render (): VNode {\n\t\treturn h('img', {\n\t\t\tid: this.id,\n\t\t\tkey: this.id,\n\t\t\tsrc: this.src,\n\t\t\tstyles: this.styles ? Object.assign(this.getStyle(), this.styles) : this.getStyle(),\n\t\t\tonclick: this.click.bind(this)\n\t\t});\n\t}\n}\n","import { use } from 'typescript-mix';\nimport { h, VNode, Projector } from 'maquette';\nimport { Node, Transform, TransformTween } from '../../behaviours';\nimport { isString } from '../../helpers';\n\n// tslint:disable-next-line:interface-name\nexport interface JilText extends Node, Transform, TransformTween { }\n\nexport class JilText {\n\t@use(Node, Transform, TransformTween) public this: any;\n\n\tpublic text;\n\tpublic styles;\n\n\tconstructor (id: string, params: any, parent: Node, projector: Projector | undefined) {\n\t\tthis.id = id;\n\t\tthis.text = 'Default Text';\n\t\tif (params) {\n\t\t\tthis.text = isString(params) ? params : params.text;\n\t\t}\n\t\tthis.styles = params || {};\n\t\tthis._parent = parent;\n\t\tthis._projector = projector;\n\t\tthis.resetTransform();\n\t\tthis.resetStyle();\n\t}\n\n\tpublic render (): VNode {\n\t\treturn h('div', {\n\t\t\tid: this.id,\n\t\t\tkey: this.id,\n\t\t\tclass: 'text',\n\t\t\tstyles: this.styles ? Object.assign(this.getStyle(), this.styles) : this.getStyle()\n\t\t}, [ this.text ]);\n\t}\n}\n","// Container\nexport { JilCanvas } from './container/canvas';\nexport { JilLayer } from './container/layer';\nexport { JilPanel } from './container/panel';\nexport { JilScene } from './container/scene';\n\n// Element\nexport { JilButton } from './element/button';\nexport { JilImage } from './element/image';\nexport { JilText } from './element/text';\n","import { Vector2 } from './helpers/vector2';\n\n/**\n * @ignore\n */\nexport const resolution = new Vector2(1280, 720);\n","export function isString (obj) {\n\treturn (Object.prototype.toString.call(obj) === '[object String]');\n}\n","export { Vector2 } from './vector2';\nexport { isString } from './helpers';\n","export class Vector2 {\n\tpublic x = 0;\n\tpublic y = 0;\n\n\tpublic constructor (x?: number, y?: number) {\n\t\tif (x) this.x = x;\n\t\tif (y) this.y = y;\n\t}\n\n\tpublic set (x: number, y: number) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n}\n","import { JilButton, JilPanel, JilLayer, JilCanvas, JilImage, JilText, JilScene } from './components';\nimport { register } from './behaviours/core/factory';\n\n// export class\nimport { SceneManager } from './sceneManager';\n\n// register to factory\nregister('button', JilButton);\nregister('panel', JilPanel);\nregister('layer', JilLayer);\nregister('image', JilImage);\nregister('text', JilText);\nregister('canvas', JilCanvas);\n\n/**\n * Init Helper\n * @function\n */\nexport const init = SceneManager.init;\n/**\n * Create a new scene\n * @function\n */\nexport const create = SceneManager.create;\n/**\n * Switch to a scene\n * @function\n */\nexport const use = SceneManager.use;\n\nexport { SceneManager };\n","import { JilScene } from './components';\nimport { createProjector, h, Projector } from 'maquette';\nimport { FadeInOut } from './transitions/sceneTransition';\nimport { resolution } from './config';\nimport * as Fatina from 'fatina';\n\n/**\n * @ignore\n */\nconst scenes: {[id: string]: JilScene} = {};\n/**\n * @ignore\n */\nconst sceneList: JilScene[] = [];\n/**\n * @ignore\n */\nlet projector: Projector | undefined;\n/**\n * @ignore\n */\nlet current: JilScene | undefined;\n\n/**\n * Scene Manager Object (use UMD: Universal Module Definition)\n */\nexport class SceneManager {\n\n\t/**\n\t * Create the JIL root and append it to the document.body\n\t *\n\t * @param width Native width of the game\n\t * @param height Native height of the game\n\t */\n\tpublic static init (width?: number, height?: number) {\n\t\tFatina.init();\n\n\t\tconst vdom = () => h('div', { id: 'root' }, sceneList.map((x) => x.render()));\n\n\t\t// tslint:disable-next-line\n\t\tif (typeof(document) !== 'undefined') {\n\t\t\tprojector = createProjector();\n\t\t\tprojector.append(document.body, vdom);\n\t\t} else {\n\t\t\tprojector = {\n\t\t\t\t// tslint:disable-next-line:no-empty\n\t\t\t\tscheduleRender: () => {}\n\t\t\t} as Projector;\n\t\t}\n\n\t\tif (width && height) {\n\t\t\tresolution.set(width, height);\n\t\t}\n\t}\n\n\t/**\n\t * Create a new scene\n\t *\n\t * @param id SceneId (need to be unique)\n\t */\n\tpublic static create (id: string): JilScene {\n\t\tif (!projector) {\n\t\t\tthrow new Error('JIL is not initialized, please call .init() before using it');\n\t\t}\n\t\tscenes[id] = new JilScene(id, projector);\n\t\tsceneList.push(scenes[id]);\n\t\tprojector.scheduleRender();\n\t\treturn scenes[id];\n\t}\n\n\t/**\n\t * Switch to a different scene\n\t *\n\t * @param id SceneId\n\t */\n\tpublic static use (id: string) {\n\t\tif (!projector) {\n\t\t\tthrow new Error('JIL is not initialized, please call .init() before using it');\n\t\t}\n\t\tif (current === scenes[id]) return;\n\n\t\tFadeInOut(current, scenes[id]);\n\n\t\tcurrent = scenes[id];\n\t}\n}\n","import { JilLayer, JilScene } from '../components';\nimport * as Fatina from 'fatina';\n\nexport function FadeInOut (sceneSrc: JilScene | undefined, SceneDst: JilScene) {\n\tconst sequence = Fatina.sequence();\n\t// tslint:disable:no-console\n\tsequence.appendCallback(() => console.log('Scene Transition Start', sceneSrc, SceneDst));\n\tif (sceneSrc) {\n\t\tconst faderSrc = sceneSrc.createLayer(`FaderOut_${Math.round(Math.random() * 100000)}`, 'fader');\n\t\tfaderSrc.opacity = 0;\n\t\tsequence.append(faderSrc.show(250, false));\n\t\tsequence.appendCallback(() => sceneSrc.leave());\n\t\tsequence.appendCallback(() => faderSrc.destroy());\n\t} else {\n\t\tsequence.appendInterval(500);\n\t}\n\tconst faderDst = SceneDst.createLayer(`FaderIn_${Math.round(Math.random() * 100000)}`, 'fader');\n\tfaderDst.opacity = 1;\n\tsequence.appendCallback(() => SceneDst.enter());\n\n\tconst tween = faderDst.hide(350, false);\n\ttween.onUpdate(() => faderDst.refresh());\n\tsequence.append(tween);\n\n\tsequence.appendCallback(() => console.log('Scene Transition Finish', sceneSrc, SceneDst));\n\tsequence.appendCallback(() => faderDst.destroy());\n\tsequence.start();\n}\n"],"sourceRoot":""}